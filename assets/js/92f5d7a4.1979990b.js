"use strict";(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[1483],{3975:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "assets": function() { return /* binding */ assets; },\n/* harmony export */   "contentTitle": function() { return /* binding */ contentTitle; },\n/* harmony export */   "default": function() { return /* binding */ MDXContent; },\n/* harmony export */   "frontMatter": function() { return /* binding */ frontMatter; },\n/* harmony export */   "metadata": function() { return /* binding */ metadata; },\n/* harmony export */   "toc": function() { return /* binding */ toc; }\n/* harmony export */ });\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7462);\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3366);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7294);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3905);\nvar _excluded=["components"];/* @jsxRuntime classic */ /* @jsx mdx */ /* @jsxFrag React.Fragment */var frontMatter={id:\'state-machines\',title:\'State Machines\'};var contentTitle=undefined;var metadata={"unversionedId":"walkthrough/state-machines","id":"walkthrough/state-machines","title":"State Machines","description":"The state machine is one of the most important tools a statesmith can have in his belt. XState is the current king of the JavaScript state machine world. Zedux is not out to change that, in fact we may build an official XState Zedux integration soon.","source":"@site/docs/walkthrough/state-machines.mdx","sourceDirName":"walkthrough","slug":"/walkthrough/state-machines","permalink":"/zedux/docs/walkthrough/state-machines","draft":false,"editUrl":"https://github.com/Omnistac/zedux/tree/master/docs/walkthrough/state-machines.mdx","tags":[],"version":"current","frontMatter":{"id":"state-machines","title":"State Machines"},"sidebar":"react","previous":{"title":"Resets","permalink":"/zedux/docs/walkthrough/resets"},"next":{"title":"Complex Params","permalink":"/zedux/docs/advanced/complex-params"}};var assets={};var toc=[{value:\'Creating a machine\',id:\'creating-a-machine\',level:2},{value:\'MachineStore\',id:\'machinestore\',level:2},{value:\'<code>.send()</code>\',id:\'send\',level:3},{value:\'<code>.is()</code>\',id:\'is\',level:3},{value:\'<code>.getValue()</code>\',id:\'getvalue\',level:3},{value:\'State Shape\',id:\'state-shape\',level:3},{value:\'Context\',id:\'context\',level:2},{value:\'<code>.getContext()</code>\',id:\'getcontext\',level:3},{value:\'<code>.setContext()</code>\',id:\'setcontext\',level:3},{value:\'<code>.setContextDeep()</code>\',id:\'setcontextdeep\',level:3},{value:\'Example\',id:\'example\',level:3},{value:\'Listeners\',id:\'listeners\',level:2},{value:\'<code>onEnter</code>\',id:\'onenter\',level:3},{value:\'<code>onLeave</code>\',id:\'onleave\',level:3},{value:\'<code>onTransition</code>\',id:\'ontransition\',level:3},{value:\'Contrived Example\',id:\'contrived-example\',level:2},{value:\'Guards\',id:\'guards\',level:2},{value:\'Recap\',id:\'recap\',level:2},{value:\'Next Steps\',id:\'next-steps\',level:2}];var layoutProps={toc:toc};var MDXLayout="wrapper";function MDXContent(_ref){var components=_ref.components,props=(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(_ref,_excluded);return (0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)(MDXLayout,(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The state machine is one of the most important tools a statesmith can have in his belt. ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"https://xstate.js.org/"},"XState")," is the current king of the JavaScript state machine world. Zedux is not out to change that, in fact we may build an official XState Zedux integration soon."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"However, Zedux does provide a minimal state machine implementation out of the box. These state machines use a high-level, TypeScript-first design that\'s meant to handle simple cases extremely well. For more power, use XState."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"creating-a-machine"},"Creating a machine"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Zedux provides a single high-level injector for creating automatically-typed state machines: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Pass a function to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore")," that accepts a single ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state")," factory function and returns an array of states. The first state in the array becomes the initial state."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { atom, injectMachineStore } from \'@zedux/react\'\\n\\nconst trafficLightAtom = atom(\'trafficLight\', () => {\\n  const store = injectMachineStore(state => [\\n    state(\'green\'), // <- the initial state\\n    state(\'yellow\'),\\n    state(\'red\'),\\n  ])\\n\\n  return store\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This creates a state machine with 3 states: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"yellow"),", and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"red"),". ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," is the initial state. But this machine is stuck in ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," forever! Let\'s give it transitions:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(state => [\\n  state(\'green\').on(\'timer\', \'yellow\'),\\n  state(\'yellow\').on(\'timer\', \'red\'),\\n  state(\'red\').on(\'timer\', \'green\'),\\n])\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".on(event, nextState)")," to add transitions to the machine\'s states. Now the machine can transition from ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," -> ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"yellow")," -> ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"red")," -> ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," -> etc. in a loop. The machine will transition when it receives the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"timer")," event."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now ... how do we send that event to the machine?"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"machinestore"},"MachineStore"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()")," returns a special store called a MachineStore. MachineStore extends the Zedux Store class and adds some state machine functionality."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { injectMachineStore, MachineStore } from \'@zedux/react\'\\n\\nconst exampleAtom = atom(\'example\', () => {\\n  const store = injectMachineStore(() => [])\\n\\n  store instanceof MachineStore // true\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"While you can instantiate the MachineStore class yourself, it\'s highly recommended to use helpers like ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()")," for the automatic TS types.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"send"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".send()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Use this to send events to the store, triggering state transitions:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=send-example resultVar=output","live":true,"ecosystemId":"send-example","resultVar":"output"},"const trafficLightAtom = atom(\'trafficLight\', () => {\\n  const store = injectMachineStore(state => [\\n    state(\'green\').on(\'timer\', \'yellow\'),\\n    state(\'yellow\').on(\'timer\', \'red\'),\\n    state(\'red\').on(\'timer\', \'green\'),\\n  ])\\n\\n  return store\\n})\\n\\nconst ecosystem = createEcosystem({ id: \'send-example\' })\\nconst { store } = ecosystem.getInstance(trafficLightAtom)\\n\\nconst initialState = store.getState()\\nstore.send(\'timer\')\\nconst nextState = store.getState()\\nconst output = { initialState, nextState }\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"The store returned from the state factory ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("em",{parentName:"p"},"is")," the atom instance\'s ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".store"),". Since this example returned a MachineStore, you can access the machine\'s methods directly on the instance\'s store - e.g. ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"instance.store.send(\'timer\')"),". This has full TypeScript support too!")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"For TypeScript users, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".send()")," only accepts strings that were specified as event names during machine creation. In this example, passing anything but the string ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'timer\'")," gives a TS error:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"send(\'time\') // Argument of type \'\\"time\\"\' is not assignable to parameter of type \'\\"timer\\"\'\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The machine will only transition if the current state has a transition specified for the passed event."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(state => [\\n  state(\'idle\').on(\'move\', \'animating\')\\n  state(\'animating\').on(\'finish\', \'idle\')\\n])\\n\\nstore.getValue() // \'idle\'\\nstore.send(\'finish\') // does nothing\\nstore.getValue() // \'idle\'\\nstore.send(\'move\')\\nstore.getValue() // \'animating\'\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"is"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".is()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Returns true if the machine\'s current state is the passed state string."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=is-example resultVar=output","live":true,"ecosystemId":"is-example","resultVar":"output"},"const trafficLightAtom = atom(\'trafficLight\', () => {\\n  const store = injectMachineStore(state => [\\n    state(\'green\').on(\'timer\', \'yellow\'),\\n    state(\'yellow\').on(\'timer\', \'red\'),\\n    state(\'red\').on(\'timer\', \'green\'),\\n  ])\\n\\n  return store\\n})\\n\\nconst ecosystem = createEcosystem({ id: \'is-example\' })\\n\\n// both .is and .send are bound function properties (destructuring is fine):\\nconst { is, send } = ecosystem.getInstance(trafficLightAtom).store\\n\\nsend(\'timer\')\\nsend(\'timer\')\\nconst output = is(\'red\')\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"For TS users, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".is()")," only accepts strings that were specified as state names during machine creation. In this example, passing anything but the strings ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'green\'"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'yellow\'"),", or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'red\'")," gives a TS error:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"is(\'yello\') // Argument of type \'\\"yello\\"\' is not assignable to parameter of type \'\\"green\\" | \\"yellow\\" | \\"red\\"\'\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"getvalue"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".getValue()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Returns the machine\'s current string value:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"store.getValue() // green\\nstore.send(\'timer\')\\nstore.getValue() // yellow\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"state-shape"},"State Shape"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The MachineStore\'s state is an object like the following:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"store.getState()\\n// {\\n//   context: undefined,\\n//   value: \'green\',\\n// }\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".value")," is the current string state of the machine."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These two lines are equivalent:\\nmachineStore.getState().value === \'green\'\\nmachineStore.is(\'green\')\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We\'ll look at ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".context")," next:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"context"},"Context"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"MachineStores can hold extra state, besides the value string. This extra state is called context. Context must be an object (or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"undefined"),")."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can pass the initial context as the 2nd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(statesFactory, initialContext)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"getcontext"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".getContext()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Returns the current context value. An alias for ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"machineStore.getState().context"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These two lines are equivalent:\\nmachineStore.getState().context\\nmachineStore.getContext()\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"setcontext"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".setContext()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Sets the store\'s context value. Accepts function overloads."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These are equivalent:\\nmachineStore.setState(state => ({ ...state, context: newContext }))\\nmachineStore.setContext(newContext)\\nmachineStore.setContext(context => newContext)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"setcontextdeep"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".setContextDeep()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Deeply merges the passed context value into the existing context. Accepts function overloads."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These are equivalent:\\nmachineStore.setStateDeep({ context: newContext })\\nmachineStore.setContextDeep(newContext)\\nmachineStore.setContextDeep(context => newContext)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"warning"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"Just like ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".setStateDeep()"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".setContextDeep()")," is only for updating state - it cannot be used to delete keys. Use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".setContext")," for that.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"example"},"Example"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Here\'s an example using context to keep track of how many times a theme toggler toggles:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/context resultVar=Theme","live":true,"ecosystemId":"state-machines/context","resultVar":"Theme"},"const themeAtom = atom(\'theme\', () => {\\n  const store = injectMachineStore(\\n    state => [\\n      state(\'light\').on(\'toggle\', \'dark\'),\\n      state(\'dark\').on(\'toggle\', \'light\'),\\n    ],\\n    { count: 0 },\\n    {\\n      onTransition: machine =>\\n        machine.setContext(context => ({ count: context.count + 1 })),\\n    }\\n  )\\n\\n  // you can alias store methods on exports for use in `useAtomState`:\\n  return api(store).setExports({ send: store.send })\\n})\\n\\nfunction Theme() {\\n  const [{ context, value }, { send }] = useAtomState(themeAtom)\\n\\n  return (\\n    <div style={value === \'dark\' ? { background: \'#444\', color: \'#fff\' } : {}}>\\n      <label>\\n        <input\\n          checked={value === \'dark\'}\\n          onChange={() => send(\'toggle\')}\\n          type=\\"checkbox\\"\\n        />\\n        <span>{value} mode</span>\\n      </label>\\n      <div>Toggle Count: {context.count}</div>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This example also made use of an ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," function. This is called a listener."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"listeners"},"Listeners"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Listeners can be used to run side effects when the state machine transitions to a new state. There are 3 kinds: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onEnter"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onLeave"),", and the universal ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"onenter"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"onEnter")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This listener is attached to individual states via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state.onEnter()"),". Here\'s an example using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," to send a request when the machine enters the \'fetching\' state:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const requestStore = injectMachineStore(\\n  state => [\\n    state(\'idle\').on(\'fetch\', \'fetching\'),\\n    state(\'fetching\')\\n      .on(\'succeed\', \'success\')\\n      .on(\'fail\', \'failure\')\\n      .onEnter(async machine => {\\n        try {\\n          const data = await fetch(\'/todos\').then(data => data.json())\\n          machine.setContextDeep({ data })\\n          machine.send(\'succeed\')\\n        } catch (error) {\\n          machine.setContextDeep({ error })\\n          machine.send(\'fail\')\\n        }\\n      }),\\n  ],\\n  { data: null, error: null }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"note"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"For TS users: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," has limited type support, since the machine\'s full type hasn\'t been inferred yet. The above example will work because ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," is placed after the two ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".on()")," calls for the \'fetching\' state. When you need access to better types, use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," instead.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"onleave"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"onLeave")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This listener is attached to individual states via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state.onLeave()"),". Here\'s an example using both ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onLeave()")," to set and clear a timeout:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const timeoutStore = injectMachineStore(\\n  state => [\\n    state(\'idle\').on(\'startTimer\', \'waiting\'),\\n    state(\'waiting\')\\n      .on(\'cancel\', \'idle\')\\n      .on(\'timeout\', \'idle\')\\n      .onEnter(machine => {\\n        const handle = setTimeout(() => {\\n          machine.setContext({ handle: null })\\n          machine.send(\'timeout\')\\n        }, 1000)\\n\\n        machine.setContext({ handle })\\n      })\\n      .onLeave(async machine => {\\n        const { handle } = machine.getContext()\\n\\n        if (!handle) return\\n\\n        clearTimeout(handle)\\n        machine.setContext({ handle: null })\\n      }),\\n  ],\\n  { handle: null }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"note"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"For TS users: Like ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onLeave()")," has limited type support, since the machine\'s full type hasn\'t been inferred yet. When you need access to better types, use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," instead.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"ontransition"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"onTransition")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This is the catch-all listener that will be called every time the state machine transitions. This listener has full type support, so use this when ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onEnter")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onLeave")," types are insufficient."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The 3rd parameter to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()")," is a config object:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(statesFactory, initialContext, config)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Pass ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," as part of this config"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const toggleMachine = injectMachineStore(\\n  state => [state(\'on\').on(\'toggle\', \'off\'), state(\'off\').on(\'toggle\', \'on\')],\\n  { onTransition }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"contrived-example"},"Contrived Example"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The obligatory garage door state machine example:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/door resultVar=Machine","live":true,"ecosystemId":"state-machines/door","resultVar":"Machine"},"const doorAtom = atom(\'door\', () => {\\n  const store = injectMachineStore(\\n    state => {\\n      const startTimeout = machine => {\\n        const { handle } = machine.getContext()\\n\\n        if (handle) clearTimeout(handle)\\n\\n        const newHandle = setTimeout(() => {\\n          machine.setContext({ handle: null })\\n          machine.send(\'timeout\')\\n        }, 1000)\\n\\n        machine.setContext({ handle: newHandle })\\n      }\\n\\n      return [\\n        state(\'open\').on(\'click\', \'closing\'),\\n        state(\'opening\')\\n          .on(\'click\', \'closing\')\\n          .on(\'timeout\', \'open\')\\n          .onEnter(startTimeout),\\n        state(\'closed\').on(\'click\', \'opening\'),\\n        state(\'closing\')\\n          .on(\'click\', \'opening\')\\n          .on(\'timeout\', \'closed\')\\n          .onEnter(startTimeout),\\n      ]\\n    },\\n    { handle: null }\\n  )\\n\\n  return store\\n})\\n\\nfunction Machine() {\\n  const { value } = useAtomValue(doorAtom)\\n  const { send } = useAtomInstance(doorAtom).store\\n\\n  return (\\n    <>\\n      <div>State: {value}</div>\\n      <button onClick={() => send(\'click\')}>Fire Click</button>\\n    </>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"guards"},"Guards"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Guards are functions that conditionally prevent the machine from performing a valid transition. Guards can be set per-transition via the 3rd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state.on()"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const maybeMoveStore = injectMachineStore(\\n  state => [state(\'idle\').on(\'move\', \'moving\', context => !context.isFrozen)],\\n  { isFrozen: false }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"These guards receive the machine\'s context as their only parameter. Return ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"true")," to allow the transition or any falsy value to prevent it. The above machine will only transition from ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"idle")," to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"moving")," if ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"context.isFrozen")," is falsy."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/guards resultVar=Controls","live":true,"ecosystemId":"state-machines/guards","resultVar":"Controls"},"const maybeMovingAtom = atom(\'maybeMoving\', () => {\\n  const store = injectMachineStore(\\n    state => [\\n      // the guard! Prevent this transition if we\'re frozen:\\n      state(\'idle\').on(\'move\', \'moving\', context => !context.isFrozen),\\n      state(\'moving\')\\n        .on(\'stop\', \'idle\')\\n        .onEnter(machine => {\\n          setTimeout(() => machine.send(\'stop\'), 1000)\\n        }),\\n    ],\\n    { isFrozen: false }\\n  )\\n\\n  return api(store).setExports({\\n    toggleFreeze: () =>\\n      store.setContext(context => ({ isFrozen: !context.isFrozen })),\\n    is: store.is,\\n    move: () => store.send(\'move\'),\\n  })\\n})\\n\\nfunction Controls() {\\n  const [{ context }, { toggleFreeze, is, move }] = useAtomState(\\n    maybeMovingAtom\\n  )\\n\\n  return (\\n    <div>\\n      <div>- {context.isFrozen ? \'Frozen\' : \'All Systems Go\'} -</div>\\n      <div\\n        style={{\\n          background: \'cyan\',\\n          height: 50,\\n          left: 0,\\n          position: \'relative\',\\n          transition: \'all 1s\',\\n          width: 50,\\n          ...(is(\'moving\') && { left: 50 }),\\n        }}\\n      />\\n      <button onClick={toggleFreeze}>\\n        {context.isFrozen ? \'Unfreeze\' : \'Freeze\'}\\n      </button>\\n      <button onClick={move}>\\n        Move {context.isFrozen ? \'(Does Nothing)\' : \'\'}\\n      </button>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can also configure the MachineStore with a universal guard via the config object:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"...\\nconst guard = (state, nextValue) => {\\n  // use the current state object and/or nextValue string to determine if the\\n  // transition should be allowed (return true if yes)\\n}\\nconst store = injectMachineStore(statesFactory, initialContext, { guard })\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This guard receives the full current state (",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"{ context, value }"),") and the name of the pending transition state. Here\'s an example using a universal guard to pause the machine after allowing it to cycle back to the start:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/guard resultVar=Cycler","live":true,"ecosystemId":"state-machines/guard","resultVar":"Cycler"},"const cyclingAtom = atom(\'cycling\', () => {\\n  const store = injectMachineStore(\\n    state => [\\n      state(\'a\').on(\'cycle\', \'b\'),\\n      state(\'b\').on(\'cycle\', \'c\'),\\n      state(\'c\').on(\'cycle\', \'a\'),\\n    ],\\n    { isPaused: false },\\n    {\\n      guard: (state, nextValue) => !state.context.isPaused || nextValue !== \'b\',\\n    }\\n  )\\n\\n  injectEffect(() => {\\n    const handle = setInterval(() => store.send(\'cycle\'), 1000)\\n\\n    return () => clearInterval(handle)\\n  }, [])\\n\\n  return api(store).setExports({\\n    togglePause: () =>\\n      store.setContext(context => ({ isPaused: !context.isPaused })),\\n  })\\n})\\n\\nfunction Cycler() {\\n  const [{ context, value }, { togglePause }] = useAtomState(cyclingAtom)\\n\\n  return (\\n    <div>\\n      <div>\\n        {value}{\' \'}\\n        {context.isPaused\\n          ? value === \'a\'\\n            ? \'(paused)\'\\n            : \'(finishing cycle...)\'\\n          : null}\\n      </div>\\n      <button onClick={togglePause}>\\n        {context.isPaused ? \'Resume\' : \'Pause\'}\\n      </button>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"recap"},"Recap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"injectMachineStore()")," to create a MachineStore.",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"li"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"state.on()")," adds transitions between states."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"state.onEnter()")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"state.onLeave()")," add listeners to individual states."))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Context is the MachineStore\'s \\"extra state\\". It must be an object (or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"undefined"),").",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"li"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Set initial context with the 2nd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"injectMachineStore"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Get context with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"machineStore.getContext()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Set context with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"machineStore.setContext()")," or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"machineStore.setContextDeep()")))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use guards to prevent valid transitions."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Add a universal guard and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"onTransition")," listener via the 3rd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"injectMachineStore"),".")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"next-steps"},"Next Steps"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"That\'s about it for the key features of Zedux. You\'re ready to jump in and get building! Check out the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../advanced/complex-params"},"advanced guides")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/classes/Atom"},"API docs")," as needed. Happy coding!"));};MDXContent.isMDXComponent=true;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksQ0FBRSxZQUFZLGVBQ0UsQ0FDdEIsZ0xBQThHLGtFQUFHLFVBQVUsQ0FBQyxHQUFHLENBQzNILE1BQU0sQ0FBRSw0QkFBNEIsb0JBQ1osU0FBUyxrRUFBRyxVQUFVLENBQUMsR0FBRyxDQUNsRCxNQUFNLENBQUUscUJBQXFCLGFBQ1osNkJBQWlDLENBQzFDLENBQ2hCLENBQ0EsQ0FDQUQsVUFBVSxDQUFDRyxjQUFjLENBQUcsSUFBSSIsInNvdXJjZXMiOlsid2VicGFjazovL3plZHV4LWRvY3MvLi9kb2NzL3dhbGt0aHJvdWdoL3N0YXRlLW1hY2hpbmVzLm1keD84ZTc3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuXG4vKiBAanN4UnVudGltZSBjbGFzc2ljICovXG4vKiBAanN4IG1keCAqL1xuLyogQGpzeEZyYWcgUmVhY3QuRnJhZ21lbnQgKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1keCB9IGZyb20gJ0BtZHgtanMvcmVhY3QnO1xuXG5cbmV4cG9ydCBjb25zdCBmcm9udE1hdHRlciA9IHtcblx0aWQ6ICdzdGF0ZS1tYWNoaW5lcycsXG5cdHRpdGxlOiAnU3RhdGUgTWFjaGluZXMnXG59O1xuZXhwb3J0IGNvbnN0IGNvbnRlbnRUaXRsZSA9IHVuZGVmaW5lZDtcbmV4cG9ydCBjb25zdCBtZXRhZGF0YSA9IHtcbiAgXCJ1bnZlcnNpb25lZElkXCI6IFwid2Fsa3Rocm91Z2gvc3RhdGUtbWFjaGluZXNcIixcbiAgXCJpZFwiOiBcIndhbGt0aHJvdWdoL3N0YXRlLW1hY2hpbmVzXCIsXG4gIFwidGl0bGVcIjogXCJTdGF0ZSBNYWNoaW5lc1wiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0YXRlIG1hY2hpbmUgaXMgb25lIG9mIHRoZSBtb3N0IGltcG9ydGFudCB0b29scyBhIHN0YXRlc21pdGggY2FuIGhhdmUgaW4gaGlzIGJlbHQuIFhTdGF0ZSBpcyB0aGUgY3VycmVudCBraW5nIG9mIHRoZSBKYXZhU2NyaXB0IHN0YXRlIG1hY2hpbmUgd29ybGQuIFplZHV4IGlzIG5vdCBvdXQgdG8gY2hhbmdlIHRoYXQsIGluIGZhY3Qgd2UgbWF5IGJ1aWxkIGFuIG9mZmljaWFsIFhTdGF0ZSBaZWR1eCBpbnRlZ3JhdGlvbiBzb29uLlwiLFxuICBcInNvdXJjZVwiOiBcIkBzaXRlL2RvY3Mvd2Fsa3Rocm91Z2gvc3RhdGUtbWFjaGluZXMubWR4XCIsXG4gIFwic291cmNlRGlyTmFtZVwiOiBcIndhbGt0aHJvdWdoXCIsXG4gIFwic2x1Z1wiOiBcIi93YWxrdGhyb3VnaC9zdGF0ZS1tYWNoaW5lc1wiLFxuICBcInBlcm1hbGlua1wiOiBcIi96ZWR1eC9kb2NzL3dhbGt0aHJvdWdoL3N0YXRlLW1hY2hpbmVzXCIsXG4gIFwiZHJhZnRcIjogZmFsc2UsXG4gIFwiZWRpdFVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9PbW5pc3RhYy96ZWR1eC90cmVlL21hc3Rlci9kb2NzL3dhbGt0aHJvdWdoL3N0YXRlLW1hY2hpbmVzLm1keFwiLFxuICBcInRhZ3NcIjogW10sXG4gIFwidmVyc2lvblwiOiBcImN1cnJlbnRcIixcbiAgXCJmcm9udE1hdHRlclwiOiB7XG4gICAgXCJpZFwiOiBcInN0YXRlLW1hY2hpbmVzXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlN0YXRlIE1hY2hpbmVzXCJcbiAgfSxcbiAgXCJzaWRlYmFyXCI6IFwicmVhY3RcIixcbiAgXCJwcmV2aW91c1wiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIlJlc2V0c1wiLFxuICAgIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3Mvd2Fsa3Rocm91Z2gvcmVzZXRzXCJcbiAgfSxcbiAgXCJuZXh0XCI6IHtcbiAgICBcInRpdGxlXCI6IFwiQ29tcGxleCBQYXJhbXNcIixcbiAgICBcInBlcm1hbGlua1wiOiBcIi96ZWR1eC9kb2NzL2FkdmFuY2VkL2NvbXBsZXgtcGFyYW1zXCJcbiAgfVxufTtcbmV4cG9ydCBjb25zdCBhc3NldHMgPSB7XG5cbn07XG5cblxuZXhwb3J0IGNvbnN0IHRvYyA9IFt7XG4gIHZhbHVlOiAnQ3JlYXRpbmcgYSBtYWNoaW5lJyxcbiAgaWQ6ICdjcmVhdGluZy1hLW1hY2hpbmUnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ01hY2hpbmVTdG9yZScsXG4gIGlkOiAnbWFjaGluZXN0b3JlJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT4uc2VuZCgpPC9jb2RlPicsXG4gIGlkOiAnc2VuZCcsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnPGNvZGU+LmlzKCk8L2NvZGU+JyxcbiAgaWQ6ICdpcycsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnPGNvZGU+LmdldFZhbHVlKCk8L2NvZGU+JyxcbiAgaWQ6ICdnZXR2YWx1ZScsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnU3RhdGUgU2hhcGUnLFxuICBpZDogJ3N0YXRlLXNoYXBlJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdDb250ZXh0JyxcbiAgaWQ6ICdjb250ZXh0JyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT4uZ2V0Q29udGV4dCgpPC9jb2RlPicsXG4gIGlkOiAnZ2V0Y29udGV4dCcsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnPGNvZGU+LnNldENvbnRleHQoKTwvY29kZT4nLFxuICBpZDogJ3NldGNvbnRleHQnLFxuICBsZXZlbDogM1xufSwge1xuICB2YWx1ZTogJzxjb2RlPi5zZXRDb250ZXh0RGVlcCgpPC9jb2RlPicsXG4gIGlkOiAnc2V0Y29udGV4dGRlZXAnLFxuICBsZXZlbDogM1xufSwge1xuICB2YWx1ZTogJ0V4YW1wbGUnLFxuICBpZDogJ2V4YW1wbGUnLFxuICBsZXZlbDogM1xufSwge1xuICB2YWx1ZTogJ0xpc3RlbmVycycsXG4gIGlkOiAnbGlzdGVuZXJzJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT5vbkVudGVyPC9jb2RlPicsXG4gIGlkOiAnb25lbnRlcicsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnPGNvZGU+b25MZWF2ZTwvY29kZT4nLFxuICBpZDogJ29ubGVhdmUnLFxuICBsZXZlbDogM1xufSwge1xuICB2YWx1ZTogJzxjb2RlPm9uVHJhbnNpdGlvbjwvY29kZT4nLFxuICBpZDogJ29udHJhbnNpdGlvbicsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnQ29udHJpdmVkIEV4YW1wbGUnLFxuICBpZDogJ2NvbnRyaXZlZC1leGFtcGxlJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdHdWFyZHMnLFxuICBpZDogJ2d1YXJkcycsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnUmVjYXAnLFxuICBpZDogJ3JlY2FwJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdOZXh0IFN0ZXBzJyxcbiAgaWQ6ICduZXh0LXN0ZXBzJyxcbiAgbGV2ZWw6IDJcbn1dO1xuXG5jb25zdCBsYXlvdXRQcm9wcyA9IHtcbiAgdG9jXG59O1xuY29uc3QgTURYTGF5b3V0ID0gXCJ3cmFwcGVyXCJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1EWENvbnRlbnQoe1xuICBjb21wb25lbnRzLFxuICAuLi5wcm9wc1xufSkge1xuICByZXR1cm4gPE1EWExheW91dCB7Li4ubGF5b3V0UHJvcHN9IHsuLi5wcm9wc30gY29tcG9uZW50cz17Y29tcG9uZW50c30gbWR4VHlwZT1cIk1EWExheW91dFwiPlxuXG4gICAgPHA+e2BUaGUgc3RhdGUgbWFjaGluZSBpcyBvbmUgb2YgdGhlIG1vc3QgaW1wb3J0YW50IHRvb2xzIGEgc3RhdGVzbWl0aCBjYW4gaGF2ZSBpbiBoaXMgYmVsdC4gYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcImh0dHBzOi8veHN0YXRlLmpzLm9yZy9cIlxuICAgICAgfX0+e2BYU3RhdGVgfTwvYT57YCBpcyB0aGUgY3VycmVudCBraW5nIG9mIHRoZSBKYXZhU2NyaXB0IHN0YXRlIG1hY2hpbmUgd29ybGQuIFplZHV4IGlzIG5vdCBvdXQgdG8gY2hhbmdlIHRoYXQsIGluIGZhY3Qgd2UgbWF5IGJ1aWxkIGFuIG9mZmljaWFsIFhTdGF0ZSBaZWR1eCBpbnRlZ3JhdGlvbiBzb29uLmB9PC9wPlxuICAgIDxwPntgSG93ZXZlciwgWmVkdXggZG9lcyBwcm92aWRlIGEgbWluaW1hbCBzdGF0ZSBtYWNoaW5lIGltcGxlbWVudGF0aW9uIG91dCBvZiB0aGUgYm94LiBUaGVzZSBzdGF0ZSBtYWNoaW5lcyB1c2UgYSBoaWdoLWxldmVsLCBUeXBlU2NyaXB0LWZpcnN0IGRlc2lnbiB0aGF0J3MgbWVhbnQgdG8gaGFuZGxlIHNpbXBsZSBjYXNlcyBleHRyZW1lbHkgd2VsbC4gRm9yIG1vcmUgcG93ZXIsIHVzZSBYU3RhdGUuYH08L3A+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwiY3JlYXRpbmctYS1tYWNoaW5lXCJcbiAgICB9fT57YENyZWF0aW5nIGEgbWFjaGluZWB9PC9oMj5cbiAgICA8cD57YFplZHV4IHByb3ZpZGVzIGEgc2luZ2xlIGhpZ2gtbGV2ZWwgaW5qZWN0b3IgZm9yIGNyZWF0aW5nIGF1dG9tYXRpY2FsbHktdHlwZWQgc3RhdGUgbWFjaGluZXM6IGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluamVjdE1hY2hpbmVTdG9yZWB9PC9pbmxpbmVDb2RlPntgLmB9PC9wPlxuICAgIDxwPntgUGFzcyBhIGZ1bmN0aW9uIHRvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluamVjdE1hY2hpbmVTdG9yZWB9PC9pbmxpbmVDb2RlPntgIHRoYXQgYWNjZXB0cyBhIHNpbmdsZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BzdGF0ZWB9PC9pbmxpbmVDb2RlPntgIGZhY3RvcnkgZnVuY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzLiBUaGUgZmlyc3Qgc3RhdGUgaW4gdGhlIGFycmF5IGJlY29tZXMgdGhlIGluaXRpYWwgc3RhdGUuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGltcG9ydCB7IGF0b20sIGluamVjdE1hY2hpbmVTdG9yZSB9IGZyb20gJ0B6ZWR1eC9yZWFjdCdcblxuY29uc3QgdHJhZmZpY0xpZ2h0QXRvbSA9IGF0b20oJ3RyYWZmaWNMaWdodCcsICgpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoc3RhdGUgPT4gW1xuICAgIHN0YXRlKCdncmVlbicpLCAvLyA8LSB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIHN0YXRlKCd5ZWxsb3cnKSxcbiAgICBzdGF0ZSgncmVkJyksXG4gIF0pXG5cbiAgcmV0dXJuIHN0b3JlXG59KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BUaGlzIGNyZWF0ZXMgYSBzdGF0ZSBtYWNoaW5lIHdpdGggMyBzdGF0ZXM6IGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGdyZWVuYH08L2lubGluZUNvZGU+e2AsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHllbGxvd2B9PC9pbmxpbmVDb2RlPntgLCBhbmQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgcmVkYH08L2lubGluZUNvZGU+e2AuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGdyZWVuYH08L2lubGluZUNvZGU+e2AgaXMgdGhlIGluaXRpYWwgc3RhdGUuIEJ1dCB0aGlzIG1hY2hpbmUgaXMgc3R1Y2sgaW4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZ3JlZW5gfTwvaW5saW5lQ29kZT57YCBmb3JldmVyISBMZXQncyBnaXZlIGl0IHRyYW5zaXRpb25zOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCBzdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShzdGF0ZSA9PiBbXG4gIHN0YXRlKCdncmVlbicpLm9uKCd0aW1lcicsICd5ZWxsb3cnKSxcbiAgc3RhdGUoJ3llbGxvdycpLm9uKCd0aW1lcicsICdyZWQnKSxcbiAgc3RhdGUoJ3JlZCcpLm9uKCd0aW1lcicsICdncmVlbicpLFxuXSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgV2UgdXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5vbihldmVudCwgbmV4dFN0YXRlKWB9PC9pbmxpbmVDb2RlPntgIHRvIGFkZCB0cmFuc2l0aW9ucyB0byB0aGUgbWFjaGluZSdzIHN0YXRlcy4gTm93IHRoZSBtYWNoaW5lIGNhbiB0cmFuc2l0aW9uIGZyb20gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZ3JlZW5gfTwvaW5saW5lQ29kZT57YCAtPiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2B5ZWxsb3dgfTwvaW5saW5lQ29kZT57YCAtPiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2ByZWRgfTwvaW5saW5lQ29kZT57YCAtPiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BncmVlbmB9PC9pbmxpbmVDb2RlPntgIC0+IGV0Yy4gaW4gYSBsb29wLiBUaGUgbWFjaGluZSB3aWxsIHRyYW5zaXRpb24gd2hlbiBpdCByZWNlaXZlcyB0aGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgdGltZXJgfTwvaW5saW5lQ29kZT57YCBldmVudC5gfTwvcD5cbiAgICA8cD57YE5vdyAuLi4gaG93IGRvIHdlIHNlbmQgdGhhdCBldmVudCB0byB0aGUgbWFjaGluZT9gfTwvcD5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJtYWNoaW5lc3RvcmVcIlxuICAgIH19PntgTWFjaGluZVN0b3JlYH08L2gyPlxuICAgIDxwPjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmplY3RNYWNoaW5lU3RvcmUoKWB9PC9pbmxpbmVDb2RlPntgIHJldHVybnMgYSBzcGVjaWFsIHN0b3JlIGNhbGxlZCBhIE1hY2hpbmVTdG9yZS4gTWFjaGluZVN0b3JlIGV4dGVuZHMgdGhlIFplZHV4IFN0b3JlIGNsYXNzIGFuZCBhZGRzIHNvbWUgc3RhdGUgbWFjaGluZSBmdW5jdGlvbmFsaXR5LmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2BpbXBvcnQgeyBpbmplY3RNYWNoaW5lU3RvcmUsIE1hY2hpbmVTdG9yZSB9IGZyb20gJ0B6ZWR1eC9yZWFjdCdcblxuY29uc3QgZXhhbXBsZUF0b20gPSBhdG9tKCdleGFtcGxlJywgKCkgPT4ge1xuICBjb25zdCBzdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZSgoKSA9PiBbXSlcblxuICBzdG9yZSBpbnN0YW5jZW9mIE1hY2hpbmVTdG9yZSAvLyB0cnVlXG59KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidHlwZVwiOiBcInRpcFwiXG4gICAgfX0+PHAgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj57YFdoaWxlIHlvdSBjYW4gaW5zdGFudGlhdGUgdGhlIE1hY2hpbmVTdG9yZSBjbGFzcyB5b3Vyc2VsZiwgaXQncyBoaWdobHkgcmVjb21tZW5kZWQgdG8gdXNlIGhlbHBlcnMgbGlrZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmplY3RNYWNoaW5lU3RvcmUoKWB9PC9pbmxpbmVDb2RlPntgIGZvciB0aGUgYXV0b21hdGljIFRTIHR5cGVzLmB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJzZW5kXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDNcIj57YC5zZW5kKClgfTwvaW5saW5lQ29kZT48L2gzPlxuICAgIDxwPntgVXNlIHRoaXMgdG8gc2VuZCBldmVudHMgdG8gdGhlIHN0b3JlLCB0cmlnZ2VyaW5nIHN0YXRlIHRyYW5zaXRpb25zOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIixcbiAgICAgICAgXCJtZXRhc3RyaW5nXCI6IFwibGl2ZSBlY29zeXN0ZW1JZD1zZW5kLWV4YW1wbGUgcmVzdWx0VmFyPW91dHB1dFwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcInNlbmQtZXhhbXBsZVwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIm91dHB1dFwiXG4gICAgICB9fT57YGNvbnN0IHRyYWZmaWNMaWdodEF0b20gPSBhdG9tKCd0cmFmZmljTGlnaHQnLCAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKHN0YXRlID0+IFtcbiAgICBzdGF0ZSgnZ3JlZW4nKS5vbigndGltZXInLCAneWVsbG93JyksXG4gICAgc3RhdGUoJ3llbGxvdycpLm9uKCd0aW1lcicsICdyZWQnKSxcbiAgICBzdGF0ZSgncmVkJykub24oJ3RpbWVyJywgJ2dyZWVuJyksXG4gIF0pXG5cbiAgcmV0dXJuIHN0b3JlXG59KVxuXG5jb25zdCBlY29zeXN0ZW0gPSBjcmVhdGVFY29zeXN0ZW0oeyBpZDogJ3NlbmQtZXhhbXBsZScgfSlcbmNvbnN0IHsgc3RvcmUgfSA9IGVjb3N5c3RlbS5nZXRJbnN0YW5jZSh0cmFmZmljTGlnaHRBdG9tKVxuXG5jb25zdCBpbml0aWFsU3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpXG5zdG9yZS5zZW5kKCd0aW1lcicpXG5jb25zdCBuZXh0U3RhdGUgPSBzdG9yZS5nZXRTdGF0ZSgpXG5jb25zdCBvdXRwdXQgPSB7IGluaXRpYWxTdGF0ZSwgbmV4dFN0YXRlIH1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxhZG1vbml0aW9uIHsuLi57XG4gICAgICBcInR5cGVcIjogXCJ0aXBcIlxuICAgIH19PjxwIHBhcmVudE5hbWU9XCJhZG1vbml0aW9uXCI+e2BUaGUgc3RvcmUgcmV0dXJuZWQgZnJvbSB0aGUgc3RhdGUgZmFjdG9yeSBgfTxlbSBwYXJlbnROYW1lPVwicFwiPntgaXNgfTwvZW0+e2AgdGhlIGF0b20gaW5zdGFuY2UncyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Auc3RvcmVgfTwvaW5saW5lQ29kZT57YC4gU2luY2UgdGhpcyBleGFtcGxlIHJldHVybmVkIGEgTWFjaGluZVN0b3JlLCB5b3UgY2FuIGFjY2VzcyB0aGUgbWFjaGluZSdzIG1ldGhvZHMgZGlyZWN0bHkgb24gdGhlIGluc3RhbmNlJ3Mgc3RvcmUgLSBlLmcuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluc3RhbmNlLnN0b3JlLnNlbmQoJ3RpbWVyJylgfTwvaW5saW5lQ29kZT57YC4gVGhpcyBoYXMgZnVsbCBUeXBlU2NyaXB0IHN1cHBvcnQgdG9vIWB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8cD57YEZvciBUeXBlU2NyaXB0IHVzZXJzLCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Auc2VuZCgpYH08L2lubGluZUNvZGU+e2Agb25seSBhY2NlcHRzIHN0cmluZ3MgdGhhdCB3ZXJlIHNwZWNpZmllZCBhcyBldmVudCBuYW1lcyBkdXJpbmcgbWFjaGluZSBjcmVhdGlvbi4gSW4gdGhpcyBleGFtcGxlLCBwYXNzaW5nIGFueXRoaW5nIGJ1dCB0aGUgc3RyaW5nIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YCd0aW1lcidgfTwvaW5saW5lQ29kZT57YCBnaXZlcyBhIFRTIGVycm9yOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2BzZW5kKCd0aW1lJykgLy8gQXJndW1lbnQgb2YgdHlwZSAnXCJ0aW1lXCInIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhcmFtZXRlciBvZiB0eXBlICdcInRpbWVyXCInXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRoZSBtYWNoaW5lIHdpbGwgb25seSB0cmFuc2l0aW9uIGlmIHRoZSBjdXJyZW50IHN0YXRlIGhhcyBhIHRyYW5zaXRpb24gc3BlY2lmaWVkIGZvciB0aGUgcGFzc2VkIGV2ZW50LmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCBzdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShzdGF0ZSA9PiBbXG4gIHN0YXRlKCdpZGxlJykub24oJ21vdmUnLCAnYW5pbWF0aW5nJylcbiAgc3RhdGUoJ2FuaW1hdGluZycpLm9uKCdmaW5pc2gnLCAnaWRsZScpXG5dKVxuXG5zdG9yZS5nZXRWYWx1ZSgpIC8vICdpZGxlJ1xuc3RvcmUuc2VuZCgnZmluaXNoJykgLy8gZG9lcyBub3RoaW5nXG5zdG9yZS5nZXRWYWx1ZSgpIC8vICdpZGxlJ1xuc3RvcmUuc2VuZCgnbW92ZScpXG5zdG9yZS5nZXRWYWx1ZSgpIC8vICdhbmltYXRpbmcnXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJpc1wiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2AuaXMoKWB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BSZXR1cm5zIHRydWUgaWYgdGhlIG1hY2hpbmUncyBjdXJyZW50IHN0YXRlIGlzIHRoZSBwYXNzZWQgc3RhdGUgc3RyaW5nLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIixcbiAgICAgICAgXCJtZXRhc3RyaW5nXCI6IFwibGl2ZSBlY29zeXN0ZW1JZD1pcy1leGFtcGxlIHJlc3VsdFZhcj1vdXRwdXRcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJpcy1leGFtcGxlXCIsXG4gICAgICAgIFwicmVzdWx0VmFyXCI6IFwib3V0cHV0XCJcbiAgICAgIH19PntgY29uc3QgdHJhZmZpY0xpZ2h0QXRvbSA9IGF0b20oJ3RyYWZmaWNMaWdodCcsICgpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoc3RhdGUgPT4gW1xuICAgIHN0YXRlKCdncmVlbicpLm9uKCd0aW1lcicsICd5ZWxsb3cnKSxcbiAgICBzdGF0ZSgneWVsbG93Jykub24oJ3RpbWVyJywgJ3JlZCcpLFxuICAgIHN0YXRlKCdyZWQnKS5vbigndGltZXInLCAnZ3JlZW4nKSxcbiAgXSlcblxuICByZXR1cm4gc3RvcmVcbn0pXG5cbmNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7IGlkOiAnaXMtZXhhbXBsZScgfSlcblxuLy8gYm90aCAuaXMgYW5kIC5zZW5kIGFyZSBib3VuZCBmdW5jdGlvbiBwcm9wZXJ0aWVzIChkZXN0cnVjdHVyaW5nIGlzIGZpbmUpOlxuY29uc3QgeyBpcywgc2VuZCB9ID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKHRyYWZmaWNMaWdodEF0b20pLnN0b3JlXG5cbnNlbmQoJ3RpbWVyJylcbnNlbmQoJ3RpbWVyJylcbmNvbnN0IG91dHB1dCA9IGlzKCdyZWQnKVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BGb3IgVFMgdXNlcnMsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5pcygpYH08L2lubGluZUNvZGU+e2Agb25seSBhY2NlcHRzIHN0cmluZ3MgdGhhdCB3ZXJlIHNwZWNpZmllZCBhcyBzdGF0ZSBuYW1lcyBkdXJpbmcgbWFjaGluZSBjcmVhdGlvbi4gSW4gdGhpcyBleGFtcGxlLCBwYXNzaW5nIGFueXRoaW5nIGJ1dCB0aGUgc3RyaW5ncyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2AnZ3JlZW4nYH08L2lubGluZUNvZGU+e2AsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YCd5ZWxsb3cnYH08L2lubGluZUNvZGU+e2AsIG9yIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YCdyZWQnYH08L2lubGluZUNvZGU+e2AgZ2l2ZXMgYSBUUyBlcnJvcjpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgaXMoJ3llbGxvJykgLy8gQXJndW1lbnQgb2YgdHlwZSAnXCJ5ZWxsb1wiJyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbWV0ZXIgb2YgdHlwZSAnXCJncmVlblwiIHwgXCJ5ZWxsb3dcIiB8IFwicmVkXCInXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJnZXR2YWx1ZVwiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2AuZ2V0VmFsdWUoKWB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BSZXR1cm5zIHRoZSBtYWNoaW5lJ3MgY3VycmVudCBzdHJpbmcgdmFsdWU6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YHN0b3JlLmdldFZhbHVlKCkgLy8gZ3JlZW5cbnN0b3JlLnNlbmQoJ3RpbWVyJylcbnN0b3JlLmdldFZhbHVlKCkgLy8geWVsbG93XG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJzdGF0ZS1zaGFwZVwiXG4gICAgfX0+e2BTdGF0ZSBTaGFwZWB9PC9oMz5cbiAgICA8cD57YFRoZSBNYWNoaW5lU3RvcmUncyBzdGF0ZSBpcyBhbiBvYmplY3QgbGlrZSB0aGUgZm9sbG93aW5nOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2BzdG9yZS5nZXRTdGF0ZSgpXG4vLyB7XG4vLyAgIGNvbnRleHQ6IHVuZGVmaW5lZCxcbi8vICAgdmFsdWU6ICdncmVlbicsXG4vLyB9XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLnZhbHVlYH08L2lubGluZUNvZGU+e2AgaXMgdGhlIGN1cnJlbnQgc3RyaW5nIHN0YXRlIG9mIHRoZSBtYWNoaW5lLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2AvLyBUaGVzZSB0d28gbGluZXMgYXJlIGVxdWl2YWxlbnQ6XG5tYWNoaW5lU3RvcmUuZ2V0U3RhdGUoKS52YWx1ZSA9PT0gJ2dyZWVuJ1xubWFjaGluZVN0b3JlLmlzKCdncmVlbicpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFdlJ2xsIGxvb2sgYXQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLmNvbnRleHRgfTwvaW5saW5lQ29kZT57YCBuZXh0OmB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcImNvbnRleHRcIlxuICAgIH19PntgQ29udGV4dGB9PC9oMj5cbiAgICA8cD57YE1hY2hpbmVTdG9yZXMgY2FuIGhvbGQgZXh0cmEgc3RhdGUsIGJlc2lkZXMgdGhlIHZhbHVlIHN0cmluZy4gVGhpcyBleHRyYSBzdGF0ZSBpcyBjYWxsZWQgY29udGV4dC4gQ29udGV4dCBtdXN0IGJlIGFuIG9iamVjdCAob3IgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgdW5kZWZpbmVkYH08L2lubGluZUNvZGU+e2ApLmB9PC9wPlxuICAgIDxwPntgWW91IGNhbiBwYXNzIHRoZSBpbml0aWFsIGNvbnRleHQgYXMgdGhlIDJuZCBwYXJhbSB0byBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmplY3RNYWNoaW5lU3RvcmUoKWB9PC9pbmxpbmVDb2RlPntgOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCBzdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShzdGF0ZXNGYWN0b3J5LCBpbml0aWFsQ29udGV4dClcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcImdldGNvbnRleHRcIlxuICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJoM1wiPntgLmdldENvbnRleHQoKWB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BSZXR1cm5zIHRoZSBjdXJyZW50IGNvbnRleHQgdmFsdWUuIEFuIGFsaWFzIGZvciBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BtYWNoaW5lU3RvcmUuZ2V0U3RhdGUoKS5jb250ZXh0YH08L2lubGluZUNvZGU+e2A6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YC8vIFRoZXNlIHR3byBsaW5lcyBhcmUgZXF1aXZhbGVudDpcbm1hY2hpbmVTdG9yZS5nZXRTdGF0ZSgpLmNvbnRleHRcbm1hY2hpbmVTdG9yZS5nZXRDb250ZXh0KClcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcInNldGNvbnRleHRcIlxuICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJoM1wiPntgLnNldENvbnRleHQoKWB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BTZXRzIHRoZSBzdG9yZSdzIGNvbnRleHQgdmFsdWUuIEFjY2VwdHMgZnVuY3Rpb24gb3ZlcmxvYWRzLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2AvLyBUaGVzZSBhcmUgZXF1aXZhbGVudDpcbm1hY2hpbmVTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiAoeyAuLi5zdGF0ZSwgY29udGV4dDogbmV3Q29udGV4dCB9KSlcbm1hY2hpbmVTdG9yZS5zZXRDb250ZXh0KG5ld0NvbnRleHQpXG5tYWNoaW5lU3RvcmUuc2V0Q29udGV4dChjb250ZXh0ID0+IG5ld0NvbnRleHQpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJzZXRjb250ZXh0ZGVlcFwiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2Auc2V0Q29udGV4dERlZXAoKWB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BEZWVwbHkgbWVyZ2VzIHRoZSBwYXNzZWQgY29udGV4dCB2YWx1ZSBpbnRvIHRoZSBleGlzdGluZyBjb250ZXh0LiBBY2NlcHRzIGZ1bmN0aW9uIG92ZXJsb2Fkcy5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgLy8gVGhlc2UgYXJlIGVxdWl2YWxlbnQ6XG5tYWNoaW5lU3RvcmUuc2V0U3RhdGVEZWVwKHsgY29udGV4dDogbmV3Q29udGV4dCB9KVxubWFjaGluZVN0b3JlLnNldENvbnRleHREZWVwKG5ld0NvbnRleHQpXG5tYWNoaW5lU3RvcmUuc2V0Q29udGV4dERlZXAoY29udGV4dCA9PiBuZXdDb250ZXh0KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidHlwZVwiOiBcIndhcm5pbmdcIlxuICAgIH19PjxwIHBhcmVudE5hbWU9XCJhZG1vbml0aW9uXCI+e2BKdXN0IGxpa2UgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLnNldFN0YXRlRGVlcCgpYH08L2lubGluZUNvZGU+e2AsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5zZXRDb250ZXh0RGVlcCgpYH08L2lubGluZUNvZGU+e2AgaXMgb25seSBmb3IgdXBkYXRpbmcgc3RhdGUgLSBpdCBjYW5ub3QgYmUgdXNlZCB0byBkZWxldGUga2V5cy4gVXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5zZXRDb250ZXh0YH08L2lubGluZUNvZGU+e2AgZm9yIHRoYXQuYH08L3A+PC9hZG1vbml0aW9uPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcImV4YW1wbGVcIlxuICAgIH19PntgRXhhbXBsZWB9PC9oMz5cbiAgICA8cD57YEhlcmUncyBhbiBleGFtcGxlIHVzaW5nIGNvbnRleHQgdG8ga2VlcCB0cmFjayBvZiBob3cgbWFueSB0aW1lcyBhIHRoZW1lIHRvZ2dsZXIgdG9nZ2xlczpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXN0YXRlLW1hY2hpbmVzL2NvbnRleHQgcmVzdWx0VmFyPVRoZW1lXCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwic3RhdGUtbWFjaGluZXMvY29udGV4dFwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIlRoZW1lXCJcbiAgICAgIH19PntgY29uc3QgdGhlbWVBdG9tID0gYXRvbSgndGhlbWUnLCAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKFxuICAgIHN0YXRlID0+IFtcbiAgICAgIHN0YXRlKCdsaWdodCcpLm9uKCd0b2dnbGUnLCAnZGFyaycpLFxuICAgICAgc3RhdGUoJ2RhcmsnKS5vbigndG9nZ2xlJywgJ2xpZ2h0JyksXG4gICAgXSxcbiAgICB7IGNvdW50OiAwIH0sXG4gICAge1xuICAgICAgb25UcmFuc2l0aW9uOiBtYWNoaW5lID0+XG4gICAgICAgIG1hY2hpbmUuc2V0Q29udGV4dChjb250ZXh0ID0+ICh7IGNvdW50OiBjb250ZXh0LmNvdW50ICsgMSB9KSksXG4gICAgfVxuICApXG5cbiAgLy8geW91IGNhbiBhbGlhcyBzdG9yZSBtZXRob2RzIG9uIGV4cG9ydHMgZm9yIHVzZSBpbiBcXGB1c2VBdG9tU3RhdGVcXGA6XG4gIHJldHVybiBhcGkoc3RvcmUpLnNldEV4cG9ydHMoeyBzZW5kOiBzdG9yZS5zZW5kIH0pXG59KVxuXG5mdW5jdGlvbiBUaGVtZSgpIHtcbiAgY29uc3QgW3sgY29udGV4dCwgdmFsdWUgfSwgeyBzZW5kIH1dID0gdXNlQXRvbVN0YXRlKHRoZW1lQXRvbSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgc3R5bGU9e3ZhbHVlID09PSAnZGFyaycgPyB7IGJhY2tncm91bmQ6ICcjNDQ0JywgY29sb3I6ICcjZmZmJyB9IDoge319PlxuICAgICAgPGxhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBjaGVja2VkPXt2YWx1ZSA9PT0gJ2RhcmsnfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiBzZW5kKCd0b2dnbGUnKX1cbiAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAvPlxuICAgICAgICA8c3Bhbj57dmFsdWV9IG1vZGU8L3NwYW4+XG4gICAgICA8L2xhYmVsPlxuICAgICAgPGRpdj5Ub2dnbGUgQ291bnQ6IHtjb250ZXh0LmNvdW50fTwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRoaXMgZXhhbXBsZSBhbHNvIG1hZGUgdXNlIG9mIGFuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YG9uVHJhbnNpdGlvbmB9PC9pbmxpbmVDb2RlPntgIGZ1bmN0aW9uLiBUaGlzIGlzIGNhbGxlZCBhIGxpc3RlbmVyLmB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcImxpc3RlbmVyc1wiXG4gICAgfX0+e2BMaXN0ZW5lcnNgfTwvaDI+XG4gICAgPHA+e2BMaXN0ZW5lcnMgY2FuIGJlIHVzZWQgdG8gcnVuIHNpZGUgZWZmZWN0cyB3aGVuIHRoZSBzdGF0ZSBtYWNoaW5lIHRyYW5zaXRpb25zIHRvIGEgbmV3IHN0YXRlLiBUaGVyZSBhcmUgMyBraW5kczogYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgb25FbnRlcmB9PC9pbmxpbmVDb2RlPntgLCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BvbkxlYXZlYH08L2lubGluZUNvZGU+e2AsIGFuZCB0aGUgdW5pdmVyc2FsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YG9uVHJhbnNpdGlvbmB9PC9pbmxpbmVDb2RlPntgLmB9PC9wPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm9uZW50ZXJcIlxuICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJoM1wiPntgb25FbnRlcmB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BUaGlzIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHRvIGluZGl2aWR1YWwgc3RhdGVzIHZpYSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BzdGF0ZS5vbkVudGVyKClgfTwvaW5saW5lQ29kZT57YC4gSGVyZSdzIGFuIGV4YW1wbGUgdXNpbmcgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIHRvIHNlbmQgYSByZXF1ZXN0IHdoZW4gdGhlIG1hY2hpbmUgZW50ZXJzIHRoZSAnZmV0Y2hpbmcnIHN0YXRlOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCByZXF1ZXN0U3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoXG4gIHN0YXRlID0+IFtcbiAgICBzdGF0ZSgnaWRsZScpLm9uKCdmZXRjaCcsICdmZXRjaGluZycpLFxuICAgIHN0YXRlKCdmZXRjaGluZycpXG4gICAgICAub24oJ3N1Y2NlZWQnLCAnc3VjY2VzcycpXG4gICAgICAub24oJ2ZhaWwnLCAnZmFpbHVyZScpXG4gICAgICAub25FbnRlcihhc3luYyBtYWNoaW5lID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2goJy90b2RvcycpLnRoZW4oZGF0YSA9PiBkYXRhLmpzb24oKSlcbiAgICAgICAgICBtYWNoaW5lLnNldENvbnRleHREZWVwKHsgZGF0YSB9KVxuICAgICAgICAgIG1hY2hpbmUuc2VuZCgnc3VjY2VlZCcpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbWFjaGluZS5zZXRDb250ZXh0RGVlcCh7IGVycm9yIH0pXG4gICAgICAgICAgbWFjaGluZS5zZW5kKCdmYWlsJylcbiAgICAgICAgfVxuICAgICAgfSksXG4gIF0sXG4gIHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfVxuKVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidHlwZVwiOiBcIm5vdGVcIlxuICAgIH19PjxwIHBhcmVudE5hbWU9XCJhZG1vbml0aW9uXCI+e2BGb3IgVFMgdXNlcnM6IGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5vbkVudGVyKClgfTwvaW5saW5lQ29kZT57YCBoYXMgbGltaXRlZCB0eXBlIHN1cHBvcnQsIHNpbmNlIHRoZSBtYWNoaW5lJ3MgZnVsbCB0eXBlIGhhc24ndCBiZWVuIGluZmVycmVkIHlldC4gVGhlIGFib3ZlIGV4YW1wbGUgd2lsbCB3b3JrIGJlY2F1c2UgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIGlzIHBsYWNlZCBhZnRlciB0aGUgdHdvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5vbigpYH08L2lubGluZUNvZGU+e2AgY2FsbHMgZm9yIHRoZSAnZmV0Y2hpbmcnIHN0YXRlLiBXaGVuIHlvdSBuZWVkIGFjY2VzcyB0byBiZXR0ZXIgdHlwZXMsIHVzZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BvblRyYW5zaXRpb25gfTwvaW5saW5lQ29kZT57YCBpbnN0ZWFkLmB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJvbmxlYXZlXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDNcIj57YG9uTGVhdmVgfTwvaW5saW5lQ29kZT48L2gzPlxuICAgIDxwPntgVGhpcyBsaXN0ZW5lciBpcyBhdHRhY2hlZCB0byBpbmRpdmlkdWFsIHN0YXRlcyB2aWEgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3RhdGUub25MZWF2ZSgpYH08L2lubGluZUNvZGU+e2AuIEhlcmUncyBhbiBleGFtcGxlIHVzaW5nIGJvdGggYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIGFuZCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Aub25MZWF2ZSgpYH08L2lubGluZUNvZGU+e2AgdG8gc2V0IGFuZCBjbGVhciBhIHRpbWVvdXQ6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHRpbWVvdXRTdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShcbiAgc3RhdGUgPT4gW1xuICAgIHN0YXRlKCdpZGxlJykub24oJ3N0YXJ0VGltZXInLCAnd2FpdGluZycpLFxuICAgIHN0YXRlKCd3YWl0aW5nJylcbiAgICAgIC5vbignY2FuY2VsJywgJ2lkbGUnKVxuICAgICAgLm9uKCd0aW1lb3V0JywgJ2lkbGUnKVxuICAgICAgLm9uRW50ZXIobWFjaGluZSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIG1hY2hpbmUuc2V0Q29udGV4dCh7IGhhbmRsZTogbnVsbCB9KVxuICAgICAgICAgIG1hY2hpbmUuc2VuZCgndGltZW91dCcpXG4gICAgICAgIH0sIDEwMDApXG5cbiAgICAgICAgbWFjaGluZS5zZXRDb250ZXh0KHsgaGFuZGxlIH0pXG4gICAgICB9KVxuICAgICAgLm9uTGVhdmUoYXN5bmMgbWFjaGluZSA9PiB7XG4gICAgICAgIGNvbnN0IHsgaGFuZGxlIH0gPSBtYWNoaW5lLmdldENvbnRleHQoKVxuXG4gICAgICAgIGlmICghaGFuZGxlKSByZXR1cm5cblxuICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKVxuICAgICAgICBtYWNoaW5lLnNldENvbnRleHQoeyBoYW5kbGU6IG51bGwgfSlcbiAgICAgIH0pLFxuICBdLFxuICB7IGhhbmRsZTogbnVsbCB9XG4pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0eXBlXCI6IFwibm90ZVwiXG4gICAgfX0+PHAgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj57YEZvciBUUyB1c2VyczogTGlrZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Aub25FbnRlcigpYH08L2lubGluZUNvZGU+e2AsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5vbkxlYXZlKClgfTwvaW5saW5lQ29kZT57YCBoYXMgbGltaXRlZCB0eXBlIHN1cHBvcnQsIHNpbmNlIHRoZSBtYWNoaW5lJ3MgZnVsbCB0eXBlIGhhc24ndCBiZWVuIGluZmVycmVkIHlldC4gV2hlbiB5b3UgbmVlZCBhY2Nlc3MgdG8gYmV0dGVyIHR5cGVzLCB1c2UgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgb25UcmFuc2l0aW9uYH08L2lubGluZUNvZGU+e2AgaW5zdGVhZC5gfTwvcD48L2FkbW9uaXRpb24+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwib250cmFuc2l0aW9uXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDNcIj57YG9uVHJhbnNpdGlvbmB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BUaGlzIGlzIHRoZSBjYXRjaC1hbGwgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGNhbGxlZCBldmVyeSB0aW1lIHRoZSBzdGF0ZSBtYWNoaW5lIHRyYW5zaXRpb25zLiBUaGlzIGxpc3RlbmVyIGhhcyBmdWxsIHR5cGUgc3VwcG9ydCwgc28gdXNlIHRoaXMgd2hlbiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BvbkVudGVyYH08L2lubGluZUNvZGU+e2AgYW5kIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YG9uTGVhdmVgfTwvaW5saW5lQ29kZT57YCB0eXBlcyBhcmUgaW5zdWZmaWNpZW50LmB9PC9wPlxuICAgIDxwPntgVGhlIDNyZCBwYXJhbWV0ZXIgdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5qZWN0TWFjaGluZVN0b3JlKClgfTwvaW5saW5lQ29kZT57YCBpcyBhIGNvbmZpZyBvYmplY3Q6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKHN0YXRlc0ZhY3RvcnksIGluaXRpYWxDb250ZXh0LCBjb25maWcpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFBhc3MgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgb25UcmFuc2l0aW9uYH08L2lubGluZUNvZGU+e2AgYXMgcGFydCBvZiB0aGlzIGNvbmZpZ2B9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCB0b2dnbGVNYWNoaW5lID0gaW5qZWN0TWFjaGluZVN0b3JlKFxuICBzdGF0ZSA9PiBbc3RhdGUoJ29uJykub24oJ3RvZ2dsZScsICdvZmYnKSwgc3RhdGUoJ29mZicpLm9uKCd0b2dnbGUnLCAnb24nKV0sXG4gIHsgb25UcmFuc2l0aW9uIH1cbilcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcImNvbnRyaXZlZC1leGFtcGxlXCJcbiAgICB9fT57YENvbnRyaXZlZCBFeGFtcGxlYH08L2gyPlxuICAgIDxwPntgVGhlIG9ibGlnYXRvcnkgZ2FyYWdlIGRvb3Igc3RhdGUgbWFjaGluZSBleGFtcGxlOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgZWNvc3lzdGVtSWQ9c3RhdGUtbWFjaGluZXMvZG9vciByZXN1bHRWYXI9TWFjaGluZVwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcInN0YXRlLW1hY2hpbmVzL2Rvb3JcIixcbiAgICAgICAgXCJyZXN1bHRWYXJcIjogXCJNYWNoaW5lXCJcbiAgICAgIH19PntgY29uc3QgZG9vckF0b20gPSBhdG9tKCdkb29yJywgKCkgPT4ge1xuICBjb25zdCBzdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShcbiAgICBzdGF0ZSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWVvdXQgPSBtYWNoaW5lID0+IHtcbiAgICAgICAgY29uc3QgeyBoYW5kbGUgfSA9IG1hY2hpbmUuZ2V0Q29udGV4dCgpXG5cbiAgICAgICAgaWYgKGhhbmRsZSkgY2xlYXJUaW1lb3V0KGhhbmRsZSlcblxuICAgICAgICBjb25zdCBuZXdIYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBtYWNoaW5lLnNldENvbnRleHQoeyBoYW5kbGU6IG51bGwgfSlcbiAgICAgICAgICBtYWNoaW5lLnNlbmQoJ3RpbWVvdXQnKVxuICAgICAgICB9LCAxMDAwKVxuXG4gICAgICAgIG1hY2hpbmUuc2V0Q29udGV4dCh7IGhhbmRsZTogbmV3SGFuZGxlIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIHN0YXRlKCdvcGVuJykub24oJ2NsaWNrJywgJ2Nsb3NpbmcnKSxcbiAgICAgICAgc3RhdGUoJ29wZW5pbmcnKVxuICAgICAgICAgIC5vbignY2xpY2snLCAnY2xvc2luZycpXG4gICAgICAgICAgLm9uKCd0aW1lb3V0JywgJ29wZW4nKVxuICAgICAgICAgIC5vbkVudGVyKHN0YXJ0VGltZW91dCksXG4gICAgICAgIHN0YXRlKCdjbG9zZWQnKS5vbignY2xpY2snLCAnb3BlbmluZycpLFxuICAgICAgICBzdGF0ZSgnY2xvc2luZycpXG4gICAgICAgICAgLm9uKCdjbGljaycsICdvcGVuaW5nJylcbiAgICAgICAgICAub24oJ3RpbWVvdXQnLCAnY2xvc2VkJylcbiAgICAgICAgICAub25FbnRlcihzdGFydFRpbWVvdXQpLFxuICAgICAgXVxuICAgIH0sXG4gICAgeyBoYW5kbGU6IG51bGwgfVxuICApXG5cbiAgcmV0dXJuIHN0b3JlXG59KVxuXG5mdW5jdGlvbiBNYWNoaW5lKCkge1xuICBjb25zdCB7IHZhbHVlIH0gPSB1c2VBdG9tVmFsdWUoZG9vckF0b20pXG4gIGNvbnN0IHsgc2VuZCB9ID0gdXNlQXRvbUluc3RhbmNlKGRvb3JBdG9tKS5zdG9yZVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXY+U3RhdGU6IHt2YWx1ZX08L2Rpdj5cbiAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2VuZCgnY2xpY2snKX0+RmlyZSBDbGljazwvYnV0dG9uPlxuICAgIDwvPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJndWFyZHNcIlxuICAgIH19PntgR3VhcmRzYH08L2gyPlxuICAgIDxwPntgR3VhcmRzIGFyZSBmdW5jdGlvbnMgdGhhdCBjb25kaXRpb25hbGx5IHByZXZlbnQgdGhlIG1hY2hpbmUgZnJvbSBwZXJmb3JtaW5nIGEgdmFsaWQgdHJhbnNpdGlvbi4gR3VhcmRzIGNhbiBiZSBzZXQgcGVyLXRyYW5zaXRpb24gdmlhIHRoZSAzcmQgcGFyYW0gdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3RhdGUub24oKWB9PC9pbmxpbmVDb2RlPntgOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCBtYXliZU1vdmVTdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShcbiAgc3RhdGUgPT4gW3N0YXRlKCdpZGxlJykub24oJ21vdmUnLCAnbW92aW5nJywgY29udGV4dCA9PiAhY29udGV4dC5pc0Zyb3plbildLFxuICB7IGlzRnJvemVuOiBmYWxzZSB9XG4pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRoZXNlIGd1YXJkcyByZWNlaXZlIHRoZSBtYWNoaW5lJ3MgY29udGV4dCBhcyB0aGVpciBvbmx5IHBhcmFtZXRlci4gUmV0dXJuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHRydWVgfTwvaW5saW5lQ29kZT57YCB0byBhbGxvdyB0aGUgdHJhbnNpdGlvbiBvciBhbnkgZmFsc3kgdmFsdWUgdG8gcHJldmVudCBpdC4gVGhlIGFib3ZlIG1hY2hpbmUgd2lsbCBvbmx5IHRyYW5zaXRpb24gZnJvbSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpZGxlYH08L2lubGluZUNvZGU+e2AgdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgbW92aW5nYH08L2lubGluZUNvZGU+e2AgaWYgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgY29udGV4dC5pc0Zyb3plbmB9PC9pbmxpbmVDb2RlPntgIGlzIGZhbHN5LmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgZWNvc3lzdGVtSWQ9c3RhdGUtbWFjaGluZXMvZ3VhcmRzIHJlc3VsdFZhcj1Db250cm9sc1wiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcInN0YXRlLW1hY2hpbmVzL2d1YXJkc1wiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIkNvbnRyb2xzXCJcbiAgICAgIH19PntgY29uc3QgbWF5YmVNb3ZpbmdBdG9tID0gYXRvbSgnbWF5YmVNb3ZpbmcnLCAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKFxuICAgIHN0YXRlID0+IFtcbiAgICAgIC8vIHRoZSBndWFyZCEgUHJldmVudCB0aGlzIHRyYW5zaXRpb24gaWYgd2UncmUgZnJvemVuOlxuICAgICAgc3RhdGUoJ2lkbGUnKS5vbignbW92ZScsICdtb3ZpbmcnLCBjb250ZXh0ID0+ICFjb250ZXh0LmlzRnJvemVuKSxcbiAgICAgIHN0YXRlKCdtb3ZpbmcnKVxuICAgICAgICAub24oJ3N0b3AnLCAnaWRsZScpXG4gICAgICAgIC5vbkVudGVyKG1hY2hpbmUgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gbWFjaGluZS5zZW5kKCdzdG9wJyksIDEwMDApXG4gICAgICAgIH0pLFxuICAgIF0sXG4gICAgeyBpc0Zyb3plbjogZmFsc2UgfVxuICApXG5cbiAgcmV0dXJuIGFwaShzdG9yZSkuc2V0RXhwb3J0cyh7XG4gICAgdG9nZ2xlRnJlZXplOiAoKSA9PlxuICAgICAgc3RvcmUuc2V0Q29udGV4dChjb250ZXh0ID0+ICh7IGlzRnJvemVuOiAhY29udGV4dC5pc0Zyb3plbiB9KSksXG4gICAgaXM6IHN0b3JlLmlzLFxuICAgIG1vdmU6ICgpID0+IHN0b3JlLnNlbmQoJ21vdmUnKSxcbiAgfSlcbn0pXG5cbmZ1bmN0aW9uIENvbnRyb2xzKCkge1xuICBjb25zdCBbeyBjb250ZXh0IH0sIHsgdG9nZ2xlRnJlZXplLCBpcywgbW92ZSB9XSA9IHVzZUF0b21TdGF0ZShcbiAgICBtYXliZU1vdmluZ0F0b21cbiAgKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXY+LSB7Y29udGV4dC5pc0Zyb3plbiA/ICdGcm96ZW4nIDogJ0FsbCBTeXN0ZW1zIEdvJ30gLTwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIGJhY2tncm91bmQ6ICdjeWFuJyxcbiAgICAgICAgICBoZWlnaHQ6IDUwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAxcycsXG4gICAgICAgICAgd2lkdGg6IDUwLFxuICAgICAgICAgIC4uLihpcygnbW92aW5nJykgJiYgeyBsZWZ0OiA1MCB9KSxcbiAgICAgICAgfX1cbiAgICAgIC8+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZUZyZWV6ZX0+XG4gICAgICAgIHtjb250ZXh0LmlzRnJvemVuID8gJ1VuZnJlZXplJyA6ICdGcmVlemUnfVxuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e21vdmV9PlxuICAgICAgICBNb3ZlIHtjb250ZXh0LmlzRnJvemVuID8gJyhEb2VzIE5vdGhpbmcpJyA6ICcnfVxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIClcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgWW91IGNhbiBhbHNvIGNvbmZpZ3VyZSB0aGUgTWFjaGluZVN0b3JlIHdpdGggYSB1bml2ZXJzYWwgZ3VhcmQgdmlhIHRoZSBjb25maWcgb2JqZWN0OmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2AuLi5cbmNvbnN0IGd1YXJkID0gKHN0YXRlLCBuZXh0VmFsdWUpID0+IHtcbiAgLy8gdXNlIHRoZSBjdXJyZW50IHN0YXRlIG9iamVjdCBhbmQvb3IgbmV4dFZhbHVlIHN0cmluZyB0byBkZXRlcm1pbmUgaWYgdGhlXG4gIC8vIHRyYW5zaXRpb24gc2hvdWxkIGJlIGFsbG93ZWQgKHJldHVybiB0cnVlIGlmIHllcylcbn1cbmNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKHN0YXRlc0ZhY3RvcnksIGluaXRpYWxDb250ZXh0LCB7IGd1YXJkIH0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRoaXMgZ3VhcmQgcmVjZWl2ZXMgdGhlIGZ1bGwgY3VycmVudCBzdGF0ZSAoYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgeyBjb250ZXh0LCB2YWx1ZSB9YH08L2lubGluZUNvZGU+e2ApIGFuZCB0aGUgbmFtZSBvZiB0aGUgcGVuZGluZyB0cmFuc2l0aW9uIHN0YXRlLiBIZXJlJ3MgYW4gZXhhbXBsZSB1c2luZyBhIHVuaXZlcnNhbCBndWFyZCB0byBwYXVzZSB0aGUgbWFjaGluZSBhZnRlciBhbGxvd2luZyBpdCB0byBjeWNsZSBiYWNrIHRvIHRoZSBzdGFydDpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXN0YXRlLW1hY2hpbmVzL2d1YXJkIHJlc3VsdFZhcj1DeWNsZXJcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJzdGF0ZS1tYWNoaW5lcy9ndWFyZFwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIkN5Y2xlclwiXG4gICAgICB9fT57YGNvbnN0IGN5Y2xpbmdBdG9tID0gYXRvbSgnY3ljbGluZycsICgpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoXG4gICAgc3RhdGUgPT4gW1xuICAgICAgc3RhdGUoJ2EnKS5vbignY3ljbGUnLCAnYicpLFxuICAgICAgc3RhdGUoJ2InKS5vbignY3ljbGUnLCAnYycpLFxuICAgICAgc3RhdGUoJ2MnKS5vbignY3ljbGUnLCAnYScpLFxuICAgIF0sXG4gICAgeyBpc1BhdXNlZDogZmFsc2UgfSxcbiAgICB7XG4gICAgICBndWFyZDogKHN0YXRlLCBuZXh0VmFsdWUpID0+ICFzdGF0ZS5jb250ZXh0LmlzUGF1c2VkIHx8IG5leHRWYWx1ZSAhPT0gJ2InLFxuICAgIH1cbiAgKVxuXG4gIGluamVjdEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlID0gc2V0SW50ZXJ2YWwoKCkgPT4gc3RvcmUuc2VuZCgnY3ljbGUnKSwgMTAwMClcblxuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGhhbmRsZSlcbiAgfSwgW10pXG5cbiAgcmV0dXJuIGFwaShzdG9yZSkuc2V0RXhwb3J0cyh7XG4gICAgdG9nZ2xlUGF1c2U6ICgpID0+XG4gICAgICBzdG9yZS5zZXRDb250ZXh0KGNvbnRleHQgPT4gKHsgaXNQYXVzZWQ6ICFjb250ZXh0LmlzUGF1c2VkIH0pKSxcbiAgfSlcbn0pXG5cbmZ1bmN0aW9uIEN5Y2xlcigpIHtcbiAgY29uc3QgW3sgY29udGV4dCwgdmFsdWUgfSwgeyB0b2dnbGVQYXVzZSB9XSA9IHVzZUF0b21TdGF0ZShjeWNsaW5nQXRvbSlcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICB7dmFsdWV9eycgJ31cbiAgICAgICAge2NvbnRleHQuaXNQYXVzZWRcbiAgICAgICAgICA/IHZhbHVlID09PSAnYSdcbiAgICAgICAgICAgID8gJyhwYXVzZWQpJ1xuICAgICAgICAgICAgOiAnKGZpbmlzaGluZyBjeWNsZS4uLiknXG4gICAgICAgICAgOiBudWxsfVxuICAgICAgPC9kaXY+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZVBhdXNlfT5cbiAgICAgICAge2NvbnRleHQuaXNQYXVzZWQgPyAnUmVzdW1lJyA6ICdQYXVzZSd9XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwicmVjYXBcIlxuICAgIH19PntgUmVjYXBgfTwvaDI+XG4gICAgPHVsPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgVXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2BpbmplY3RNYWNoaW5lU3RvcmUoKWB9PC9pbmxpbmVDb2RlPntgIHRvIGNyZWF0ZSBhIE1hY2hpbmVTdG9yZS5gfVxuICAgICAgICA8dWwgcGFyZW50TmFtZT1cImxpXCI+XG4gICAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgc3RhdGUub24oKWB9PC9pbmxpbmVDb2RlPntgIGFkZHMgdHJhbnNpdGlvbnMgYmV0d2VlbiBzdGF0ZXMuYH08L2xpPlxuICAgICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHN0YXRlLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIGFuZCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgc3RhdGUub25MZWF2ZSgpYH08L2lubGluZUNvZGU+e2AgYWRkIGxpc3RlbmVycyB0byBpbmRpdmlkdWFsIHN0YXRlcy5gfTwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgQ29udGV4dCBpcyB0aGUgTWFjaGluZVN0b3JlJ3MgXCJleHRyYSBzdGF0ZVwiLiBJdCBtdXN0IGJlIGFuIG9iamVjdCAob3IgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHVuZGVmaW5lZGB9PC9pbmxpbmVDb2RlPntgKS5gfVxuICAgICAgICA8dWwgcGFyZW50TmFtZT1cImxpXCI+XG4gICAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgU2V0IGluaXRpYWwgY29udGV4dCB3aXRoIHRoZSAybmQgcGFyYW0gdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YGluamVjdE1hY2hpbmVTdG9yZWB9PC9pbmxpbmVDb2RlPntgLmB9PC9saT5cbiAgICAgICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BHZXQgY29udGV4dCB3aXRoIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2BtYWNoaW5lU3RvcmUuZ2V0Q29udGV4dCgpYH08L2lubGluZUNvZGU+PC9saT5cbiAgICAgICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BTZXQgY29udGV4dCB3aXRoIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2BtYWNoaW5lU3RvcmUuc2V0Q29udGV4dCgpYH08L2lubGluZUNvZGU+e2Agb3IgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YG1hY2hpbmVTdG9yZS5zZXRDb250ZXh0RGVlcCgpYH08L2lubGluZUNvZGU+PC9saT5cbiAgICAgICAgPC91bD5cbiAgICAgIDwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BVc2UgZ3VhcmRzIHRvIHByZXZlbnQgdmFsaWQgdHJhbnNpdGlvbnMuYH08L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgQWRkIGEgdW5pdmVyc2FsIGd1YXJkIGFuZCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgb25UcmFuc2l0aW9uYH08L2lubGluZUNvZGU+e2AgbGlzdGVuZXIgdmlhIHRoZSAzcmQgcGFyYW0gdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YGluamVjdE1hY2hpbmVTdG9yZWB9PC9pbmxpbmVDb2RlPntgLmB9PC9saT5cbiAgICA8L3VsPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm5leHQtc3RlcHNcIlxuICAgIH19PntgTmV4dCBTdGVwc2B9PC9oMj5cbiAgICA8cD57YFRoYXQncyBhYm91dCBpdCBmb3IgdGhlIGtleSBmZWF0dXJlcyBvZiBaZWR1eC4gWW91J3JlIHJlYWR5IHRvIGp1bXAgaW4gYW5kIGdldCBidWlsZGluZyEgQ2hlY2sgb3V0IHRoZSBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwiLi4vYWR2YW5jZWQvY29tcGxleC1wYXJhbXNcIlxuICAgICAgfX0+e2BhZHZhbmNlZCBndWlkZXNgfTwvYT57YCBhbmQgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcIi4uL2FwaS9jbGFzc2VzL0F0b21cIlxuICAgICAgfX0+e2BBUEkgZG9jc2B9PC9hPntgIGFzIG5lZWRlZC4gSGFwcHkgY29kaW5nIWB9PC9wPlxuICAgIDwvTURYTGF5b3V0Pjtcbn1cbjtcbk1EWENvbnRlbnQuaXNNRFhDb21wb25lbnQgPSB0cnVlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwibWR4IiwiZnJvbnRNYXR0ZXIiLCJpZCIsInRpdGxlIiwiY29udGVudFRpdGxlIiwidW5kZWZpbmVkIiwibWV0YWRhdGEiLCJhc3NldHMiLCJ0b2MiLCJ2YWx1ZSIsImxldmVsIiwibGF5b3V0UHJvcHMiLCJNRFhMYXlvdXQiLCJNRFhDb250ZW50IiwiY29tcG9uZW50cyIsInByb3BzIiwiaXNNRFhDb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3975\n')}}]);