"use strict";(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[5571],{8093:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "assets": function() { return /* binding */ assets; },\n/* harmony export */   "contentTitle": function() { return /* binding */ contentTitle; },\n/* harmony export */   "default": function() { return /* binding */ MDXContent; },\n/* harmony export */   "frontMatter": function() { return /* binding */ frontMatter; },\n/* harmony export */   "metadata": function() { return /* binding */ metadata; },\n/* harmony export */   "toc": function() { return /* binding */ toc; }\n/* harmony export */ });\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7462);\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3366);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7294);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3905);\nvar _excluded=["components"];/* @jsxRuntime classic */ /* @jsx mdx */ /* @jsxFrag React.Fragment */var frontMatter={id:\'ssr\',title:\'SSR\'};var contentTitle=undefined;var metadata={"unversionedId":"advanced/ssr","id":"advanced/ssr","title":"SSR","description":"In the persistence guide, we learned how to get an ecosystem\'s state snapshot and use it to rehydrate the entire ecosystem. There is only a little more to learn to get a full-fledged SSR setup going.","source":"@site/docs/advanced/ssr.mdx","sourceDirName":"advanced","slug":"/advanced/ssr","permalink":"/zedux/docs/advanced/ssr","draft":false,"editUrl":"https://github.com/Omnistac/zedux/tree/master/docs/advanced/ssr.mdx","tags":[],"version":"current","frontMatter":{"id":"ssr","title":"SSR"},"sidebar":"react","previous":{"title":"Persistence","permalink":"/zedux/docs/advanced/persistence"},"next":{"title":"Time Travel","permalink":"/zedux/docs/advanced/time-travel"}};var assets={};var toc=[{value:\'SSR Setup\',id:\'ssr-setup\',level:2},{value:\'Server Dehydration\',id:\'server-dehydration\',level:2},{value:\'Promises\',id:\'promises\',level:3},{value:\'Prefetching\',id:\'prefetching\',level:3},{value:\'Other Techniques\',id:\'other-techniques\',level:3},{value:\'Client Hydration\',id:\'client-hydration\',level:2},{value:\'Recap\',id:\'recap\',level:2}];var layoutProps={toc:toc};var MDXLayout="wrapper";function MDXContent(_ref){var components=_ref.components,props=(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(_ref,_excluded);return (0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)(MDXLayout,(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"In ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"persistence"},"the persistence guide"),", we learned how to get an ecosystem\'s state snapshot and use it to rehydrate the entire ecosystem. There is only a little more to learn to get a full-fledged SSR setup going."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"title":"you will learn:","type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"How to use Zedux in a server-rendered app")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"ssr-setup"},"SSR Setup"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ssr")," ecosystem config option to turn on SSR mode for the entire ecosystem:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const ecosystem = createEcosystem({\\n  id: \'root\',\\n  ssr: true,\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"In SSR mode, effects created via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectEffect")," don\'t run. This exactly mimics the behavior of React\'s ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"useEffect")," on the server. The vague wisdom behind this is that SSR is meant to only capture the initial render, while effects only have ... effect ... on subsequent renders."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"server-dehydration"},"Server Dehydration"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"As you\'ve probably guessed, use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," to grab the initial state snapshot from the server. An example using an Express-esque route handler:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"import { createEcosystem } from \'@zedux/react\'\\nimport { renderToString } from \'react-dom/server\'\\n\\nfunction renderRoute(req, res) {\\n  const ecosystem = createEcosystem({\\n    id: \'root\',\\n    ssr: true\\n  })\\n\\n  const output = renderApp(ecosystem)\\n  const snapshot = ecosystem.dehydrate({ excludeFlags: [\'unserializable\'] })\\n\\n  // destroy the ecosystem, just to be safe:\\n  ecosystem.destroy(true)\\n\\n  res.send(`\\n    <div id=\\"root\\">${output}</div>\\n    <script>\\n      window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n    <\/script>\\n    <script src=\\"/my/app.js\\"><\/script>\\n  `)\\n}\\n\\nfunction renderApp(ecosystem) {\\n  return renderToString(\\n    <EcosystemProvider ecosystem={ecosystem}>\\n      <App />\\n    </Provider>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"promises"},"Promises"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The promises of query atoms - e.g. inline promises or promises created via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectPromise"),"/",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMemo")," - still run during SSR. This enables the double-rendering technique (which may or may not work for you). Simply render again after awaiting all promises:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"async function renderRoute(req, res) {\\n  const ecosystem = createEcosystem({\\n    id: \'root\',\\n    ssr: true,\\n  })\\n\\n  // highlight-next-line\\n  renderApp(ecosystem) // render once and discard the result\\n\\n  // grab the promise from every atom instance that has one:\\n  // highlight-start\\n  const promises = Object.values(ecosystem.inspectInstances())\\n    .map(instance => instance.promise)\\n    .filter(Boolean)\\n  // highlight-end\\n\\n  // highlight-next-line\\n  await Promise.all(promises) // contrived warning - remember error handling\\n\\n  // all promises resolved! Render again\\n  // highlight-next-line\\n  const output = renderApp(ecosystem)\\n  const snapshot = ecosystem.dehydrate({ excludeFlags: [\'unserializable\'] })\\n\\n  ecosystem.destroy(true)\\n\\n  res.send(`\\n    <div id=\\"root\\">${output}</div>\\n    <script>\\n      window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n    <\/script>\\n    <script src=\\"/my/app.js\\"><\/script>\\n  `)\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"prefetching"},"Prefetching"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can also \\"prefetch\\" specific atoms before rendering:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"async function renderRoute(req, res) {\\n  const ecosystem = createEcosystem({\\n    id: \'root\',\\n    ssr: true,\\n  })\\n\\n  await prefetchAtoms(ecosystem)\\n\\n  const output = renderApp(ecosystem)\\n  const snapshot = ecosystem.dehydrate({ excludeFlags: [\'unserializable\'] })\\n\\n  ecosystem.destroy(true)\\n\\n  res.send(`\\n    <div id=\\"root\\">${output}</div>\\n    <script>\\n      window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n    <\/script>\\n    <script src=\\"/my/app.js\\"><\/script>\\n  `)\\n}\\n\\nfunction prefetchAtoms(ecosystem) {\\n  const fooInstance = ecosystem.getInstance(fooAtom)\\n  const barInstance = ecosystem.getInstance(barAtom)\\n\\n  return Promise.all([fooInstance.promise, barInstance.promise])\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"other-techniques"},"Other Techniques"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Zedux gives you very transparent control over your state. There are many ways you can use this transparency to optimize SSR."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"For example, it\'s possible to analyze your dependency graph and prefetch only highly-demanded atoms."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"renderApp(ecosystem)\\n\\nconst instancesByWeight = Object.values(ecosystem._instances)\\n  .filter(instance => instance.promise) // only compare instances with promises\\n  .sort(\\n    (instanceA, instanceB) =>\\n      ecosystem._graph.nodes[instanceA.keyHash].weight -\\n      ecosystem._graph.nodes[instanceB.keyHash].weight\\n  )\\n\\n// instances with lower weight are typically used more:\\nconst mostUsedInstances = instancesByWeight.slice(\\n  0,\\n  Math.floor(instancesByWeight.length / 2)\\n)\\n\\n// wait for half of all the suspending atoms (the most-used half):\\nawait Promise.all(mostUsedInstances.map(instance => instance.promise))\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Many other techniques are possible. Some ideas:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"react-ssr-prepass")," to drill into nested suspense boundaries"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Prefetching only atoms with at least X dependents"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Using a fake user to periodically render routes during server downtime, caching lists of atoms that should be prefetched for that type of user on that route.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"client-hydration"},"Client Hydration"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"When you have a snapshot of initial state on the server, you\'ll usually send it to the client by e.g. embedding it in the page\'s HTML output:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"res.send(`\\n  <div id=\\"root\\">${output}</div>\\n  <script>\\n    window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n  <\/script>\\n  <script src=\\"/my/app.js\\"><\/script>\\n`)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now the client app can pass that to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.hydrate()"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"import { createEcosystem, EcosystemProvider } from \'@zedux/react\'\\n\\nconst ecosystem = createEcosystem({ id: \'root\' })\\necosystem.hydrate(window.__SNAPSHOT)\\n\\nfunction App() {\\n  return (\\n    <EcosystemProvider ecosystem={ecosystem}>\\n      <Routes />\\n    </EcosystemProvider>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"All atom instances created by rendering ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"<Routes />")," will now have their initial state hydrated from the server snapshot."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"recap"},"Recap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ssr")," ecosystem config option to turn on SSR mode, preventing effects from running."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Dehydrate the state on the server with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ecosystem.dehydrate()"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"There are many ways to prefetch query atoms. Await many promises by grabbing the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},".promise")," off of each instance."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Hydrate the state on the client with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ecosystem.hydrate()"),".")));};MDXContent.isMDXComponent=true;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QywyRUFBWSxVQUFVLENBQUMsR0FBRyx3QkFBcUMsS0FBUyxDQUNuSCx3RUFBSyxxRUFBTSxVQUFVLENBQUMsS0FBSyxDQUN2QixXQUFXLENBQUUsY0FBYyxzU0FhMUIsQ0FBTSxDQUNYLGlIQUErQywyRUFBWSxVQUFVLENBQUMsR0FBRyxlQUE0Qix5RUFBNkUsQ0FDbEwsbUVBQ0UsSUFBSSxDQUFFLE9BQU8sVUFDRSxDQUNqQix1RUFDRSxtRUFBSSxVQUFVLENBQUMsSUFBSSxhQUFhLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLFFBQXFCLGtGQUF1RixDQUN2SyxtRUFBSSxVQUFVLENBQUMsSUFBSSw0Q0FBNEMsMkVBQVksVUFBVSxDQUFDLElBQUksMEJBQXVDLEtBQVUsQ0FDM0ksbUVBQUksVUFBVSxDQUFDLElBQUksc0ZBQXNGLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLGFBQTBCLDBCQUErQixDQUM3TCxtRUFBSSxVQUFVLENBQUMsSUFBSSwwQ0FBMEMsMkVBQVksVUFBVSxDQUFDLElBQUksd0JBQXFDLEtBQVUsQ0FDcEksQ0FDTyxDQUNoQixDQUNBLENBQ0FELFVBQVUsQ0FBQ0csY0FBYyxDQUFHLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZWR1eC1kb2NzLy4vZG9jcy9hZHZhbmNlZC9zc3IubWR4PzczZTAiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbi8qIEBqc3hSdW50aW1lIGNsYXNzaWMgKi9cbi8qIEBqc3ggbWR4ICovXG4vKiBAanN4RnJhZyBSZWFjdC5GcmFnbWVudCAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbWR4IH0gZnJvbSAnQG1keC1qcy9yZWFjdCc7XG5cblxuZXhwb3J0IGNvbnN0IGZyb250TWF0dGVyID0ge1xuXHRpZDogJ3NzcicsXG5cdHRpdGxlOiAnU1NSJ1xufTtcbmV4cG9ydCBjb25zdCBjb250ZW50VGl0bGUgPSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3QgbWV0YWRhdGEgPSB7XG4gIFwidW52ZXJzaW9uZWRJZFwiOiBcImFkdmFuY2VkL3NzclwiLFxuICBcImlkXCI6IFwiYWR2YW5jZWQvc3NyXCIsXG4gIFwidGl0bGVcIjogXCJTU1JcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIkluIHRoZSBwZXJzaXN0ZW5jZSBndWlkZSwgd2UgbGVhcm5lZCBob3cgdG8gZ2V0IGFuIGVjb3N5c3RlbSdzIHN0YXRlIHNuYXBzaG90IGFuZCB1c2UgaXQgdG8gcmVoeWRyYXRlIHRoZSBlbnRpcmUgZWNvc3lzdGVtLiBUaGVyZSBpcyBvbmx5IGEgbGl0dGxlIG1vcmUgdG8gbGVhcm4gdG8gZ2V0IGEgZnVsbC1mbGVkZ2VkIFNTUiBzZXR1cCBnb2luZy5cIixcbiAgXCJzb3VyY2VcIjogXCJAc2l0ZS9kb2NzL2FkdmFuY2VkL3Nzci5tZHhcIixcbiAgXCJzb3VyY2VEaXJOYW1lXCI6IFwiYWR2YW5jZWRcIixcbiAgXCJzbHVnXCI6IFwiL2FkdmFuY2VkL3NzclwiLFxuICBcInBlcm1hbGlua1wiOiBcIi96ZWR1eC9kb2NzL2FkdmFuY2VkL3NzclwiLFxuICBcImRyYWZ0XCI6IGZhbHNlLFxuICBcImVkaXRVcmxcIjogXCJodHRwczovL2dpdGh1Yi5jb20vT21uaXN0YWMvemVkdXgvdHJlZS9tYXN0ZXIvZG9jcy9hZHZhbmNlZC9zc3IubWR4XCIsXG4gIFwidGFnc1wiOiBbXSxcbiAgXCJ2ZXJzaW9uXCI6IFwiY3VycmVudFwiLFxuICBcImZyb250TWF0dGVyXCI6IHtcbiAgICBcImlkXCI6IFwic3NyXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlNTUlwiXG4gIH0sXG4gIFwic2lkZWJhclwiOiBcInJlYWN0XCIsXG4gIFwicHJldmlvdXNcIjoge1xuICAgIFwidGl0bGVcIjogXCJQZXJzaXN0ZW5jZVwiLFxuICAgIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3MvYWR2YW5jZWQvcGVyc2lzdGVuY2VcIlxuICB9LFxuICBcIm5leHRcIjoge1xuICAgIFwidGl0bGVcIjogXCJUaW1lIFRyYXZlbFwiLFxuICAgIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3MvYWR2YW5jZWQvdGltZS10cmF2ZWxcIlxuICB9XG59O1xuZXhwb3J0IGNvbnN0IGFzc2V0cyA9IHtcblxufTtcblxuXG5leHBvcnQgY29uc3QgdG9jID0gW3tcbiAgdmFsdWU6ICdTU1IgU2V0dXAnLFxuICBpZDogJ3Nzci1zZXR1cCcsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnU2VydmVyIERlaHlkcmF0aW9uJyxcbiAgaWQ6ICdzZXJ2ZXItZGVoeWRyYXRpb24nLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ1Byb21pc2VzJyxcbiAgaWQ6ICdwcm9taXNlcycsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnUHJlZmV0Y2hpbmcnLFxuICBpZDogJ3ByZWZldGNoaW5nJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdPdGhlciBUZWNobmlxdWVzJyxcbiAgaWQ6ICdvdGhlci10ZWNobmlxdWVzJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdDbGllbnQgSHlkcmF0aW9uJyxcbiAgaWQ6ICdjbGllbnQtaHlkcmF0aW9uJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdSZWNhcCcsXG4gIGlkOiAncmVjYXAnLFxuICBsZXZlbDogMlxufV07XG5cbmNvbnN0IGxheW91dFByb3BzID0ge1xuICB0b2Ncbn07XG5jb25zdCBNRFhMYXlvdXQgPSBcIndyYXBwZXJcIlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTURYQ29udGVudCh7XG4gIGNvbXBvbmVudHMsXG4gIC4uLnByb3BzXG59KSB7XG4gIHJldHVybiA8TURYTGF5b3V0IHsuLi5sYXlvdXRQcm9wc30gey4uLnByb3BzfSBjb21wb25lbnRzPXtjb21wb25lbnRzfSBtZHhUeXBlPVwiTURYTGF5b3V0XCI+XG5cbiAgICA8cD57YEluIGB9PGEgcGFyZW50TmFtZT1cInBcIiB7Li4ue1xuICAgICAgICBcImhyZWZcIjogXCJwZXJzaXN0ZW5jZVwiXG4gICAgICB9fT57YHRoZSBwZXJzaXN0ZW5jZSBndWlkZWB9PC9hPntgLCB3ZSBsZWFybmVkIGhvdyB0byBnZXQgYW4gZWNvc3lzdGVtJ3Mgc3RhdGUgc25hcHNob3QgYW5kIHVzZSBpdCB0byByZWh5ZHJhdGUgdGhlIGVudGlyZSBlY29zeXN0ZW0uIFRoZXJlIGlzIG9ubHkgYSBsaXR0bGUgbW9yZSB0byBsZWFybiB0byBnZXQgYSBmdWxsLWZsZWRnZWQgU1NSIHNldHVwIGdvaW5nLmB9PC9wPlxuICAgIDxhZG1vbml0aW9uIHsuLi57XG4gICAgICBcInRpdGxlXCI6IFwieW91IHdpbGwgbGVhcm46XCIsXG4gICAgICBcInR5cGVcIjogXCJ0aXBcIlxuICAgIH19PjxwIHBhcmVudE5hbWU9XCJhZG1vbml0aW9uXCI+e2BIb3cgdG8gdXNlIFplZHV4IGluIGEgc2VydmVyLXJlbmRlcmVkIGFwcGB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJzc3Itc2V0dXBcIlxuICAgIH19PntgU1NSIFNldHVwYH08L2gyPlxuICAgIDxwPntgVXNlIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Bzc3JgfTwvaW5saW5lQ29kZT57YCBlY29zeXN0ZW0gY29uZmlnIG9wdGlvbiB0byB0dXJuIG9uIFNTUiBtb2RlIGZvciB0aGUgZW50aXJlIGVjb3N5c3RlbTpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHtcbiAgaWQ6ICdyb290JyxcbiAgc3NyOiB0cnVlLFxufSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgSW4gU1NSIG1vZGUsIGVmZmVjdHMgY3JlYXRlZCB2aWEgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5qZWN0RWZmZWN0YH08L2lubGluZUNvZGU+e2AgZG9uJ3QgcnVuLiBUaGlzIGV4YWN0bHkgbWltaWNzIHRoZSBiZWhhdmlvciBvZiBSZWFjdCdzIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHVzZUVmZmVjdGB9PC9pbmxpbmVDb2RlPntgIG9uIHRoZSBzZXJ2ZXIuIFRoZSB2YWd1ZSB3aXNkb20gYmVoaW5kIHRoaXMgaXMgdGhhdCBTU1IgaXMgbWVhbnQgdG8gb25seSBjYXB0dXJlIHRoZSBpbml0aWFsIHJlbmRlciwgd2hpbGUgZWZmZWN0cyBvbmx5IGhhdmUgLi4uIGVmZmVjdCAuLi4gb24gc3Vic2VxdWVudCByZW5kZXJzLmB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcInNlcnZlci1kZWh5ZHJhdGlvblwiXG4gICAgfX0+e2BTZXJ2ZXIgRGVoeWRyYXRpb25gfTwvaDI+XG4gICAgPHA+e2BBcyB5b3UndmUgcHJvYmFibHkgZ3Vlc3NlZCwgdXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5kZWh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgIHRvIGdyYWIgdGhlIGluaXRpYWwgc3RhdGUgc25hcHNob3QgZnJvbSB0aGUgc2VydmVyLiBBbiBleGFtcGxlIHVzaW5nIGFuIEV4cHJlc3MtZXNxdWUgcm91dGUgaGFuZGxlcjpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiXG4gICAgICB9fT57YGltcG9ydCB7IGNyZWF0ZUVjb3N5c3RlbSB9IGZyb20gJ0B6ZWR1eC9yZWFjdCdcbmltcG9ydCB7IHJlbmRlclRvU3RyaW5nIH0gZnJvbSAncmVhY3QtZG9tL3NlcnZlcidcblxuZnVuY3Rpb24gcmVuZGVyUm91dGUocmVxLCByZXMpIHtcbiAgY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHtcbiAgICBpZDogJ3Jvb3QnLFxuICAgIHNzcjogdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IG91dHB1dCA9IHJlbmRlckFwcChlY29zeXN0ZW0pXG4gIGNvbnN0IHNuYXBzaG90ID0gZWNvc3lzdGVtLmRlaHlkcmF0ZSh7IGV4Y2x1ZGVGbGFnczogWyd1bnNlcmlhbGl6YWJsZSddIH0pXG5cbiAgLy8gZGVzdHJveSB0aGUgZWNvc3lzdGVtLCBqdXN0IHRvIGJlIHNhZmU6XG4gIGVjb3N5c3RlbS5kZXN0cm95KHRydWUpXG5cbiAgcmVzLnNlbmQoXFxgXG4gICAgPGRpdiBpZD1cInJvb3RcIj5cXCR7b3V0cHV0fTwvZGl2PlxuICAgIDxzY3JpcHQ+XG4gICAgICB3aW5kb3cuX19TTkFQU0hPVCA9IFxcJHtKU09OLnN0cmluZ2lmeShzbmFwc2hvdCl9XG4gICAgPC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCIvbXkvYXBwLmpzXCI+PC9zY3JpcHQ+XG4gIFxcYClcbn1cblxuZnVuY3Rpb24gcmVuZGVyQXBwKGVjb3N5c3RlbSkge1xuICByZXR1cm4gcmVuZGVyVG9TdHJpbmcoXG4gICAgPEVjb3N5c3RlbVByb3ZpZGVyIGVjb3N5c3RlbT17ZWNvc3lzdGVtfT5cbiAgICAgIDxBcHAgLz5cbiAgICA8L1Byb3ZpZGVyPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJwcm9taXNlc1wiXG4gICAgfX0+e2BQcm9taXNlc2B9PC9oMz5cbiAgICA8cD57YFRoZSBwcm9taXNlcyBvZiBxdWVyeSBhdG9tcyAtIGUuZy4gaW5saW5lIHByb21pc2VzIG9yIHByb21pc2VzIGNyZWF0ZWQgdmlhIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluamVjdFByb21pc2VgfTwvaW5saW5lQ29kZT57YC9gfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmplY3RNZW1vYH08L2lubGluZUNvZGU+e2AgLSBzdGlsbCBydW4gZHVyaW5nIFNTUi4gVGhpcyBlbmFibGVzIHRoZSBkb3VibGUtcmVuZGVyaW5nIHRlY2huaXF1ZSAod2hpY2ggbWF5IG9yIG1heSBub3Qgd29yayBmb3IgeW91KS4gU2ltcGx5IHJlbmRlciBhZ2FpbiBhZnRlciBhd2FpdGluZyBhbGwgcHJvbWlzZXM6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGFzeW5jIGZ1bmN0aW9uIHJlbmRlclJvdXRlKHJlcSwgcmVzKSB7XG4gIGNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7XG4gICAgaWQ6ICdyb290JyxcbiAgICBzc3I6IHRydWUsXG4gIH0pXG5cbiAgLy8gaGlnaGxpZ2h0LW5leHQtbGluZVxuICByZW5kZXJBcHAoZWNvc3lzdGVtKSAvLyByZW5kZXIgb25jZSBhbmQgZGlzY2FyZCB0aGUgcmVzdWx0XG5cbiAgLy8gZ3JhYiB0aGUgcHJvbWlzZSBmcm9tIGV2ZXJ5IGF0b20gaW5zdGFuY2UgdGhhdCBoYXMgb25lOlxuICAvLyBoaWdobGlnaHQtc3RhcnRcbiAgY29uc3QgcHJvbWlzZXMgPSBPYmplY3QudmFsdWVzKGVjb3N5c3RlbS5pbnNwZWN0SW5zdGFuY2VzKCkpXG4gICAgLm1hcChpbnN0YW5jZSA9PiBpbnN0YW5jZS5wcm9taXNlKVxuICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgLy8gaGlnaGxpZ2h0LWVuZFxuXG4gIC8vIGhpZ2hsaWdodC1uZXh0LWxpbmVcbiAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpIC8vIGNvbnRyaXZlZCB3YXJuaW5nIC0gcmVtZW1iZXIgZXJyb3IgaGFuZGxpbmdcblxuICAvLyBhbGwgcHJvbWlzZXMgcmVzb2x2ZWQhIFJlbmRlciBhZ2FpblxuICAvLyBoaWdobGlnaHQtbmV4dC1saW5lXG4gIGNvbnN0IG91dHB1dCA9IHJlbmRlckFwcChlY29zeXN0ZW0pXG4gIGNvbnN0IHNuYXBzaG90ID0gZWNvc3lzdGVtLmRlaHlkcmF0ZSh7IGV4Y2x1ZGVGbGFnczogWyd1bnNlcmlhbGl6YWJsZSddIH0pXG5cbiAgZWNvc3lzdGVtLmRlc3Ryb3kodHJ1ZSlcblxuICByZXMuc2VuZChcXGBcbiAgICA8ZGl2IGlkPVwicm9vdFwiPlxcJHtvdXRwdXR9PC9kaXY+XG4gICAgPHNjcmlwdD5cbiAgICAgIHdpbmRvdy5fX1NOQVBTSE9UID0gXFwke0pTT04uc3RyaW5naWZ5KHNuYXBzaG90KX1cbiAgICA8L3NjcmlwdD5cbiAgICA8c2NyaXB0IHNyYz1cIi9teS9hcHAuanNcIj48L3NjcmlwdD5cbiAgXFxgKVxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwicHJlZmV0Y2hpbmdcIlxuICAgIH19PntgUHJlZmV0Y2hpbmdgfTwvaDM+XG4gICAgPHA+e2BZb3UgY2FuIGFsc28gXCJwcmVmZXRjaFwiIHNwZWNpZmljIGF0b21zIGJlZm9yZSByZW5kZXJpbmc6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGFzeW5jIGZ1bmN0aW9uIHJlbmRlclJvdXRlKHJlcSwgcmVzKSB7XG4gIGNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7XG4gICAgaWQ6ICdyb290JyxcbiAgICBzc3I6IHRydWUsXG4gIH0pXG5cbiAgYXdhaXQgcHJlZmV0Y2hBdG9tcyhlY29zeXN0ZW0pXG5cbiAgY29uc3Qgb3V0cHV0ID0gcmVuZGVyQXBwKGVjb3N5c3RlbSlcbiAgY29uc3Qgc25hcHNob3QgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKHsgZXhjbHVkZUZsYWdzOiBbJ3Vuc2VyaWFsaXphYmxlJ10gfSlcblxuICBlY29zeXN0ZW0uZGVzdHJveSh0cnVlKVxuXG4gIHJlcy5zZW5kKFxcYFxuICAgIDxkaXYgaWQ9XCJyb290XCI+XFwke291dHB1dH08L2Rpdj5cbiAgICA8c2NyaXB0PlxuICAgICAgd2luZG93Ll9fU05BUFNIT1QgPSBcXCR7SlNPTi5zdHJpbmdpZnkoc25hcHNob3QpfVxuICAgIDwvc2NyaXB0PlxuICAgIDxzY3JpcHQgc3JjPVwiL215L2FwcC5qc1wiPjwvc2NyaXB0PlxuICBcXGApXG59XG5cbmZ1bmN0aW9uIHByZWZldGNoQXRvbXMoZWNvc3lzdGVtKSB7XG4gIGNvbnN0IGZvb0luc3RhbmNlID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKGZvb0F0b20pXG4gIGNvbnN0IGJhckluc3RhbmNlID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKGJhckF0b20pXG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKFtmb29JbnN0YW5jZS5wcm9taXNlLCBiYXJJbnN0YW5jZS5wcm9taXNlXSlcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm90aGVyLXRlY2huaXF1ZXNcIlxuICAgIH19PntgT3RoZXIgVGVjaG5pcXVlc2B9PC9oMz5cbiAgICA8cD57YFplZHV4IGdpdmVzIHlvdSB2ZXJ5IHRyYW5zcGFyZW50IGNvbnRyb2wgb3ZlciB5b3VyIHN0YXRlLiBUaGVyZSBhcmUgbWFueSB3YXlzIHlvdSBjYW4gdXNlIHRoaXMgdHJhbnNwYXJlbmN5IHRvIG9wdGltaXplIFNTUi5gfTwvcD5cbiAgICA8cD57YEZvciBleGFtcGxlLCBpdCdzIHBvc3NpYmxlIHRvIGFuYWx5emUgeW91ciBkZXBlbmRlbmN5IGdyYXBoIGFuZCBwcmVmZXRjaCBvbmx5IGhpZ2hseS1kZW1hbmRlZCBhdG9tcy5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgcmVuZGVyQXBwKGVjb3N5c3RlbSlcblxuY29uc3QgaW5zdGFuY2VzQnlXZWlnaHQgPSBPYmplY3QudmFsdWVzKGVjb3N5c3RlbS5faW5zdGFuY2VzKVxuICAuZmlsdGVyKGluc3RhbmNlID0+IGluc3RhbmNlLnByb21pc2UpIC8vIG9ubHkgY29tcGFyZSBpbnN0YW5jZXMgd2l0aCBwcm9taXNlc1xuICAuc29ydChcbiAgICAoaW5zdGFuY2VBLCBpbnN0YW5jZUIpID0+XG4gICAgICBlY29zeXN0ZW0uX2dyYXBoLm5vZGVzW2luc3RhbmNlQS5rZXlIYXNoXS53ZWlnaHQgLVxuICAgICAgZWNvc3lzdGVtLl9ncmFwaC5ub2Rlc1tpbnN0YW5jZUIua2V5SGFzaF0ud2VpZ2h0XG4gIClcblxuLy8gaW5zdGFuY2VzIHdpdGggbG93ZXIgd2VpZ2h0IGFyZSB0eXBpY2FsbHkgdXNlZCBtb3JlOlxuY29uc3QgbW9zdFVzZWRJbnN0YW5jZXMgPSBpbnN0YW5jZXNCeVdlaWdodC5zbGljZShcbiAgMCxcbiAgTWF0aC5mbG9vcihpbnN0YW5jZXNCeVdlaWdodC5sZW5ndGggLyAyKVxuKVxuXG4vLyB3YWl0IGZvciBoYWxmIG9mIGFsbCB0aGUgc3VzcGVuZGluZyBhdG9tcyAodGhlIG1vc3QtdXNlZCBoYWxmKTpcbmF3YWl0IFByb21pc2UuYWxsKG1vc3RVc2VkSW5zdGFuY2VzLm1hcChpbnN0YW5jZSA9PiBpbnN0YW5jZS5wcm9taXNlKSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgTWFueSBvdGhlciB0ZWNobmlxdWVzIGFyZSBwb3NzaWJsZS4gU29tZSBpZGVhczpgfTwvcD5cbiAgICA8dWw+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BVc2luZyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgcmVhY3Qtc3NyLXByZXBhc3NgfTwvaW5saW5lQ29kZT57YCB0byBkcmlsbCBpbnRvIG5lc3RlZCBzdXNwZW5zZSBib3VuZGFyaWVzYH08L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgUHJlZmV0Y2hpbmcgb25seSBhdG9tcyB3aXRoIGF0IGxlYXN0IFggZGVwZW5kZW50c2B9PC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFVzaW5nIGEgZmFrZSB1c2VyIHRvIHBlcmlvZGljYWxseSByZW5kZXIgcm91dGVzIGR1cmluZyBzZXJ2ZXIgZG93bnRpbWUsIGNhY2hpbmcgbGlzdHMgb2YgYXRvbXMgdGhhdCBzaG91bGQgYmUgcHJlZmV0Y2hlZCBmb3IgdGhhdCB0eXBlIG9mIHVzZXIgb24gdGhhdCByb3V0ZS5gfTwvbGk+XG4gICAgPC91bD5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJjbGllbnQtaHlkcmF0aW9uXCJcbiAgICB9fT57YENsaWVudCBIeWRyYXRpb25gfTwvaDI+XG4gICAgPHA+e2BXaGVuIHlvdSBoYXZlIGEgc25hcHNob3Qgb2YgaW5pdGlhbCBzdGF0ZSBvbiB0aGUgc2VydmVyLCB5b3UnbGwgdXN1YWxseSBzZW5kIGl0IHRvIHRoZSBjbGllbnQgYnkgZS5nLiBlbWJlZGRpbmcgaXQgaW4gdGhlIHBhZ2UncyBIVE1MIG91dHB1dDpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgcmVzLnNlbmQoXFxgXG4gIDxkaXYgaWQ9XCJyb290XCI+XFwke291dHB1dH08L2Rpdj5cbiAgPHNjcmlwdD5cbiAgICB3aW5kb3cuX19TTkFQU0hPVCA9IFxcJHtKU09OLnN0cmluZ2lmeShzbmFwc2hvdCl9XG4gIDwvc2NyaXB0PlxuICA8c2NyaXB0IHNyYz1cIi9teS9hcHAuanNcIj48L3NjcmlwdD5cblxcYClcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgTm93IHRoZSBjbGllbnQgYXBwIGNhbiBwYXNzIHRoYXQgdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZWNvc3lzdGVtLmh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCJcbiAgICAgIH19PntgaW1wb3J0IHsgY3JlYXRlRWNvc3lzdGVtLCBFY29zeXN0ZW1Qcm92aWRlciB9IGZyb20gJ0B6ZWR1eC9yZWFjdCdcblxuY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHsgaWQ6ICdyb290JyB9KVxuZWNvc3lzdGVtLmh5ZHJhdGUod2luZG93Ll9fU05BUFNIT1QpXG5cbmZ1bmN0aW9uIEFwcCgpIHtcbiAgcmV0dXJuIChcbiAgICA8RWNvc3lzdGVtUHJvdmlkZXIgZWNvc3lzdGVtPXtlY29zeXN0ZW19PlxuICAgICAgPFJvdXRlcyAvPlxuICAgIDwvRWNvc3lzdGVtUHJvdmlkZXI+XG4gIClcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgQWxsIGF0b20gaW5zdGFuY2VzIGNyZWF0ZWQgYnkgcmVuZGVyaW5nIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YDxSb3V0ZXMgLz5gfTwvaW5saW5lQ29kZT57YCB3aWxsIG5vdyBoYXZlIHRoZWlyIGluaXRpYWwgc3RhdGUgaHlkcmF0ZWQgZnJvbSB0aGUgc2VydmVyIHNuYXBzaG90LmB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcInJlY2FwXCJcbiAgICB9fT57YFJlY2FwYH08L2gyPlxuICAgIDx1bD5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFVzZSB0aGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHNzcmB9PC9pbmxpbmVDb2RlPntgIGVjb3N5c3RlbSBjb25maWcgb3B0aW9uIHRvIHR1cm4gb24gU1NSIG1vZGUsIHByZXZlbnRpbmcgZWZmZWN0cyBmcm9tIHJ1bm5pbmcuYH08L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgRGVoeWRyYXRlIHRoZSBzdGF0ZSBvbiB0aGUgc2VydmVyIHdpdGggYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YGVjb3N5c3RlbS5kZWh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgLmB9PC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFRoZXJlIGFyZSBtYW55IHdheXMgdG8gcHJlZmV0Y2ggcXVlcnkgYXRvbXMuIEF3YWl0IG1hbnkgcHJvbWlzZXMgYnkgZ3JhYmJpbmcgdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2AucHJvbWlzZWB9PC9pbmxpbmVDb2RlPntgIG9mZiBvZiBlYWNoIGluc3RhbmNlLmB9PC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YEh5ZHJhdGUgdGhlIHN0YXRlIG9uIHRoZSBjbGllbnQgd2l0aCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgZWNvc3lzdGVtLmh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgLmB9PC9saT5cbiAgICA8L3VsPlxuICAgIDwvTURYTGF5b3V0Pjtcbn1cbjtcbk1EWENvbnRlbnQuaXNNRFhDb21wb25lbnQgPSB0cnVlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwibWR4IiwiZnJvbnRNYXR0ZXIiLCJpZCIsInRpdGxlIiwiY29udGVudFRpdGxlIiwidW5kZWZpbmVkIiwibWV0YWRhdGEiLCJhc3NldHMiLCJ0b2MiLCJ2YWx1ZSIsImxldmVsIiwibGF5b3V0UHJvcHMiLCJNRFhMYXlvdXQiLCJNRFhDb250ZW50IiwiY29tcG9uZW50cyIsInByb3BzIiwiaXNNRFhDb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8093\n')}}]);