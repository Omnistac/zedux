"use strict";(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[1483],{3975:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "assets": function() { return /* binding */ assets; },\n/* harmony export */   "contentTitle": function() { return /* binding */ contentTitle; },\n/* harmony export */   "default": function() { return /* binding */ MDXContent; },\n/* harmony export */   "frontMatter": function() { return /* binding */ frontMatter; },\n/* harmony export */   "metadata": function() { return /* binding */ metadata; },\n/* harmony export */   "toc": function() { return /* binding */ toc; }\n/* harmony export */ });\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7462);\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3366);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7294);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3905);\nvar _excluded=["components"];/* @jsxRuntime classic */ /* @jsx mdx */ /* @jsxFrag React.Fragment */var frontMatter={id:\'state-machines\',title:\'State Machines\'};var contentTitle=undefined;var metadata={"unversionedId":"walkthrough/state-machines","id":"walkthrough/state-machines","title":"State Machines","description":"The state machine is one of the most important tools a statesmith can have in his belt. XState is the current king of the JavaScript state machine world. Zedux is not out to change that, in fact we may build an official XState Zedux integration soon.","source":"@site/docs/walkthrough/state-machines.mdx","sourceDirName":"walkthrough","slug":"/walkthrough/state-machines","permalink":"/zedux/docs/walkthrough/state-machines","draft":false,"editUrl":"https://github.com/Omnistac/zedux/tree/master/docs/walkthrough/state-machines.mdx","tags":[],"version":"current","frontMatter":{"id":"state-machines","title":"State Machines"},"sidebar":"react","previous":{"title":"Resets","permalink":"/zedux/docs/walkthrough/resets"},"next":{"title":"Batching","permalink":"/zedux/docs/advanced/batching"}};var assets={};var toc=[{value:\'Creating a machine\',id:\'creating-a-machine\',level:2},{value:\'MachineStore\',id:\'machinestore\',level:2},{value:\'<code>.send()</code>\',id:\'send\',level:3},{value:\'<code>.is()</code>\',id:\'is\',level:3},{value:\'<code>.getValue()</code>\',id:\'getvalue\',level:3},{value:\'State Shape\',id:\'state-shape\',level:3},{value:\'Context\',id:\'context\',level:2},{value:\'<code>.getContext()</code>\',id:\'getcontext\',level:3},{value:\'<code>.setContext()</code>\',id:\'setcontext\',level:3},{value:\'<code>.setContextDeep()</code>\',id:\'setcontextdeep\',level:3},{value:\'Example\',id:\'example\',level:3},{value:\'Listeners\',id:\'listeners\',level:2},{value:\'<code>onEnter</code>\',id:\'onenter\',level:3},{value:\'<code>onLeave</code>\',id:\'onleave\',level:3},{value:\'<code>onTransition</code>\',id:\'ontransition\',level:3},{value:\'Contrived Example\',id:\'contrived-example\',level:2},{value:\'Guards\',id:\'guards\',level:2},{value:\'Recap\',id:\'recap\',level:2},{value:\'Next Steps\',id:\'next-steps\',level:2}];var layoutProps={toc:toc};var MDXLayout="wrapper";function MDXContent(_ref){var components=_ref.components,props=(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(_ref,_excluded);return (0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)(MDXLayout,(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The state machine is one of the most important tools a statesmith can have in his belt. ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"https://xstate.js.org/"},"XState")," is the current king of the JavaScript state machine world. Zedux is not out to change that, in fact we may build an official XState Zedux integration soon."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"However, Zedux does provide a minimal state machine implementation out of the box. These state machines use a high-level, TypeScript-first design that\'s meant to handle simple cases extremely well. For more power, use XState."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"title":"you will learn:","type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"How to create simple TS-first state machines and add transition guards and listeners.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"creating-a-machine"},"Creating a machine"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Zedux provides a single high-level injector for creating automatically-typed state machines: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Pass a function to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()")," that accepts a single ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state")," factory function and returns an array of states. The first state in the array becomes the initial state."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { atom, injectMachineStore } from \'@zedux/react\'\\n\\nconst trafficLightAtom = atom(\'trafficLight\', () => {\\n  const store = injectMachineStore(state => [\\n    state(\'green\'), // <- the initial state\\n    state(\'yellow\'),\\n    state(\'red\'),\\n  ])\\n\\n  return store\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This creates a state machine with 3 states: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"yellow"),", and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"red"),". ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," is the initial state. But this machine is stuck in ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," forever! To change that, you need to give it transitions:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(state => [\\n  state(\'green\').on(\'timer\', \'yellow\'),\\n  state(\'yellow\').on(\'timer\', \'red\'),\\n  state(\'red\').on(\'timer\', \'green\'),\\n])\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".on(event, nextState)")," to add transitions to the machine\'s states. Now the machine can transition from ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," -> ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"yellow")," -> ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"red")," -> ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"green")," -> etc. in a loop. The machine will transition when it receives the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"timer")," event."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now ... how do you send that event to the machine?"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"machinestore"},"MachineStore"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()")," returns a special store called a MachineStore. MachineStore extends the Zedux Store class and adds some state machine functionality."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { injectMachineStore, MachineStore } from \'@zedux/react\'\\n\\nconst exampleAtom = atom(\'example\', () => {\\n  const store = injectMachineStore(() => [])\\n\\n  store instanceof MachineStore // true\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"While you can instantiate the MachineStore class yourself, it\'s highly recommended to use helpers like ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()")," for the automatic TS types.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"send"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".send()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Use this to send events to the store, triggering state transitions:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=send-example resultVar=output","live":true,"ecosystemId":"send-example","resultVar":"output"},"const trafficLightAtom = atom(\'trafficLight\', () => {\\n  const store = injectMachineStore(state => [\\n    state(\'green\').on(\'timer\', \'yellow\'),\\n    state(\'yellow\').on(\'timer\', \'red\'),\\n    state(\'red\').on(\'timer\', \'green\'),\\n  ])\\n\\n  return store\\n})\\n\\nconst ecosystem = createEcosystem({ id: \'send-example\' })\\nconst { store } = ecosystem.getInstance(trafficLightAtom)\\n\\nconst initialState = store.getState()\\nstore.send(\'timer\')\\nconst nextState = store.getState()\\nconst output = { initialState, nextState }\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"The store returned from the state factory ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("em",{parentName:"p"},"is")," the atom instance\'s ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".store"),". Since this example returned a MachineStore, you can access the machine\'s methods directly on the instance\'s store - e.g. ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"instance.store.send(\'timer\')"),". This has full TypeScript support too!")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"For TypeScript users, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".send()")," only accepts strings that were specified as event names during machine creation. In this example, passing anything but the string ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'timer\'")," gives a TS error:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"send(\'time\') // Argument of type \'\\"time\\"\' is not assignable to parameter of type \'\\"timer\\"\'\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The machine will only transition if the current state has a transition specified for the passed event."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(state => [\\n  state(\'idle\').on(\'move\', \'animating\')\\n  state(\'animating\').on(\'finish\', \'idle\')\\n])\\n\\nstore.getValue() // \'idle\'\\nstore.send(\'finish\') // does nothing\\nstore.getValue() // \'idle\'\\nstore.send(\'move\')\\nstore.getValue() // \'animating\'\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"is"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".is()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Returns true if the machine\'s current state is the passed state string."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=is-example resultVar=output","live":true,"ecosystemId":"is-example","resultVar":"output"},"const trafficLightAtom = atom(\'trafficLight\', () => {\\n  const store = injectMachineStore(state => [\\n    state(\'green\').on(\'timer\', \'yellow\'),\\n    state(\'yellow\').on(\'timer\', \'red\'),\\n    state(\'red\').on(\'timer\', \'green\'),\\n  ])\\n\\n  return store\\n})\\n\\nconst ecosystem = createEcosystem({ id: \'is-example\' })\\n\\n// both .is and .send are bound function properties (destructuring is fine):\\nconst { is, send } = ecosystem.getInstance(trafficLightAtom).store\\n\\nsend(\'timer\')\\nsend(\'timer\')\\nconst output = is(\'red\')\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"For TS users, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".is()")," only accepts strings that were specified as state names during machine creation. In this example, passing anything but the strings ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'green\'"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'yellow\'"),", or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"\'red\'")," gives a TS error:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"is(\'yello\') // Argument of type \'\\"yello\\"\' is not assignable to parameter of type \'\\"green\\" | \\"yellow\\" | \\"red\\"\'\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"getvalue"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".getValue()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Returns the machine\'s current string value:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"store.getValue() // green\\nstore.send(\'timer\')\\nstore.getValue() // yellow\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"state-shape"},"State Shape"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The MachineStore\'s state is an object like the following:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"store.getState()\\n// {\\n//   context: undefined,\\n//   value: \'green\',\\n// }\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".value")," is the current string state of the machine."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These two lines are equivalent:\\nmachineStore.getState().value === \'green\'\\nmachineStore.is(\'green\')\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We\'ll look at ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".context")," next:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"context"},"Context"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"MachineStores can hold extra state, besides the value string. This extra state is called context. Context must be an object (or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"undefined"),")."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can pass the initial context as the 2nd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(statesFactory, initialContext)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"getcontext"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".getContext()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Returns the current context value. An alias for ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"machineStore.getState().context"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These two lines are equivalent:\\nmachineStore.getState().context\\nmachineStore.getContext()\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"setcontext"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".setContext()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Sets the store\'s context value. Accepts function overloads."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These are all equivalent:\\nmachineStore.setState(state => ({ ...state, context: newContext }))\\nmachineStore.setContext(newContext)\\nmachineStore.setContext(context => newContext)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"setcontextdeep"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},".setContextDeep()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Deeply merges the passed context value into the existing context. Accepts function overloads."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"// These are all equivalent:\\nmachineStore.setStateDeep({ context: newContext })\\nmachineStore.setContextDeep(newContext)\\nmachineStore.setContextDeep(context => newContext)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"warning"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"Just like ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".setStateDeep()"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".setContextDeep()")," is only for updating state - it cannot be used to delete keys. Use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".setContext()")," for that.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"example"},"Example"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Here\'s an example using context to keep track of how many times a theme toggler toggles:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/context resultVar=Theme","live":true,"ecosystemId":"state-machines/context","resultVar":"Theme"},"const themeAtom = atom(\'theme\', () => {\\n  const store = injectMachineStore(\\n    state => [\\n      state(\'light\').on(\'toggle\', \'dark\'),\\n      state(\'dark\').on(\'toggle\', \'light\'),\\n    ],\\n    { count: 0 },\\n    {\\n      onTransition: machine =>\\n        machine.setContext(context => ({ count: context.count + 1 })),\\n    }\\n  )\\n\\n  // you can alias store methods on exports for use in `useAtomState`:\\n  return api(store).setExports({ send: store.send })\\n})\\n\\nfunction Theme() {\\n  const [{ context, value }, { send }] = useAtomState(themeAtom)\\n\\n  return (\\n    <div style={value === \'dark\' ? { background: \'#444\', color: \'#fff\' } : {}}>\\n      <label>\\n        <input\\n          checked={value === \'dark\'}\\n          onChange={() => send(\'toggle\')}\\n          type=\\"checkbox\\"\\n        />\\n        <span>{value} mode</span>\\n      </label>\\n      <div>Toggle Count: {context.count}</div>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This example also made use of an ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," function. This is called a listener."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"listeners"},"Listeners"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Listeners can be used to run side effects when the state machine transitions to a new state. There are 3 kinds: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onEnter"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onLeave"),", and the universal ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"onenter"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"onEnter")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This listener is attached to individual states via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state.onEnter()"),". Here\'s an example using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," to send a request when the machine enters the \'fetching\' state:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const requestStore = injectMachineStore(\\n  state => [\\n    state(\'idle\').on(\'fetch\', \'fetching\'),\\n    state(\'fetching\')\\n      .on(\'succeed\', \'success\')\\n      .on(\'fail\', \'failure\')\\n      .onEnter(async machine => {\\n        try {\\n          const data = await fetch(\'/todos\').then(data => data.json())\\n          machine.setContextDeep({ data })\\n          machine.send(\'succeed\')\\n        } catch (error) {\\n          machine.setContextDeep({ error })\\n          machine.send(\'fail\')\\n        }\\n      }),\\n  ],\\n  { data: null, error: null }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"note"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"For TS users: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," has limited type support, since the machine\'s full type hasn\'t been inferred yet. The above example will work because ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," is placed after the two ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".on()")," calls for the \'fetching\' state. When you need access to better types, use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," instead.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"onleave"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"onLeave")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This listener is attached to individual states via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state.onLeave()"),". Here\'s an example using both ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onLeave()")," to set and clear a timeout:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const timeoutStore = injectMachineStore(\\n  state => [\\n    state(\'idle\').on(\'startTimer\', \'waiting\'),\\n    state(\'waiting\')\\n      .on(\'cancel\', \'idle\')\\n      .on(\'timeout\', \'idle\')\\n      .onEnter(machine => {\\n        const handle = setTimeout(() => {\\n          machine.setContext({ handle: null })\\n          machine.send(\'timeout\')\\n        }, 1000)\\n\\n        machine.setContext({ handle })\\n      })\\n      .onLeave(async machine => {\\n        const { handle } = machine.getContext()\\n\\n        if (!handle) return\\n\\n        clearTimeout(handle)\\n        machine.setContext({ handle: null })\\n      }),\\n  ],\\n  { handle: null }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"note"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"For TS users: Like ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onEnter()"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".onLeave()")," has limited type support, since the machine\'s full type hasn\'t been inferred yet. When you need access to better types, use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," instead.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"ontransition"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"onTransition")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This is the catch-all listener that will be called every time the state machine transitions. This listener has full type support, so use this when ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onEnter")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onLeave")," types are insufficient."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The 3rd parameter to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMachineStore()")," is a config object:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectMachineStore(statesFactory, initialContext, config)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Pass ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"onTransition")," as part of this config"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const toggleMachine = injectMachineStore(\\n  state => [state(\'on\').on(\'toggle\', \'off\'), state(\'off\').on(\'toggle\', \'on\')],\\n  { onTransition }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"contrived-example"},"Contrived Example"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The obligatory garage door state machine example:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/door resultVar=Machine","live":true,"ecosystemId":"state-machines/door","resultVar":"Machine"},"const doorAtom = atom(\'door\', () => {\\n  const store = injectMachineStore(\\n    state => {\\n      const startTimeout = machine => {\\n        const { handle } = machine.getContext()\\n\\n        if (handle) clearTimeout(handle)\\n\\n        const newHandle = setTimeout(() => {\\n          machine.setContext({ handle: null })\\n          machine.send(\'timeout\')\\n        }, 1000)\\n\\n        machine.setContext({ handle: newHandle })\\n      }\\n\\n      return [\\n        state(\'open\').on(\'click\', \'closing\'),\\n        state(\'opening\')\\n          .on(\'click\', \'closing\')\\n          .on(\'timeout\', \'open\')\\n          .onEnter(startTimeout),\\n        state(\'closed\').on(\'click\', \'opening\'),\\n        state(\'closing\')\\n          .on(\'click\', \'opening\')\\n          .on(\'timeout\', \'closed\')\\n          .onEnter(startTimeout),\\n      ]\\n    },\\n    { handle: null }\\n  )\\n\\n  return store\\n})\\n\\nfunction Machine() {\\n  const { value } = useAtomValue(doorAtom)\\n  const { send } = useAtomInstance(doorAtom).store\\n\\n  return (\\n    <>\\n      <div>State: {value}</div>\\n      <button onClick={() => send(\'click\')}>Fire Click</button>\\n    </>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"guards"},"Guards"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Guards are functions that conditionally prevent the machine from performing a valid transition. Guards can be set per-transition via the 3rd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"state.on()"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const maybeMoveStore = injectMachineStore(\\n  state => [state(\'idle\').on(\'move\', \'moving\', context => !context.isFrozen)],\\n  { isFrozen: false }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"These guards receive the machine\'s context as their only parameter. Return ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"true")," to allow the transition or any falsy value to prevent it. The above machine will only transition from ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"idle")," to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"moving")," if ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"context.isFrozen")," is falsy."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/guards resultVar=Controls","live":true,"ecosystemId":"state-machines/guards","resultVar":"Controls"},"const maybeMovingAtom = atom(\'maybeMoving\', () => {\\n  const store = injectMachineStore(\\n    state => [\\n      // the guard! Prevent this transition if we\'re frozen:\\n      state(\'idle\').on(\'move\', \'moving\', context => !context.isFrozen),\\n      state(\'moving\')\\n        .on(\'stop\', \'idle\')\\n        .onEnter(machine => {\\n          setTimeout(() => machine.send(\'stop\'), 1000)\\n        }),\\n    ],\\n    { isFrozen: false }\\n  )\\n\\n  return api(store).setExports({\\n    toggleFreeze: () =>\\n      store.setContext(context => ({ isFrozen: !context.isFrozen })),\\n    is: store.is,\\n    move: () => store.send(\'move\'),\\n  })\\n})\\n\\nfunction Controls() {\\n  const [{ context }, { toggleFreeze, is, move }] = useAtomState(\\n    maybeMovingAtom\\n  )\\n\\n  return (\\n    <div>\\n      <div>- {context.isFrozen ? \'Frozen\' : \'All Systems Go\'} -</div>\\n      <div\\n        style={{\\n          background: \'cyan\',\\n          height: 50,\\n          left: 0,\\n          position: \'relative\',\\n          transition: \'all 1s\',\\n          width: 50,\\n          ...(is(\'moving\') && { left: 50 }),\\n        }}\\n      />\\n      <button onClick={toggleFreeze}>\\n        {context.isFrozen ? \'Unfreeze\' : \'Freeze\'}\\n      </button>\\n      <button onClick={move}>\\n        Move {context.isFrozen ? \'(Does Nothing)\' : \'\'}\\n      </button>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can also configure the MachineStore with a universal guard via the config object:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"...\\nconst guard = (state, nextValue) => {\\n  // use the current state object and/or nextValue string to determine if the\\n  // transition should be allowed (return true if yes)\\n}\\nconst store = injectMachineStore(statesFactory, initialContext, { guard })\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This guard receives the full current state (",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"{ context, value }"),") and the name of the pending transition state. Here\'s an example using a universal guard to pause the machine after allowing it to cycle back to the start:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=state-machines/guard resultVar=Cycler","live":true,"ecosystemId":"state-machines/guard","resultVar":"Cycler"},"const cyclingAtom = atom(\'cycling\', () => {\\n  const store = injectMachineStore(\\n    state => [\\n      state(\'a\').on(\'cycle\', \'b\'),\\n      state(\'b\').on(\'cycle\', \'c\'),\\n      state(\'c\').on(\'cycle\', \'a\'),\\n    ],\\n    { isPaused: false },\\n    {\\n      guard: (state, nextValue) => !state.context.isPaused || nextValue !== \'b\',\\n    }\\n  )\\n\\n  injectEffect(() => {\\n    const handle = setInterval(() => store.send(\'cycle\'), 1000)\\n\\n    return () => clearInterval(handle)\\n  }, [])\\n\\n  return api(store).setExports({\\n    togglePause: () =>\\n      store.setContext(context => ({ isPaused: !context.isPaused })),\\n  })\\n})\\n\\nfunction Cycler() {\\n  const [{ context, value }, { togglePause }] = useAtomState(cyclingAtom)\\n\\n  return (\\n    <div>\\n      <div>\\n        {value}{\' \'}\\n        {context.isPaused\\n          ? value === \'a\'\\n            ? \'(paused)\'\\n            : \'(finishing cycle...)\'\\n          : null}\\n      </div>\\n      <button onClick={togglePause}>\\n        {context.isPaused ? \'Resume\' : \'Pause\'}\\n      </button>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"recap"},"Recap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"injectMachineStore()")," to create a MachineStore.",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"li"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"state.on()")," adds transitions between states."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"state.onEnter()")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"state.onLeave()")," add listeners to individual states."))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Context is the MachineStore\'s \\"extra state\\". It must be an object (or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"undefined"),").",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"li"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Set initial context with the 2nd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"injectMachineStore()"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Get context with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"machineStore.getContext()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Set context with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"machineStore.setContext()")," or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"machineStore.setContextDeep()")))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use guards to prevent valid transitions."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Add a universal guard and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"onTransition")," listener via the 3rd param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"injectMachineStore()"),".")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"next-steps"},"Next Steps"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"That\'s about it for the key features of Zedux. You\'re ready to jump in and get building! Check out the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../advanced/complex-params"},"advanced guides")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/api-overview"},"API docs")," as needed. Happy coding!"));};MDXContent.isMDXComponent=true;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QiwyRUFBWSxVQUFVLENBQUMsSUFBSSxpQkFBOEIsbUNBQW1DLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLHlCQUFzQyxLQUFVLENBQ3ROLENBQ0wsbUVBQ0UsSUFBSSxDQUFFLFlBQVksZUFDRSxDQUN0QixnTEFBOEcsa0VBQUcsVUFBVSxDQUFDLEdBQUcsQ0FDM0gsTUFBTSxDQUFFLDRCQUE0QixvQkFDWixTQUFTLGtFQUFHLFVBQVUsQ0FBQyxHQUFHLENBQ2xELE1BQU0sQ0FBRSxxQkFBcUIsYUFDWiw2QkFBaUMsQ0FDMUMsQ0FDaEIsQ0FDQSxDQUNBRCxVQUFVLENBQUNHLGNBQWMsQ0FBRyxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVkdXgtZG9jcy8uL2RvY3Mvd2Fsa3Rocm91Z2gvc3RhdGUtbWFjaGluZXMubWR4PzhlNzciXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbi8qIEBqc3hSdW50aW1lIGNsYXNzaWMgKi9cbi8qIEBqc3ggbWR4ICovXG4vKiBAanN4RnJhZyBSZWFjdC5GcmFnbWVudCAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbWR4IH0gZnJvbSAnQG1keC1qcy9yZWFjdCc7XG5cblxuZXhwb3J0IGNvbnN0IGZyb250TWF0dGVyID0ge1xuXHRpZDogJ3N0YXRlLW1hY2hpbmVzJyxcblx0dGl0bGU6ICdTdGF0ZSBNYWNoaW5lcydcbn07XG5leHBvcnQgY29uc3QgY29udGVudFRpdGxlID0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IG1ldGFkYXRhID0ge1xuICBcInVudmVyc2lvbmVkSWRcIjogXCJ3YWxrdGhyb3VnaC9zdGF0ZS1tYWNoaW5lc1wiLFxuICBcImlkXCI6IFwid2Fsa3Rocm91Z2gvc3RhdGUtbWFjaGluZXNcIixcbiAgXCJ0aXRsZVwiOiBcIlN0YXRlIE1hY2hpbmVzXCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgc3RhdGUgbWFjaGluZSBpcyBvbmUgb2YgdGhlIG1vc3QgaW1wb3J0YW50IHRvb2xzIGEgc3RhdGVzbWl0aCBjYW4gaGF2ZSBpbiBoaXMgYmVsdC4gWFN0YXRlIGlzIHRoZSBjdXJyZW50IGtpbmcgb2YgdGhlIEphdmFTY3JpcHQgc3RhdGUgbWFjaGluZSB3b3JsZC4gWmVkdXggaXMgbm90IG91dCB0byBjaGFuZ2UgdGhhdCwgaW4gZmFjdCB3ZSBtYXkgYnVpbGQgYW4gb2ZmaWNpYWwgWFN0YXRlIFplZHV4IGludGVncmF0aW9uIHNvb24uXCIsXG4gIFwic291cmNlXCI6IFwiQHNpdGUvZG9jcy93YWxrdGhyb3VnaC9zdGF0ZS1tYWNoaW5lcy5tZHhcIixcbiAgXCJzb3VyY2VEaXJOYW1lXCI6IFwid2Fsa3Rocm91Z2hcIixcbiAgXCJzbHVnXCI6IFwiL3dhbGt0aHJvdWdoL3N0YXRlLW1hY2hpbmVzXCIsXG4gIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3Mvd2Fsa3Rocm91Z2gvc3RhdGUtbWFjaGluZXNcIixcbiAgXCJkcmFmdFwiOiBmYWxzZSxcbiAgXCJlZGl0VXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL09tbmlzdGFjL3plZHV4L3RyZWUvbWFzdGVyL2RvY3Mvd2Fsa3Rocm91Z2gvc3RhdGUtbWFjaGluZXMubWR4XCIsXG4gIFwidGFnc1wiOiBbXSxcbiAgXCJ2ZXJzaW9uXCI6IFwiY3VycmVudFwiLFxuICBcImZyb250TWF0dGVyXCI6IHtcbiAgICBcImlkXCI6IFwic3RhdGUtbWFjaGluZXNcIixcbiAgICBcInRpdGxlXCI6IFwiU3RhdGUgTWFjaGluZXNcIlxuICB9LFxuICBcInNpZGViYXJcIjogXCJyZWFjdFwiLFxuICBcInByZXZpb3VzXCI6IHtcbiAgICBcInRpdGxlXCI6IFwiUmVzZXRzXCIsXG4gICAgXCJwZXJtYWxpbmtcIjogXCIvemVkdXgvZG9jcy93YWxrdGhyb3VnaC9yZXNldHNcIlxuICB9LFxuICBcIm5leHRcIjoge1xuICAgIFwidGl0bGVcIjogXCJCYXRjaGluZ1wiLFxuICAgIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3MvYWR2YW5jZWQvYmF0Y2hpbmdcIlxuICB9XG59O1xuZXhwb3J0IGNvbnN0IGFzc2V0cyA9IHtcblxufTtcblxuXG5leHBvcnQgY29uc3QgdG9jID0gW3tcbiAgdmFsdWU6ICdDcmVhdGluZyBhIG1hY2hpbmUnLFxuICBpZDogJ2NyZWF0aW5nLWEtbWFjaGluZScsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnTWFjaGluZVN0b3JlJyxcbiAgaWQ6ICdtYWNoaW5lc3RvcmUnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJzxjb2RlPi5zZW5kKCk8L2NvZGU+JyxcbiAgaWQ6ICdzZW5kJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT4uaXMoKTwvY29kZT4nLFxuICBpZDogJ2lzJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT4uZ2V0VmFsdWUoKTwvY29kZT4nLFxuICBpZDogJ2dldHZhbHVlJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdTdGF0ZSBTaGFwZScsXG4gIGlkOiAnc3RhdGUtc2hhcGUnLFxuICBsZXZlbDogM1xufSwge1xuICB2YWx1ZTogJ0NvbnRleHQnLFxuICBpZDogJ2NvbnRleHQnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJzxjb2RlPi5nZXRDb250ZXh0KCk8L2NvZGU+JyxcbiAgaWQ6ICdnZXRjb250ZXh0JyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT4uc2V0Q29udGV4dCgpPC9jb2RlPicsXG4gIGlkOiAnc2V0Y29udGV4dCcsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnPGNvZGU+LnNldENvbnRleHREZWVwKCk8L2NvZGU+JyxcbiAgaWQ6ICdzZXRjb250ZXh0ZGVlcCcsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnRXhhbXBsZScsXG4gIGlkOiAnZXhhbXBsZScsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnTGlzdGVuZXJzJyxcbiAgaWQ6ICdsaXN0ZW5lcnMnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJzxjb2RlPm9uRW50ZXI8L2NvZGU+JyxcbiAgaWQ6ICdvbmVudGVyJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT5vbkxlYXZlPC9jb2RlPicsXG4gIGlkOiAnb25sZWF2ZScsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnPGNvZGU+b25UcmFuc2l0aW9uPC9jb2RlPicsXG4gIGlkOiAnb250cmFuc2l0aW9uJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdDb250cml2ZWQgRXhhbXBsZScsXG4gIGlkOiAnY29udHJpdmVkLWV4YW1wbGUnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ0d1YXJkcycsXG4gIGlkOiAnZ3VhcmRzJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdSZWNhcCcsXG4gIGlkOiAncmVjYXAnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ05leHQgU3RlcHMnLFxuICBpZDogJ25leHQtc3RlcHMnLFxuICBsZXZlbDogMlxufV07XG5cbmNvbnN0IGxheW91dFByb3BzID0ge1xuICB0b2Ncbn07XG5jb25zdCBNRFhMYXlvdXQgPSBcIndyYXBwZXJcIlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTURYQ29udGVudCh7XG4gIGNvbXBvbmVudHMsXG4gIC4uLnByb3BzXG59KSB7XG4gIHJldHVybiA8TURYTGF5b3V0IHsuLi5sYXlvdXRQcm9wc30gey4uLnByb3BzfSBjb21wb25lbnRzPXtjb21wb25lbnRzfSBtZHhUeXBlPVwiTURYTGF5b3V0XCI+XG5cbiAgICA8cD57YFRoZSBzdGF0ZSBtYWNoaW5lIGlzIG9uZSBvZiB0aGUgbW9zdCBpbXBvcnRhbnQgdG9vbHMgYSBzdGF0ZXNtaXRoIGNhbiBoYXZlIGluIGhpcyBiZWx0LiBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwiaHR0cHM6Ly94c3RhdGUuanMub3JnL1wiXG4gICAgICB9fT57YFhTdGF0ZWB9PC9hPntgIGlzIHRoZSBjdXJyZW50IGtpbmcgb2YgdGhlIEphdmFTY3JpcHQgc3RhdGUgbWFjaGluZSB3b3JsZC4gWmVkdXggaXMgbm90IG91dCB0byBjaGFuZ2UgdGhhdCwgaW4gZmFjdCB3ZSBtYXkgYnVpbGQgYW4gb2ZmaWNpYWwgWFN0YXRlIFplZHV4IGludGVncmF0aW9uIHNvb24uYH08L3A+XG4gICAgPHA+e2BIb3dldmVyLCBaZWR1eCBkb2VzIHByb3ZpZGUgYSBtaW5pbWFsIHN0YXRlIG1hY2hpbmUgaW1wbGVtZW50YXRpb24gb3V0IG9mIHRoZSBib3guIFRoZXNlIHN0YXRlIG1hY2hpbmVzIHVzZSBhIGhpZ2gtbGV2ZWwsIFR5cGVTY3JpcHQtZmlyc3QgZGVzaWduIHRoYXQncyBtZWFudCB0byBoYW5kbGUgc2ltcGxlIGNhc2VzIGV4dHJlbWVseSB3ZWxsLiBGb3IgbW9yZSBwb3dlciwgdXNlIFhTdGF0ZS5gfTwvcD5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0aXRsZVwiOiBcInlvdSB3aWxsIGxlYXJuOlwiLFxuICAgICAgXCJ0eXBlXCI6IFwidGlwXCJcbiAgICB9fT48cCBwYXJlbnROYW1lPVwiYWRtb25pdGlvblwiPntgSG93IHRvIGNyZWF0ZSBzaW1wbGUgVFMtZmlyc3Qgc3RhdGUgbWFjaGluZXMgYW5kIGFkZCB0cmFuc2l0aW9uIGd1YXJkcyBhbmQgbGlzdGVuZXJzLmB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJjcmVhdGluZy1hLW1hY2hpbmVcIlxuICAgIH19PntgQ3JlYXRpbmcgYSBtYWNoaW5lYH08L2gyPlxuICAgIDxwPntgWmVkdXggcHJvdmlkZXMgYSBzaW5nbGUgaGlnaC1sZXZlbCBpbmplY3RvciBmb3IgY3JlYXRpbmcgYXV0b21hdGljYWxseS10eXBlZCBzdGF0ZSBtYWNoaW5lczogYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5qZWN0TWFjaGluZVN0b3JlKClgfTwvaW5saW5lQ29kZT57YC5gfTwvcD5cbiAgICA8cD57YFBhc3MgYSBmdW5jdGlvbiB0byBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmplY3RNYWNoaW5lU3RvcmUoKWB9PC9pbmxpbmVDb2RlPntgIHRoYXQgYWNjZXB0cyBhIHNpbmdsZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BzdGF0ZWB9PC9pbmxpbmVDb2RlPntgIGZhY3RvcnkgZnVuY3Rpb24gYW5kIHJldHVybnMgYW4gYXJyYXkgb2Ygc3RhdGVzLiBUaGUgZmlyc3Qgc3RhdGUgaW4gdGhlIGFycmF5IGJlY29tZXMgdGhlIGluaXRpYWwgc3RhdGUuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGltcG9ydCB7IGF0b20sIGluamVjdE1hY2hpbmVTdG9yZSB9IGZyb20gJ0B6ZWR1eC9yZWFjdCdcblxuY29uc3QgdHJhZmZpY0xpZ2h0QXRvbSA9IGF0b20oJ3RyYWZmaWNMaWdodCcsICgpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoc3RhdGUgPT4gW1xuICAgIHN0YXRlKCdncmVlbicpLCAvLyA8LSB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgIHN0YXRlKCd5ZWxsb3cnKSxcbiAgICBzdGF0ZSgncmVkJyksXG4gIF0pXG5cbiAgcmV0dXJuIHN0b3JlXG59KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BUaGlzIGNyZWF0ZXMgYSBzdGF0ZSBtYWNoaW5lIHdpdGggMyBzdGF0ZXM6IGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGdyZWVuYH08L2lubGluZUNvZGU+e2AsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHllbGxvd2B9PC9pbmxpbmVDb2RlPntgLCBhbmQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgcmVkYH08L2lubGluZUNvZGU+e2AuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGdyZWVuYH08L2lubGluZUNvZGU+e2AgaXMgdGhlIGluaXRpYWwgc3RhdGUuIEJ1dCB0aGlzIG1hY2hpbmUgaXMgc3R1Y2sgaW4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZ3JlZW5gfTwvaW5saW5lQ29kZT57YCBmb3JldmVyISBUbyBjaGFuZ2UgdGhhdCwgeW91IG5lZWQgdG8gZ2l2ZSBpdCB0cmFuc2l0aW9uczpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3Qgc3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoc3RhdGUgPT4gW1xuICBzdGF0ZSgnZ3JlZW4nKS5vbigndGltZXInLCAneWVsbG93JyksXG4gIHN0YXRlKCd5ZWxsb3cnKS5vbigndGltZXInLCAncmVkJyksXG4gIHN0YXRlKCdyZWQnKS5vbigndGltZXInLCAnZ3JlZW4nKSxcbl0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFVzZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Aub24oZXZlbnQsIG5leHRTdGF0ZSlgfTwvaW5saW5lQ29kZT57YCB0byBhZGQgdHJhbnNpdGlvbnMgdG8gdGhlIG1hY2hpbmUncyBzdGF0ZXMuIE5vdyB0aGUgbWFjaGluZSBjYW4gdHJhbnNpdGlvbiBmcm9tIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGdyZWVuYH08L2lubGluZUNvZGU+e2AgLT4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgeWVsbG93YH08L2lubGluZUNvZGU+e2AgLT4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgcmVkYH08L2lubGluZUNvZGU+e2AgLT4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZ3JlZW5gfTwvaW5saW5lQ29kZT57YCAtPiBldGMuIGluIGEgbG9vcC4gVGhlIG1hY2hpbmUgd2lsbCB0cmFuc2l0aW9uIHdoZW4gaXQgcmVjZWl2ZXMgdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHRpbWVyYH08L2lubGluZUNvZGU+e2AgZXZlbnQuYH08L3A+XG4gICAgPHA+e2BOb3cgLi4uIGhvdyBkbyB5b3Ugc2VuZCB0aGF0IGV2ZW50IHRvIHRoZSBtYWNoaW5lP2B9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm1hY2hpbmVzdG9yZVwiXG4gICAgfX0+e2BNYWNoaW5lU3RvcmVgfTwvaDI+XG4gICAgPHA+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluamVjdE1hY2hpbmVTdG9yZSgpYH08L2lubGluZUNvZGU+e2AgcmV0dXJucyBhIHNwZWNpYWwgc3RvcmUgY2FsbGVkIGEgTWFjaGluZVN0b3JlLiBNYWNoaW5lU3RvcmUgZXh0ZW5kcyB0aGUgWmVkdXggU3RvcmUgY2xhc3MgYW5kIGFkZHMgc29tZSBzdGF0ZSBtYWNoaW5lIGZ1bmN0aW9uYWxpdHkuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGltcG9ydCB7IGluamVjdE1hY2hpbmVTdG9yZSwgTWFjaGluZVN0b3JlIH0gZnJvbSAnQHplZHV4L3JlYWN0J1xuXG5jb25zdCBleGFtcGxlQXRvbSA9IGF0b20oJ2V4YW1wbGUnLCAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKCgpID0+IFtdKVxuXG4gIHN0b3JlIGluc3RhbmNlb2YgTWFjaGluZVN0b3JlIC8vIHRydWVcbn0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0eXBlXCI6IFwidGlwXCJcbiAgICB9fT48cCBwYXJlbnROYW1lPVwiYWRtb25pdGlvblwiPntgV2hpbGUgeW91IGNhbiBpbnN0YW50aWF0ZSB0aGUgTWFjaGluZVN0b3JlIGNsYXNzIHlvdXJzZWxmLCBpdCdzIGhpZ2hseSByZWNvbW1lbmRlZCB0byB1c2UgaGVscGVycyBsaWtlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluamVjdE1hY2hpbmVTdG9yZSgpYH08L2lubGluZUNvZGU+e2AgZm9yIHRoZSBhdXRvbWF0aWMgVFMgdHlwZXMuYH08L3A+PC9hZG1vbml0aW9uPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcInNlbmRcIlxuICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJoM1wiPntgLnNlbmQoKWB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BVc2UgdGhpcyB0byBzZW5kIGV2ZW50cyB0byB0aGUgc3RvcmUsIHRyaWdnZXJpbmcgc3RhdGUgdHJhbnNpdGlvbnM6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXNlbmQtZXhhbXBsZSByZXN1bHRWYXI9b3V0cHV0XCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwic2VuZC1leGFtcGxlXCIsXG4gICAgICAgIFwicmVzdWx0VmFyXCI6IFwib3V0cHV0XCJcbiAgICAgIH19PntgY29uc3QgdHJhZmZpY0xpZ2h0QXRvbSA9IGF0b20oJ3RyYWZmaWNMaWdodCcsICgpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoc3RhdGUgPT4gW1xuICAgIHN0YXRlKCdncmVlbicpLm9uKCd0aW1lcicsICd5ZWxsb3cnKSxcbiAgICBzdGF0ZSgneWVsbG93Jykub24oJ3RpbWVyJywgJ3JlZCcpLFxuICAgIHN0YXRlKCdyZWQnKS5vbigndGltZXInLCAnZ3JlZW4nKSxcbiAgXSlcblxuICByZXR1cm4gc3RvcmVcbn0pXG5cbmNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7IGlkOiAnc2VuZC1leGFtcGxlJyB9KVxuY29uc3QgeyBzdG9yZSB9ID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKHRyYWZmaWNMaWdodEF0b20pXG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHN0b3JlLmdldFN0YXRlKClcbnN0b3JlLnNlbmQoJ3RpbWVyJylcbmNvbnN0IG5leHRTdGF0ZSA9IHN0b3JlLmdldFN0YXRlKClcbmNvbnN0IG91dHB1dCA9IHsgaW5pdGlhbFN0YXRlLCBuZXh0U3RhdGUgfVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidHlwZVwiOiBcInRpcFwiXG4gICAgfX0+PHAgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj57YFRoZSBzdG9yZSByZXR1cm5lZCBmcm9tIHRoZSBzdGF0ZSBmYWN0b3J5IGB9PGVtIHBhcmVudE5hbWU9XCJwXCI+e2Bpc2B9PC9lbT57YCB0aGUgYXRvbSBpbnN0YW5jZSdzIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5zdG9yZWB9PC9pbmxpbmVDb2RlPntgLiBTaW5jZSB0aGlzIGV4YW1wbGUgcmV0dXJuZWQgYSBNYWNoaW5lU3RvcmUsIHlvdSBjYW4gYWNjZXNzIHRoZSBtYWNoaW5lJ3MgbWV0aG9kcyBkaXJlY3RseSBvbiB0aGUgaW5zdGFuY2UncyBzdG9yZSAtIGUuZy4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5zdGFuY2Uuc3RvcmUuc2VuZCgndGltZXInKWB9PC9pbmxpbmVDb2RlPntgLiBUaGlzIGhhcyBmdWxsIFR5cGVTY3JpcHQgc3VwcG9ydCB0b28hYH08L3A+PC9hZG1vbml0aW9uPlxuICAgIDxwPntgRm9yIFR5cGVTY3JpcHQgdXNlcnMsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5zZW5kKClgfTwvaW5saW5lQ29kZT57YCBvbmx5IGFjY2VwdHMgc3RyaW5ncyB0aGF0IHdlcmUgc3BlY2lmaWVkIGFzIGV2ZW50IG5hbWVzIGR1cmluZyBtYWNoaW5lIGNyZWF0aW9uLiBJbiB0aGlzIGV4YW1wbGUsIHBhc3NpbmcgYW55dGhpbmcgYnV0IHRoZSBzdHJpbmcgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgJ3RpbWVyJ2B9PC9pbmxpbmVDb2RlPntgIGdpdmVzIGEgVFMgZXJyb3I6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YHNlbmQoJ3RpbWUnKSAvLyBBcmd1bWVudCBvZiB0eXBlICdcInRpbWVcIicgaXMgbm90IGFzc2lnbmFibGUgdG8gcGFyYW1ldGVyIG9mIHR5cGUgJ1widGltZXJcIidcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgVGhlIG1hY2hpbmUgd2lsbCBvbmx5IHRyYW5zaXRpb24gaWYgdGhlIGN1cnJlbnQgc3RhdGUgaGFzIGEgdHJhbnNpdGlvbiBzcGVjaWZpZWQgZm9yIHRoZSBwYXNzZWQgZXZlbnQuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKHN0YXRlID0+IFtcbiAgc3RhdGUoJ2lkbGUnKS5vbignbW92ZScsICdhbmltYXRpbmcnKVxuICBzdGF0ZSgnYW5pbWF0aW5nJykub24oJ2ZpbmlzaCcsICdpZGxlJylcbl0pXG5cbnN0b3JlLmdldFZhbHVlKCkgLy8gJ2lkbGUnXG5zdG9yZS5zZW5kKCdmaW5pc2gnKSAvLyBkb2VzIG5vdGhpbmdcbnN0b3JlLmdldFZhbHVlKCkgLy8gJ2lkbGUnXG5zdG9yZS5zZW5kKCdtb3ZlJylcbnN0b3JlLmdldFZhbHVlKCkgLy8gJ2FuaW1hdGluZydcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcImlzXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDNcIj57YC5pcygpYH08L2lubGluZUNvZGU+PC9oMz5cbiAgICA8cD57YFJldHVybnMgdHJ1ZSBpZiB0aGUgbWFjaGluZSdzIGN1cnJlbnQgc3RhdGUgaXMgdGhlIHBhc3NlZCBzdGF0ZSBzdHJpbmcuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPWlzLWV4YW1wbGUgcmVzdWx0VmFyPW91dHB1dFwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcImlzLWV4YW1wbGVcIixcbiAgICAgICAgXCJyZXN1bHRWYXJcIjogXCJvdXRwdXRcIlxuICAgICAgfX0+e2Bjb25zdCB0cmFmZmljTGlnaHRBdG9tID0gYXRvbSgndHJhZmZpY0xpZ2h0JywgKCkgPT4ge1xuICBjb25zdCBzdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShzdGF0ZSA9PiBbXG4gICAgc3RhdGUoJ2dyZWVuJykub24oJ3RpbWVyJywgJ3llbGxvdycpLFxuICAgIHN0YXRlKCd5ZWxsb3cnKS5vbigndGltZXInLCAncmVkJyksXG4gICAgc3RhdGUoJ3JlZCcpLm9uKCd0aW1lcicsICdncmVlbicpLFxuICBdKVxuXG4gIHJldHVybiBzdG9yZVxufSlcblxuY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHsgaWQ6ICdpcy1leGFtcGxlJyB9KVxuXG4vLyBib3RoIC5pcyBhbmQgLnNlbmQgYXJlIGJvdW5kIGZ1bmN0aW9uIHByb3BlcnRpZXMgKGRlc3RydWN0dXJpbmcgaXMgZmluZSk6XG5jb25zdCB7IGlzLCBzZW5kIH0gPSBlY29zeXN0ZW0uZ2V0SW5zdGFuY2UodHJhZmZpY0xpZ2h0QXRvbSkuc3RvcmVcblxuc2VuZCgndGltZXInKVxuc2VuZCgndGltZXInKVxuY29uc3Qgb3V0cHV0ID0gaXMoJ3JlZCcpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YEZvciBUUyB1c2VycywgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLmlzKClgfTwvaW5saW5lQ29kZT57YCBvbmx5IGFjY2VwdHMgc3RyaW5ncyB0aGF0IHdlcmUgc3BlY2lmaWVkIGFzIHN0YXRlIG5hbWVzIGR1cmluZyBtYWNoaW5lIGNyZWF0aW9uLiBJbiB0aGlzIGV4YW1wbGUsIHBhc3NpbmcgYW55dGhpbmcgYnV0IHRoZSBzdHJpbmdzIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YCdncmVlbidgfTwvaW5saW5lQ29kZT57YCwgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgJ3llbGxvdydgfTwvaW5saW5lQ29kZT57YCwgb3IgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgJ3JlZCdgfTwvaW5saW5lQ29kZT57YCBnaXZlcyBhIFRTIGVycm9yOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2BpcygneWVsbG8nKSAvLyBBcmd1bWVudCBvZiB0eXBlICdcInllbGxvXCInIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhcmFtZXRlciBvZiB0eXBlICdcImdyZWVuXCIgfCBcInllbGxvd1wiIHwgXCJyZWRcIidcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcImdldHZhbHVlXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDNcIj57YC5nZXRWYWx1ZSgpYH08L2lubGluZUNvZGU+PC9oMz5cbiAgICA8cD57YFJldHVybnMgdGhlIG1hY2hpbmUncyBjdXJyZW50IHN0cmluZyB2YWx1ZTpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19Pntgc3RvcmUuZ2V0VmFsdWUoKSAvLyBncmVlblxuc3RvcmUuc2VuZCgndGltZXInKVxuc3RvcmUuZ2V0VmFsdWUoKSAvLyB5ZWxsb3dcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcInN0YXRlLXNoYXBlXCJcbiAgICB9fT57YFN0YXRlIFNoYXBlYH08L2gzPlxuICAgIDxwPntgVGhlIE1hY2hpbmVTdG9yZSdzIHN0YXRlIGlzIGFuIG9iamVjdCBsaWtlIHRoZSBmb2xsb3dpbmc6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YHN0b3JlLmdldFN0YXRlKClcbi8vIHtcbi8vICAgY29udGV4dDogdW5kZWZpbmVkLFxuLy8gICB2YWx1ZTogJ2dyZWVuJyxcbi8vIH1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2AudmFsdWVgfTwvaW5saW5lQ29kZT57YCBpcyB0aGUgY3VycmVudCBzdHJpbmcgc3RhdGUgb2YgdGhlIG1hY2hpbmUuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YC8vIFRoZXNlIHR3byBsaW5lcyBhcmUgZXF1aXZhbGVudDpcbm1hY2hpbmVTdG9yZS5nZXRTdGF0ZSgpLnZhbHVlID09PSAnZ3JlZW4nXG5tYWNoaW5lU3RvcmUuaXMoJ2dyZWVuJylcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgV2UnbGwgbG9vayBhdCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2AuY29udGV4dGB9PC9pbmxpbmVDb2RlPntgIG5leHQ6YH08L3A+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwiY29udGV4dFwiXG4gICAgfX0+e2BDb250ZXh0YH08L2gyPlxuICAgIDxwPntgTWFjaGluZVN0b3JlcyBjYW4gaG9sZCBleHRyYSBzdGF0ZSwgYmVzaWRlcyB0aGUgdmFsdWUgc3RyaW5nLiBUaGlzIGV4dHJhIHN0YXRlIGlzIGNhbGxlZCBjb250ZXh0LiBDb250ZXh0IG11c3QgYmUgYW4gb2JqZWN0IChvciBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2B1bmRlZmluZWRgfTwvaW5saW5lQ29kZT57YCkuYH08L3A+XG4gICAgPHA+e2BZb3UgY2FuIHBhc3MgdGhlIGluaXRpYWwgY29udGV4dCBhcyB0aGUgMm5kIHBhcmFtIHRvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluamVjdE1hY2hpbmVTdG9yZSgpYH08L2lubGluZUNvZGU+e2A6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKHN0YXRlc0ZhY3RvcnksIGluaXRpYWxDb250ZXh0KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwiZ2V0Y29udGV4dFwiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2AuZ2V0Q29udGV4dCgpYH08L2lubGluZUNvZGU+PC9oMz5cbiAgICA8cD57YFJldHVybnMgdGhlIGN1cnJlbnQgY29udGV4dCB2YWx1ZS4gQW4gYWxpYXMgZm9yIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YG1hY2hpbmVTdG9yZS5nZXRTdGF0ZSgpLmNvbnRleHRgfTwvaW5saW5lQ29kZT57YDpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgLy8gVGhlc2UgdHdvIGxpbmVzIGFyZSBlcXVpdmFsZW50OlxubWFjaGluZVN0b3JlLmdldFN0YXRlKCkuY29udGV4dFxubWFjaGluZVN0b3JlLmdldENvbnRleHQoKVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwic2V0Y29udGV4dFwiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2Auc2V0Q29udGV4dCgpYH08L2lubGluZUNvZGU+PC9oMz5cbiAgICA8cD57YFNldHMgdGhlIHN0b3JlJ3MgY29udGV4dCB2YWx1ZS4gQWNjZXB0cyBmdW5jdGlvbiBvdmVybG9hZHMuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YC8vIFRoZXNlIGFyZSBhbGwgZXF1aXZhbGVudDpcbm1hY2hpbmVTdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PiAoeyAuLi5zdGF0ZSwgY29udGV4dDogbmV3Q29udGV4dCB9KSlcbm1hY2hpbmVTdG9yZS5zZXRDb250ZXh0KG5ld0NvbnRleHQpXG5tYWNoaW5lU3RvcmUuc2V0Q29udGV4dChjb250ZXh0ID0+IG5ld0NvbnRleHQpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJzZXRjb250ZXh0ZGVlcFwiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2Auc2V0Q29udGV4dERlZXAoKWB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BEZWVwbHkgbWVyZ2VzIHRoZSBwYXNzZWQgY29udGV4dCB2YWx1ZSBpbnRvIHRoZSBleGlzdGluZyBjb250ZXh0LiBBY2NlcHRzIGZ1bmN0aW9uIG92ZXJsb2Fkcy5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgLy8gVGhlc2UgYXJlIGFsbCBlcXVpdmFsZW50OlxubWFjaGluZVN0b3JlLnNldFN0YXRlRGVlcCh7IGNvbnRleHQ6IG5ld0NvbnRleHQgfSlcbm1hY2hpbmVTdG9yZS5zZXRDb250ZXh0RGVlcChuZXdDb250ZXh0KVxubWFjaGluZVN0b3JlLnNldENvbnRleHREZWVwKGNvbnRleHQgPT4gbmV3Q29udGV4dClcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxhZG1vbml0aW9uIHsuLi57XG4gICAgICBcInR5cGVcIjogXCJ3YXJuaW5nXCJcbiAgICB9fT48cCBwYXJlbnROYW1lPVwiYWRtb25pdGlvblwiPntgSnVzdCBsaWtlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5zZXRTdGF0ZURlZXAoKWB9PC9pbmxpbmVDb2RlPntgLCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Auc2V0Q29udGV4dERlZXAoKWB9PC9pbmxpbmVDb2RlPntgIGlzIG9ubHkgZm9yIHVwZGF0aW5nIHN0YXRlIC0gaXQgY2Fubm90IGJlIHVzZWQgdG8gZGVsZXRlIGtleXMuIFVzZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Auc2V0Q29udGV4dCgpYH08L2lubGluZUNvZGU+e2AgZm9yIHRoYXQuYH08L3A+PC9hZG1vbml0aW9uPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcImV4YW1wbGVcIlxuICAgIH19PntgRXhhbXBsZWB9PC9oMz5cbiAgICA8cD57YEhlcmUncyBhbiBleGFtcGxlIHVzaW5nIGNvbnRleHQgdG8ga2VlcCB0cmFjayBvZiBob3cgbWFueSB0aW1lcyBhIHRoZW1lIHRvZ2dsZXIgdG9nZ2xlczpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXN0YXRlLW1hY2hpbmVzL2NvbnRleHQgcmVzdWx0VmFyPVRoZW1lXCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwic3RhdGUtbWFjaGluZXMvY29udGV4dFwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIlRoZW1lXCJcbiAgICAgIH19PntgY29uc3QgdGhlbWVBdG9tID0gYXRvbSgndGhlbWUnLCAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKFxuICAgIHN0YXRlID0+IFtcbiAgICAgIHN0YXRlKCdsaWdodCcpLm9uKCd0b2dnbGUnLCAnZGFyaycpLFxuICAgICAgc3RhdGUoJ2RhcmsnKS5vbigndG9nZ2xlJywgJ2xpZ2h0JyksXG4gICAgXSxcbiAgICB7IGNvdW50OiAwIH0sXG4gICAge1xuICAgICAgb25UcmFuc2l0aW9uOiBtYWNoaW5lID0+XG4gICAgICAgIG1hY2hpbmUuc2V0Q29udGV4dChjb250ZXh0ID0+ICh7IGNvdW50OiBjb250ZXh0LmNvdW50ICsgMSB9KSksXG4gICAgfVxuICApXG5cbiAgLy8geW91IGNhbiBhbGlhcyBzdG9yZSBtZXRob2RzIG9uIGV4cG9ydHMgZm9yIHVzZSBpbiBcXGB1c2VBdG9tU3RhdGVcXGA6XG4gIHJldHVybiBhcGkoc3RvcmUpLnNldEV4cG9ydHMoeyBzZW5kOiBzdG9yZS5zZW5kIH0pXG59KVxuXG5mdW5jdGlvbiBUaGVtZSgpIHtcbiAgY29uc3QgW3sgY29udGV4dCwgdmFsdWUgfSwgeyBzZW5kIH1dID0gdXNlQXRvbVN0YXRlKHRoZW1lQXRvbSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgc3R5bGU9e3ZhbHVlID09PSAnZGFyaycgPyB7IGJhY2tncm91bmQ6ICcjNDQ0JywgY29sb3I6ICcjZmZmJyB9IDoge319PlxuICAgICAgPGxhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICBjaGVja2VkPXt2YWx1ZSA9PT0gJ2RhcmsnfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiBzZW5kKCd0b2dnbGUnKX1cbiAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAvPlxuICAgICAgICA8c3Bhbj57dmFsdWV9IG1vZGU8L3NwYW4+XG4gICAgICA8L2xhYmVsPlxuICAgICAgPGRpdj5Ub2dnbGUgQ291bnQ6IHtjb250ZXh0LmNvdW50fTwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRoaXMgZXhhbXBsZSBhbHNvIG1hZGUgdXNlIG9mIGFuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YG9uVHJhbnNpdGlvbmB9PC9pbmxpbmVDb2RlPntgIGZ1bmN0aW9uLiBUaGlzIGlzIGNhbGxlZCBhIGxpc3RlbmVyLmB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcImxpc3RlbmVyc1wiXG4gICAgfX0+e2BMaXN0ZW5lcnNgfTwvaDI+XG4gICAgPHA+e2BMaXN0ZW5lcnMgY2FuIGJlIHVzZWQgdG8gcnVuIHNpZGUgZWZmZWN0cyB3aGVuIHRoZSBzdGF0ZSBtYWNoaW5lIHRyYW5zaXRpb25zIHRvIGEgbmV3IHN0YXRlLiBUaGVyZSBhcmUgMyBraW5kczogYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgb25FbnRlcmB9PC9pbmxpbmVDb2RlPntgLCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BvbkxlYXZlYH08L2lubGluZUNvZGU+e2AsIGFuZCB0aGUgdW5pdmVyc2FsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YG9uVHJhbnNpdGlvbmB9PC9pbmxpbmVDb2RlPntgLmB9PC9wPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm9uZW50ZXJcIlxuICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJoM1wiPntgb25FbnRlcmB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BUaGlzIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHRvIGluZGl2aWR1YWwgc3RhdGVzIHZpYSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BzdGF0ZS5vbkVudGVyKClgfTwvaW5saW5lQ29kZT57YC4gSGVyZSdzIGFuIGV4YW1wbGUgdXNpbmcgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIHRvIHNlbmQgYSByZXF1ZXN0IHdoZW4gdGhlIG1hY2hpbmUgZW50ZXJzIHRoZSAnZmV0Y2hpbmcnIHN0YXRlOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCByZXF1ZXN0U3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoXG4gIHN0YXRlID0+IFtcbiAgICBzdGF0ZSgnaWRsZScpLm9uKCdmZXRjaCcsICdmZXRjaGluZycpLFxuICAgIHN0YXRlKCdmZXRjaGluZycpXG4gICAgICAub24oJ3N1Y2NlZWQnLCAnc3VjY2VzcycpXG4gICAgICAub24oJ2ZhaWwnLCAnZmFpbHVyZScpXG4gICAgICAub25FbnRlcihhc3luYyBtYWNoaW5lID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2goJy90b2RvcycpLnRoZW4oZGF0YSA9PiBkYXRhLmpzb24oKSlcbiAgICAgICAgICBtYWNoaW5lLnNldENvbnRleHREZWVwKHsgZGF0YSB9KVxuICAgICAgICAgIG1hY2hpbmUuc2VuZCgnc3VjY2VlZCcpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbWFjaGluZS5zZXRDb250ZXh0RGVlcCh7IGVycm9yIH0pXG4gICAgICAgICAgbWFjaGluZS5zZW5kKCdmYWlsJylcbiAgICAgICAgfVxuICAgICAgfSksXG4gIF0sXG4gIHsgZGF0YTogbnVsbCwgZXJyb3I6IG51bGwgfVxuKVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidHlwZVwiOiBcIm5vdGVcIlxuICAgIH19PjxwIHBhcmVudE5hbWU9XCJhZG1vbml0aW9uXCI+e2BGb3IgVFMgdXNlcnM6IGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5vbkVudGVyKClgfTwvaW5saW5lQ29kZT57YCBoYXMgbGltaXRlZCB0eXBlIHN1cHBvcnQsIHNpbmNlIHRoZSBtYWNoaW5lJ3MgZnVsbCB0eXBlIGhhc24ndCBiZWVuIGluZmVycmVkIHlldC4gVGhlIGFib3ZlIGV4YW1wbGUgd2lsbCB3b3JrIGJlY2F1c2UgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIGlzIHBsYWNlZCBhZnRlciB0aGUgdHdvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5vbigpYH08L2lubGluZUNvZGU+e2AgY2FsbHMgZm9yIHRoZSAnZmV0Y2hpbmcnIHN0YXRlLiBXaGVuIHlvdSBuZWVkIGFjY2VzcyB0byBiZXR0ZXIgdHlwZXMsIHVzZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BvblRyYW5zaXRpb25gfTwvaW5saW5lQ29kZT57YCBpbnN0ZWFkLmB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJvbmxlYXZlXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDNcIj57YG9uTGVhdmVgfTwvaW5saW5lQ29kZT48L2gzPlxuICAgIDxwPntgVGhpcyBsaXN0ZW5lciBpcyBhdHRhY2hlZCB0byBpbmRpdmlkdWFsIHN0YXRlcyB2aWEgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3RhdGUub25MZWF2ZSgpYH08L2lubGluZUNvZGU+e2AuIEhlcmUncyBhbiBleGFtcGxlIHVzaW5nIGJvdGggYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIGFuZCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Aub25MZWF2ZSgpYH08L2lubGluZUNvZGU+e2AgdG8gc2V0IGFuZCBjbGVhciBhIHRpbWVvdXQ6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHRpbWVvdXRTdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShcbiAgc3RhdGUgPT4gW1xuICAgIHN0YXRlKCdpZGxlJykub24oJ3N0YXJ0VGltZXInLCAnd2FpdGluZycpLFxuICAgIHN0YXRlKCd3YWl0aW5nJylcbiAgICAgIC5vbignY2FuY2VsJywgJ2lkbGUnKVxuICAgICAgLm9uKCd0aW1lb3V0JywgJ2lkbGUnKVxuICAgICAgLm9uRW50ZXIobWFjaGluZSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIG1hY2hpbmUuc2V0Q29udGV4dCh7IGhhbmRsZTogbnVsbCB9KVxuICAgICAgICAgIG1hY2hpbmUuc2VuZCgndGltZW91dCcpXG4gICAgICAgIH0sIDEwMDApXG5cbiAgICAgICAgbWFjaGluZS5zZXRDb250ZXh0KHsgaGFuZGxlIH0pXG4gICAgICB9KVxuICAgICAgLm9uTGVhdmUoYXN5bmMgbWFjaGluZSA9PiB7XG4gICAgICAgIGNvbnN0IHsgaGFuZGxlIH0gPSBtYWNoaW5lLmdldENvbnRleHQoKVxuXG4gICAgICAgIGlmICghaGFuZGxlKSByZXR1cm5cblxuICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKVxuICAgICAgICBtYWNoaW5lLnNldENvbnRleHQoeyBoYW5kbGU6IG51bGwgfSlcbiAgICAgIH0pLFxuICBdLFxuICB7IGhhbmRsZTogbnVsbCB9XG4pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0eXBlXCI6IFwibm90ZVwiXG4gICAgfX0+PHAgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj57YEZvciBUUyB1c2VyczogTGlrZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Aub25FbnRlcigpYH08L2lubGluZUNvZGU+e2AsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5vbkxlYXZlKClgfTwvaW5saW5lQ29kZT57YCBoYXMgbGltaXRlZCB0eXBlIHN1cHBvcnQsIHNpbmNlIHRoZSBtYWNoaW5lJ3MgZnVsbCB0eXBlIGhhc24ndCBiZWVuIGluZmVycmVkIHlldC4gV2hlbiB5b3UgbmVlZCBhY2Nlc3MgdG8gYmV0dGVyIHR5cGVzLCB1c2UgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgb25UcmFuc2l0aW9uYH08L2lubGluZUNvZGU+e2AgaW5zdGVhZC5gfTwvcD48L2FkbW9uaXRpb24+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwib250cmFuc2l0aW9uXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDNcIj57YG9uVHJhbnNpdGlvbmB9PC9pbmxpbmVDb2RlPjwvaDM+XG4gICAgPHA+e2BUaGlzIGlzIHRoZSBjYXRjaC1hbGwgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGNhbGxlZCBldmVyeSB0aW1lIHRoZSBzdGF0ZSBtYWNoaW5lIHRyYW5zaXRpb25zLiBUaGlzIGxpc3RlbmVyIGhhcyBmdWxsIHR5cGUgc3VwcG9ydCwgc28gdXNlIHRoaXMgd2hlbiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BvbkVudGVyYH08L2lubGluZUNvZGU+e2AgYW5kIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YG9uTGVhdmVgfTwvaW5saW5lQ29kZT57YCB0eXBlcyBhcmUgaW5zdWZmaWNpZW50LmB9PC9wPlxuICAgIDxwPntgVGhlIDNyZCBwYXJhbWV0ZXIgdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5qZWN0TWFjaGluZVN0b3JlKClgfTwvaW5saW5lQ29kZT57YCBpcyBhIGNvbmZpZyBvYmplY3Q6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKHN0YXRlc0ZhY3RvcnksIGluaXRpYWxDb250ZXh0LCBjb25maWcpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFBhc3MgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgb25UcmFuc2l0aW9uYH08L2lubGluZUNvZGU+e2AgYXMgcGFydCBvZiB0aGlzIGNvbmZpZ2B9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCB0b2dnbGVNYWNoaW5lID0gaW5qZWN0TWFjaGluZVN0b3JlKFxuICBzdGF0ZSA9PiBbc3RhdGUoJ29uJykub24oJ3RvZ2dsZScsICdvZmYnKSwgc3RhdGUoJ29mZicpLm9uKCd0b2dnbGUnLCAnb24nKV0sXG4gIHsgb25UcmFuc2l0aW9uIH1cbilcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcImNvbnRyaXZlZC1leGFtcGxlXCJcbiAgICB9fT57YENvbnRyaXZlZCBFeGFtcGxlYH08L2gyPlxuICAgIDxwPntgVGhlIG9ibGlnYXRvcnkgZ2FyYWdlIGRvb3Igc3RhdGUgbWFjaGluZSBleGFtcGxlOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgZWNvc3lzdGVtSWQ9c3RhdGUtbWFjaGluZXMvZG9vciByZXN1bHRWYXI9TWFjaGluZVwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcInN0YXRlLW1hY2hpbmVzL2Rvb3JcIixcbiAgICAgICAgXCJyZXN1bHRWYXJcIjogXCJNYWNoaW5lXCJcbiAgICAgIH19PntgY29uc3QgZG9vckF0b20gPSBhdG9tKCdkb29yJywgKCkgPT4ge1xuICBjb25zdCBzdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShcbiAgICBzdGF0ZSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWVvdXQgPSBtYWNoaW5lID0+IHtcbiAgICAgICAgY29uc3QgeyBoYW5kbGUgfSA9IG1hY2hpbmUuZ2V0Q29udGV4dCgpXG5cbiAgICAgICAgaWYgKGhhbmRsZSkgY2xlYXJUaW1lb3V0KGhhbmRsZSlcblxuICAgICAgICBjb25zdCBuZXdIYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBtYWNoaW5lLnNldENvbnRleHQoeyBoYW5kbGU6IG51bGwgfSlcbiAgICAgICAgICBtYWNoaW5lLnNlbmQoJ3RpbWVvdXQnKVxuICAgICAgICB9LCAxMDAwKVxuXG4gICAgICAgIG1hY2hpbmUuc2V0Q29udGV4dCh7IGhhbmRsZTogbmV3SGFuZGxlIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIHN0YXRlKCdvcGVuJykub24oJ2NsaWNrJywgJ2Nsb3NpbmcnKSxcbiAgICAgICAgc3RhdGUoJ29wZW5pbmcnKVxuICAgICAgICAgIC5vbignY2xpY2snLCAnY2xvc2luZycpXG4gICAgICAgICAgLm9uKCd0aW1lb3V0JywgJ29wZW4nKVxuICAgICAgICAgIC5vbkVudGVyKHN0YXJ0VGltZW91dCksXG4gICAgICAgIHN0YXRlKCdjbG9zZWQnKS5vbignY2xpY2snLCAnb3BlbmluZycpLFxuICAgICAgICBzdGF0ZSgnY2xvc2luZycpXG4gICAgICAgICAgLm9uKCdjbGljaycsICdvcGVuaW5nJylcbiAgICAgICAgICAub24oJ3RpbWVvdXQnLCAnY2xvc2VkJylcbiAgICAgICAgICAub25FbnRlcihzdGFydFRpbWVvdXQpLFxuICAgICAgXVxuICAgIH0sXG4gICAgeyBoYW5kbGU6IG51bGwgfVxuICApXG5cbiAgcmV0dXJuIHN0b3JlXG59KVxuXG5mdW5jdGlvbiBNYWNoaW5lKCkge1xuICBjb25zdCB7IHZhbHVlIH0gPSB1c2VBdG9tVmFsdWUoZG9vckF0b20pXG4gIGNvbnN0IHsgc2VuZCB9ID0gdXNlQXRvbUluc3RhbmNlKGRvb3JBdG9tKS5zdG9yZVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXY+U3RhdGU6IHt2YWx1ZX08L2Rpdj5cbiAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2VuZCgnY2xpY2snKX0+RmlyZSBDbGljazwvYnV0dG9uPlxuICAgIDwvPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJndWFyZHNcIlxuICAgIH19PntgR3VhcmRzYH08L2gyPlxuICAgIDxwPntgR3VhcmRzIGFyZSBmdW5jdGlvbnMgdGhhdCBjb25kaXRpb25hbGx5IHByZXZlbnQgdGhlIG1hY2hpbmUgZnJvbSBwZXJmb3JtaW5nIGEgdmFsaWQgdHJhbnNpdGlvbi4gR3VhcmRzIGNhbiBiZSBzZXQgcGVyLXRyYW5zaXRpb24gdmlhIHRoZSAzcmQgcGFyYW0gdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3RhdGUub24oKWB9PC9pbmxpbmVDb2RlPntgOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCBtYXliZU1vdmVTdG9yZSA9IGluamVjdE1hY2hpbmVTdG9yZShcbiAgc3RhdGUgPT4gW3N0YXRlKCdpZGxlJykub24oJ21vdmUnLCAnbW92aW5nJywgY29udGV4dCA9PiAhY29udGV4dC5pc0Zyb3plbildLFxuICB7IGlzRnJvemVuOiBmYWxzZSB9XG4pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRoZXNlIGd1YXJkcyByZWNlaXZlIHRoZSBtYWNoaW5lJ3MgY29udGV4dCBhcyB0aGVpciBvbmx5IHBhcmFtZXRlci4gUmV0dXJuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHRydWVgfTwvaW5saW5lQ29kZT57YCB0byBhbGxvdyB0aGUgdHJhbnNpdGlvbiBvciBhbnkgZmFsc3kgdmFsdWUgdG8gcHJldmVudCBpdC4gVGhlIGFib3ZlIG1hY2hpbmUgd2lsbCBvbmx5IHRyYW5zaXRpb24gZnJvbSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpZGxlYH08L2lubGluZUNvZGU+e2AgdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgbW92aW5nYH08L2lubGluZUNvZGU+e2AgaWYgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgY29udGV4dC5pc0Zyb3plbmB9PC9pbmxpbmVDb2RlPntgIGlzIGZhbHN5LmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgZWNvc3lzdGVtSWQ9c3RhdGUtbWFjaGluZXMvZ3VhcmRzIHJlc3VsdFZhcj1Db250cm9sc1wiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcInN0YXRlLW1hY2hpbmVzL2d1YXJkc1wiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIkNvbnRyb2xzXCJcbiAgICAgIH19PntgY29uc3QgbWF5YmVNb3ZpbmdBdG9tID0gYXRvbSgnbWF5YmVNb3ZpbmcnLCAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKFxuICAgIHN0YXRlID0+IFtcbiAgICAgIC8vIHRoZSBndWFyZCEgUHJldmVudCB0aGlzIHRyYW5zaXRpb24gaWYgd2UncmUgZnJvemVuOlxuICAgICAgc3RhdGUoJ2lkbGUnKS5vbignbW92ZScsICdtb3ZpbmcnLCBjb250ZXh0ID0+ICFjb250ZXh0LmlzRnJvemVuKSxcbiAgICAgIHN0YXRlKCdtb3ZpbmcnKVxuICAgICAgICAub24oJ3N0b3AnLCAnaWRsZScpXG4gICAgICAgIC5vbkVudGVyKG1hY2hpbmUgPT4ge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gbWFjaGluZS5zZW5kKCdzdG9wJyksIDEwMDApXG4gICAgICAgIH0pLFxuICAgIF0sXG4gICAgeyBpc0Zyb3plbjogZmFsc2UgfVxuICApXG5cbiAgcmV0dXJuIGFwaShzdG9yZSkuc2V0RXhwb3J0cyh7XG4gICAgdG9nZ2xlRnJlZXplOiAoKSA9PlxuICAgICAgc3RvcmUuc2V0Q29udGV4dChjb250ZXh0ID0+ICh7IGlzRnJvemVuOiAhY29udGV4dC5pc0Zyb3plbiB9KSksXG4gICAgaXM6IHN0b3JlLmlzLFxuICAgIG1vdmU6ICgpID0+IHN0b3JlLnNlbmQoJ21vdmUnKSxcbiAgfSlcbn0pXG5cbmZ1bmN0aW9uIENvbnRyb2xzKCkge1xuICBjb25zdCBbeyBjb250ZXh0IH0sIHsgdG9nZ2xlRnJlZXplLCBpcywgbW92ZSB9XSA9IHVzZUF0b21TdGF0ZShcbiAgICBtYXliZU1vdmluZ0F0b21cbiAgKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxkaXY+LSB7Y29udGV4dC5pc0Zyb3plbiA/ICdGcm96ZW4nIDogJ0FsbCBTeXN0ZW1zIEdvJ30gLTwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIGJhY2tncm91bmQ6ICdjeWFuJyxcbiAgICAgICAgICBoZWlnaHQ6IDUwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAxcycsXG4gICAgICAgICAgd2lkdGg6IDUwLFxuICAgICAgICAgIC4uLihpcygnbW92aW5nJykgJiYgeyBsZWZ0OiA1MCB9KSxcbiAgICAgICAgfX1cbiAgICAgIC8+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZUZyZWV6ZX0+XG4gICAgICAgIHtjb250ZXh0LmlzRnJvemVuID8gJ1VuZnJlZXplJyA6ICdGcmVlemUnfVxuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e21vdmV9PlxuICAgICAgICBNb3ZlIHtjb250ZXh0LmlzRnJvemVuID8gJyhEb2VzIE5vdGhpbmcpJyA6ICcnfVxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIClcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgWW91IGNhbiBhbHNvIGNvbmZpZ3VyZSB0aGUgTWFjaGluZVN0b3JlIHdpdGggYSB1bml2ZXJzYWwgZ3VhcmQgdmlhIHRoZSBjb25maWcgb2JqZWN0OmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2AuLi5cbmNvbnN0IGd1YXJkID0gKHN0YXRlLCBuZXh0VmFsdWUpID0+IHtcbiAgLy8gdXNlIHRoZSBjdXJyZW50IHN0YXRlIG9iamVjdCBhbmQvb3IgbmV4dFZhbHVlIHN0cmluZyB0byBkZXRlcm1pbmUgaWYgdGhlXG4gIC8vIHRyYW5zaXRpb24gc2hvdWxkIGJlIGFsbG93ZWQgKHJldHVybiB0cnVlIGlmIHllcylcbn1cbmNvbnN0IHN0b3JlID0gaW5qZWN0TWFjaGluZVN0b3JlKHN0YXRlc0ZhY3RvcnksIGluaXRpYWxDb250ZXh0LCB7IGd1YXJkIH0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRoaXMgZ3VhcmQgcmVjZWl2ZXMgdGhlIGZ1bGwgY3VycmVudCBzdGF0ZSAoYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgeyBjb250ZXh0LCB2YWx1ZSB9YH08L2lubGluZUNvZGU+e2ApIGFuZCB0aGUgbmFtZSBvZiB0aGUgcGVuZGluZyB0cmFuc2l0aW9uIHN0YXRlLiBIZXJlJ3MgYW4gZXhhbXBsZSB1c2luZyBhIHVuaXZlcnNhbCBndWFyZCB0byBwYXVzZSB0aGUgbWFjaGluZSBhZnRlciBhbGxvd2luZyBpdCB0byBjeWNsZSBiYWNrIHRvIHRoZSBzdGFydDpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXN0YXRlLW1hY2hpbmVzL2d1YXJkIHJlc3VsdFZhcj1DeWNsZXJcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJzdGF0ZS1tYWNoaW5lcy9ndWFyZFwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIkN5Y2xlclwiXG4gICAgICB9fT57YGNvbnN0IGN5Y2xpbmdBdG9tID0gYXRvbSgnY3ljbGluZycsICgpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RNYWNoaW5lU3RvcmUoXG4gICAgc3RhdGUgPT4gW1xuICAgICAgc3RhdGUoJ2EnKS5vbignY3ljbGUnLCAnYicpLFxuICAgICAgc3RhdGUoJ2InKS5vbignY3ljbGUnLCAnYycpLFxuICAgICAgc3RhdGUoJ2MnKS5vbignY3ljbGUnLCAnYScpLFxuICAgIF0sXG4gICAgeyBpc1BhdXNlZDogZmFsc2UgfSxcbiAgICB7XG4gICAgICBndWFyZDogKHN0YXRlLCBuZXh0VmFsdWUpID0+ICFzdGF0ZS5jb250ZXh0LmlzUGF1c2VkIHx8IG5leHRWYWx1ZSAhPT0gJ2InLFxuICAgIH1cbiAgKVxuXG4gIGluamVjdEVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlID0gc2V0SW50ZXJ2YWwoKCkgPT4gc3RvcmUuc2VuZCgnY3ljbGUnKSwgMTAwMClcblxuICAgIHJldHVybiAoKSA9PiBjbGVhckludGVydmFsKGhhbmRsZSlcbiAgfSwgW10pXG5cbiAgcmV0dXJuIGFwaShzdG9yZSkuc2V0RXhwb3J0cyh7XG4gICAgdG9nZ2xlUGF1c2U6ICgpID0+XG4gICAgICBzdG9yZS5zZXRDb250ZXh0KGNvbnRleHQgPT4gKHsgaXNQYXVzZWQ6ICFjb250ZXh0LmlzUGF1c2VkIH0pKSxcbiAgfSlcbn0pXG5cbmZ1bmN0aW9uIEN5Y2xlcigpIHtcbiAgY29uc3QgW3sgY29udGV4dCwgdmFsdWUgfSwgeyB0b2dnbGVQYXVzZSB9XSA9IHVzZUF0b21TdGF0ZShjeWNsaW5nQXRvbSlcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICB7dmFsdWV9eycgJ31cbiAgICAgICAge2NvbnRleHQuaXNQYXVzZWRcbiAgICAgICAgICA/IHZhbHVlID09PSAnYSdcbiAgICAgICAgICAgID8gJyhwYXVzZWQpJ1xuICAgICAgICAgICAgOiAnKGZpbmlzaGluZyBjeWNsZS4uLiknXG4gICAgICAgICAgOiBudWxsfVxuICAgICAgPC9kaXY+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZVBhdXNlfT5cbiAgICAgICAge2NvbnRleHQuaXNQYXVzZWQgPyAnUmVzdW1lJyA6ICdQYXVzZSd9XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwicmVjYXBcIlxuICAgIH19PntgUmVjYXBgfTwvaDI+XG4gICAgPHVsPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgVXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2BpbmplY3RNYWNoaW5lU3RvcmUoKWB9PC9pbmxpbmVDb2RlPntgIHRvIGNyZWF0ZSBhIE1hY2hpbmVTdG9yZS5gfVxuICAgICAgICA8dWwgcGFyZW50TmFtZT1cImxpXCI+XG4gICAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgc3RhdGUub24oKWB9PC9pbmxpbmVDb2RlPntgIGFkZHMgdHJhbnNpdGlvbnMgYmV0d2VlbiBzdGF0ZXMuYH08L2xpPlxuICAgICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHN0YXRlLm9uRW50ZXIoKWB9PC9pbmxpbmVDb2RlPntgIGFuZCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgc3RhdGUub25MZWF2ZSgpYH08L2lubGluZUNvZGU+e2AgYWRkIGxpc3RlbmVycyB0byBpbmRpdmlkdWFsIHN0YXRlcy5gfTwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgQ29udGV4dCBpcyB0aGUgTWFjaGluZVN0b3JlJ3MgXCJleHRyYSBzdGF0ZVwiLiBJdCBtdXN0IGJlIGFuIG9iamVjdCAob3IgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHVuZGVmaW5lZGB9PC9pbmxpbmVDb2RlPntgKS5gfVxuICAgICAgICA8dWwgcGFyZW50TmFtZT1cImxpXCI+XG4gICAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgU2V0IGluaXRpYWwgY29udGV4dCB3aXRoIHRoZSAybmQgcGFyYW0gdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YGluamVjdE1hY2hpbmVTdG9yZSgpYH08L2lubGluZUNvZGU+e2AuYH08L2xpPlxuICAgICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YEdldCBjb250ZXh0IHdpdGggYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YG1hY2hpbmVTdG9yZS5nZXRDb250ZXh0KClgfTwvaW5saW5lQ29kZT48L2xpPlxuICAgICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFNldCBjb250ZXh0IHdpdGggYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YG1hY2hpbmVTdG9yZS5zZXRDb250ZXh0KClgfTwvaW5saW5lQ29kZT57YCBvciBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgbWFjaGluZVN0b3JlLnNldENvbnRleHREZWVwKClgfTwvaW5saW5lQ29kZT48L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFVzZSBndWFyZHMgdG8gcHJldmVudCB2YWxpZCB0cmFuc2l0aW9ucy5gfTwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BBZGQgYSB1bml2ZXJzYWwgZ3VhcmQgYW5kIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2BvblRyYW5zaXRpb25gfTwvaW5saW5lQ29kZT57YCBsaXN0ZW5lciB2aWEgdGhlIDNyZCBwYXJhbSB0byBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgaW5qZWN0TWFjaGluZVN0b3JlKClgfTwvaW5saW5lQ29kZT57YC5gfTwvbGk+XG4gICAgPC91bD5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJuZXh0LXN0ZXBzXCJcbiAgICB9fT57YE5leHQgU3RlcHNgfTwvaDI+XG4gICAgPHA+e2BUaGF0J3MgYWJvdXQgaXQgZm9yIHRoZSBrZXkgZmVhdHVyZXMgb2YgWmVkdXguIFlvdSdyZSByZWFkeSB0byBqdW1wIGluIGFuZCBnZXQgYnVpbGRpbmchIENoZWNrIG91dCB0aGUgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcIi4uL2FkdmFuY2VkL2NvbXBsZXgtcGFyYW1zXCJcbiAgICAgIH19PntgYWR2YW5jZWQgZ3VpZGVzYH08L2E+e2AgYW5kIGB9PGEgcGFyZW50TmFtZT1cInBcIiB7Li4ue1xuICAgICAgICBcImhyZWZcIjogXCIuLi9hcGkvYXBpLW92ZXJ2aWV3XCJcbiAgICAgIH19PntgQVBJIGRvY3NgfTwvYT57YCBhcyBuZWVkZWQuIEhhcHB5IGNvZGluZyFgfTwvcD5cbiAgICA8L01EWExheW91dD47XG59XG47XG5NRFhDb250ZW50LmlzTURYQ29tcG9uZW50ID0gdHJ1ZTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIm1keCIsImZyb250TWF0dGVyIiwiaWQiLCJ0aXRsZSIsImNvbnRlbnRUaXRsZSIsInVuZGVmaW5lZCIsIm1ldGFkYXRhIiwiYXNzZXRzIiwidG9jIiwidmFsdWUiLCJsZXZlbCIsImxheW91dFByb3BzIiwiTURYTGF5b3V0IiwiTURYQ29udGVudCIsImNvbXBvbmVudHMiLCJwcm9wcyIsImlzTURYQ29tcG9uZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3975\n')}}]);