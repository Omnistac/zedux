"use strict";(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[8839],{9674:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "assets": function() { return /* binding */ assets; },\n/* harmony export */   "contentTitle": function() { return /* binding */ contentTitle; },\n/* harmony export */   "default": function() { return /* binding */ MDXContent; },\n/* harmony export */   "frontMatter": function() { return /* binding */ frontMatter; },\n/* harmony export */   "metadata": function() { return /* binding */ metadata; },\n/* harmony export */   "toc": function() { return /* binding */ toc; }\n/* harmony export */ });\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7462);\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3366);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7294);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3905);\nvar _excluded=["components"];/* @jsxRuntime classic */ /* @jsx mdx */ /* @jsxFrag React.Fragment */var frontMatter={id:\'suspense\',title:\'Suspense\'};var contentTitle=undefined;var metadata={"unversionedId":"walkthrough/suspense","id":"walkthrough/suspense","title":"Suspense","description":"Atoms are extremely flexible when working with React suspense. The Atom APIs walkthrough showed how to set an atom instance\'s promise. It\'s time to learn how this works with suspense.","source":"@site/docs/walkthrough/suspense.mdx","sourceDirName":"walkthrough","slug":"/walkthrough/suspense","permalink":"/zedux/docs/walkthrough/suspense","draft":false,"editUrl":"https://github.com/Omnistac/zedux/tree/master/docs/walkthrough/suspense.mdx","tags":[],"version":"current","frontMatter":{"id":"suspense","title":"Suspense"},"sidebar":"react","previous":{"title":"React Context","permalink":"/zedux/docs/walkthrough/react-context"},"next":{"title":"Query Atoms","permalink":"/zedux/docs/walkthrough/query-atoms"}};var assets={};var toc=[{value:\'Quick Overview\',id:\'quick-overview\',level:2},{value:\'Changing the Promise\',id:\'changing-the-promise\',level:2},{value:\'Forwarding Promises\',id:\'forwarding-promises\',level:2},{value:\'No Thanks\',id:\'no-thanks\',level:2},{value:\'Traditional Flow\',id:\'traditional-flow\',level:3},{value:\'Manual Suspense\',id:\'manual-suspense\',level:2},{value:\'Recap\',id:\'recap\',level:2},{value:\'Next Steps\',id:\'next-steps\',level:2}];var layoutProps={toc:toc};var MDXLayout="wrapper";function MDXContent(_ref){var components=_ref.components,props=(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(_ref,_excluded);return (0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)(MDXLayout,(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Atoms are extremely flexible when working with React suspense. The ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"atom-apis"},"Atom APIs")," walkthrough showed how to set an atom instance\'s promise. It\'s time to learn how this works with suspense."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"title":"you will learn","type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"admonition"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"How to efficiently use atoms as suspending resources in React"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Best practices for creating and updating promises"))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"quick-overview"},"Quick Overview"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"To quickly review setting promises with an ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/classes/AtomApi"},"AtomApi"),", let\'s create an example atom that we\'ll use throughout this walkthrough:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { api, atom } from \'@zedux/react\'\\n\\nconst fetcherAtom = atom(\'fetcher\', (url: string) => {\\n  const store = injectStore(undefined, { subscribe: false })\\n\\n  const promise = fetch(url).then(async result =>\\n    store.setState(await result.json())\\n  )\\n\\n  return api(store).setPromise(promise)\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"When ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"fetcherAtom")," is used in a component (e.g. via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/hooks/useAtomValue"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"useAtomValue()"))," or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/hooks/useAtomInstance"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"useAtomInstance()")),"), Zedux will throw the promise, allowing React to suspend. When the promise completes, React will recreate the component and Zedux will no longer throw the now-resolved promise."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"subscribe: false")," is essential to make this approach work. Without it the promise will make this atom reevaluate every time it completes, which would recreate the promise, making an infinite loop."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We\'ll look at a better approach in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"query-atoms"},"query atoms walkthrough"),", but this\'ll do for now."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can access the promise directly on the atom instance via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/classes/AtomInstance#promise"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"instance.promise")),". You can use this outside React to wait until an atom instance is \\"ready\\":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const fetchUsersInstance = myEcosystem.getInstance(fetcherAtom, [\'/users\'])\\nfetchUsersInstance.promise.then(() => {\\n  // users are loaded!\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"changing-the-promise"},"Changing the Promise"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"If the promise reference changes on a subsequent evaluation, Zedux will make all components using the atom instance suspend again."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"fetcherAtom")," above will create a new promise reference every time it evaluates. But with the current implementation, it has no dependencies that could cause it to reevaluate!"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Well, as the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"selectors"},"the selectors walkthrough")," showed, Zedux gives you lots of control over when evaluations happen. In this case, you can use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/classes/AtomInstance#invalidate"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"instance.invalidate()"))," to force the atom to reevaluate:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"function RefreshUsers() {\\n  const instance = useAtomInstance(fetcherAtom, [\'/users\'])\\n\\n  return <button onClick={() => instance.invalidate()}>Refresh</button>\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"When this button is clicked, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"fetcherAtom")," will reevaluate and create a new promise reference, causing all components using it to suspend again."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Here\'s a live sandbox putting this all together:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=suspense/first-example resultVar=Users","live":true,"ecosystemId":"suspense/first-example","resultVar":"Users"},"// mock stuff for example:\\nconst mockUsers = [\'Joe\', \'Jim\', \'Sally\', \'Jill\', \'Bob\', \'Jamie\']\\nconst mockFetch = () =>\\n  new Promise(resolve =>\\n    setTimeout(\\n      () => resolve([...mockUsers].sort(() => Math.random() - 0.5)),\\n      1500\\n    )\\n  )\\n\\n// start here:\\nconst fetcherAtom = atom(\'fetcher\', (url: string) => {\\n  const store = injectStore([], { subscribe: false }) // important!\\n  const promise = mockFetch(url).then(data => store.setState(data))\\n\\n  return api(store).setPromise(promise)\\n})\\n\\nfunction RefreshUsers() {\\n  const instance = useAtomInstance(fetcherAtom, [\'/users\'], {\\n    suspend: false,\\n  })\\n\\n  return <button onClick={() => instance.invalidate()}>Refresh</button>\\n}\\n\\nfunction UsersList() {\\n  const users = useAtomValue(fetcherAtom, [\'/users\'])\\n\\n  return (\\n    <ul>\\n      {users.map(user => (\\n        <li key={user}>{user}</li>\\n      ))}\\n    </ul>\\n  )\\n}\\n\\nfunction Users() {\\n  return (\\n    <>\\n      <Suspense fallback={<div>fetching users...</div>}>\\n        <UsersList />\\n      </Suspense>\\n      <RefreshUsers />\\n    </>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"When the \\"Refresh\\" button is clicked, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"fetcherAtom")," reevaluates, creates a new promise, and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"UsersList")," suspends again."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"forwarding-promises"},"Forwarding Promises"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Say we have a graph where atom ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"a")," injects atom ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"b")," which injects atom ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"c"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre"},"a -> b -> c\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Atoms ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"a")," and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"b")," don\'t set promises, but atom ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"c")," does. Now say we use atom ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"a")," in a component. Since we didn\'t set a promise in atom ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"a")," itself, React won\'t suspend. Atom ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"c"),"\'s promise will be ignored!"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Currently, to get around this, promises must be forwarded manually:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const atomC = atom(\'c\', () => {\\n  return api().setPromise(myPromise)\\n})\\n\\nconst atomB = atom(\'b\', () => {\\n  const c = injectAtomInstance(atomC)\\n\\n  return api().setPromise(c.promise)\\n})\\n\\nconst atomA = atom(\'a\', () => {\\n  const b = injectAtomInstance(atomB)\\n\\n  return api().setPromise(b.promise)\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This gives you full flexibility over the async flow. You can use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"Promise.all()")," yourself. Or use a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"Promise.race()")," or any helper or library for handling parallelization or serialization of promises - you can even use RxJS."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { from } from \'rxjs\'\\n\\nconst rxAtom = atom(\'rx\', () => {\\n  const asyncInstance = injectAtomInstance(myAsyncAtom)\\n\\n  return injectPromise(\\n    controller => {\\n      const subscription = from(asyncInstance.promise)\\n        .pipe(doCrazyRxStuff)\\n        .subscribe(result => store.setState(result))\\n\\n      controller.signal.addEventListener(\'abort\', () => {\\n        subscription.unsubscribe()\\n      })\\n    },\\n    [asyncInstance.promise]\\n  )\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We\'ll see ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/injectors/injectPromise"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"injectPromise()"))," at work in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"query-atoms"},"query atoms walkthrough"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"While this async flexibility is intentional, it is boilerplate-heavy compared to Recoil\'s async-by-default approach. Though of course, lots of this boilerplate can be abstracted away using custom injectors."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We may create an atom type someday that mimics Recoil. In fact, an early prototype of Zedux already did. We pivoted from that approach because we needed full control over asynchrony. In fact, it\'s the main reason we decided against using Recoil at Omnistac."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Zedux\'s async power and predictably synchronous graph updates are well worth the trade-off of async boilerplate, especially in more complex apps."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We may also make it possible for ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../advanced/plugins"},"plugins")," to implement automatic promise forwarding. If that sounds useful to you, feel free to open an issue about it!"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"no-thanks"},"No Thanks"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Suspense is on by default in Zedux. But suspense is still technically experimental in React. To turn it off in Zedux, either don\'t set a promise on your atoms (you can still use exported refs or even store state to pass promises around) or use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"suspend: false")," hook option:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"useAtomValue(myAtom, [\'param-1\', \'param-2\'], { suspend: false })\\nuseAtomValue(ParamlessTemplate, [], { suspend: false })\\nuseAtomValue(anAtomInstance, [], { suspend: false })\\n\\n// the same applies for all hooks that take atoms, e.g.:\\nuseAtomState(myAtom, [\'param-1\', \'param-2\'], { suspend: false })\\n\\nuseAtomInstance(ParamlessTemplate, [], { suspend: false })\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"traditional-flow"},"Traditional Flow"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"In components that you don\'t want to suspend, the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"isSuccess"),", ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"isError"),", and ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"isLoading")," flags can be used to implement old-school loading flows:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"function UserList() {\\n  const { data, isLoading, isSuccess } = useAtomValue(fetchUsersAtom, [], {\\n    suspend: false,\\n  })\\n\\n  if (isLoading) return <div>Loading...</div>\\n\\n  if (isSuccess) return data.map(user => <User id={user.id} />)\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"manual-suspense"},"Manual Suspense"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You don\'t have to use Zedux\'s built-in suspense handling. Here\'s an example exporting a promise and handling suspense by hand:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=suspense/manual-suspense resultVar=App","live":true,"ecosystemId":"suspense/manual-suspense","resultVar":"App"},"// mock stuff for example:\\nconst mockFetch = (url: string) =>\\n  new Promise(resolve =>\\n    setTimeout(() => resolve(`Fetched url: \\"${url}\\"!`), 1500)\\n  )\\n\\n// start here:\\nconst fetcherAtom = atom(\'fetcher\', (url: string) => {\\n  const store = injectStore({ isLoading: true })\\n  const promiseRef = injectRef()\\n\\n  promiseRef.current = injectMemo(\\n    () =>\\n      mockFetch(url).then(data => {\\n        store.setState({\\n          data,\\n          isLoading: false,\\n        })\\n      }),\\n    [url]\\n  )\\n\\n  return api(store).setExports({ promiseRef })\\n})\\n\\nfunction Username() {\\n  const [\\n    { data, isError, isLoading },\\n    { promiseRef },\\n  ] = useAtomState(fetcherAtom, [\'/user\'])\\n\\n  if (isError) {\\n    throw \'User request failed\'\\n  } else if (isLoading) {\\n    throw promiseRef.current\\n  }\\n\\n  return <div>{data}</div>\\n}\\n\\nfunction App() {\\n  return (\\n    <Suspense fallback={<div>Falling Back</div>}>\\n      <Username />\\n    </Suspense>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"recap"},"Recap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Make an atom a suspending resource in React by setting its promise via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},".setPromise()")," on a returned Atom API."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Promises must be forwarded manually to trigger React suspense."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Turn suspense off with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"{ suspend: false }")," or just don\'t set a promise.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"next-steps"},"Next Steps"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"One of the most efficient ways to trigger React suspense is with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"query-atoms"},"query atoms"),"."));};MDXContent.isMDXComponent=true;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxXQUFXLENBQUUsS0FBSywwOUJBZ0RqQixDQUFNLENBQ1gsbUVBQ0UsSUFBSSxDQUFFLE9BQU8sVUFDRSxDQUNqQix1RUFDRSxtRUFBSSxVQUFVLENBQUMsSUFBSSw0RUFBNEUsMkVBQVksVUFBVSxDQUFDLElBQUksa0JBQStCLDRCQUFpQyxDQUMxTCxtRUFBSSxVQUFVLENBQUMsSUFBSSxtRUFBd0UsQ0FDM0YsbUVBQUksVUFBVSxDQUFDLElBQUksNEJBQTRCLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLHVCQUFvQyxpQ0FBc0MsQ0FDakosQ0FDTCxtRUFDRSxJQUFJLENBQUUsWUFBWSxlQUNFLENBQ3RCLDBJQUF3RSxrRUFBRyxVQUFVLENBQUMsR0FBRyxDQUNyRixNQUFNLENBQUUsYUFBYSxnQkFDRCxLQUFTLENBQ3JCLENBQ2hCLENBQ0EsQ0FDQUQsVUFBVSxDQUFDRyxjQUFjLENBQUcsSUFBSSIsInNvdXJjZXMiOlsid2VicGFjazovL3plZHV4LWRvY3MvLi9kb2NzL3dhbGt0aHJvdWdoL3N1c3BlbnNlLm1keD9iNzFhIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG4vKiBAanN4UnVudGltZSBjbGFzc2ljICovXG4vKiBAanN4IG1keCAqL1xuLyogQGpzeEZyYWcgUmVhY3QuRnJhZ21lbnQgKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1keCB9IGZyb20gJ0BtZHgtanMvcmVhY3QnO1xuXG5cbmV4cG9ydCBjb25zdCBmcm9udE1hdHRlciA9IHtcblx0aWQ6ICdzdXNwZW5zZScsXG5cdHRpdGxlOiAnU3VzcGVuc2UnXG59O1xuZXhwb3J0IGNvbnN0IGNvbnRlbnRUaXRsZSA9IHVuZGVmaW5lZDtcbmV4cG9ydCBjb25zdCBtZXRhZGF0YSA9IHtcbiAgXCJ1bnZlcnNpb25lZElkXCI6IFwid2Fsa3Rocm91Z2gvc3VzcGVuc2VcIixcbiAgXCJpZFwiOiBcIndhbGt0aHJvdWdoL3N1c3BlbnNlXCIsXG4gIFwidGl0bGVcIjogXCJTdXNwZW5zZVwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiQXRvbXMgYXJlIGV4dHJlbWVseSBmbGV4aWJsZSB3aGVuIHdvcmtpbmcgd2l0aCBSZWFjdCBzdXNwZW5zZS4gVGhlIEF0b20gQVBJcyB3YWxrdGhyb3VnaCBzaG93ZWQgaG93IHRvIHNldCBhbiBhdG9tIGluc3RhbmNlJ3MgcHJvbWlzZS4gSXQncyB0aW1lIHRvIGxlYXJuIGhvdyB0aGlzIHdvcmtzIHdpdGggc3VzcGVuc2UuXCIsXG4gIFwic291cmNlXCI6IFwiQHNpdGUvZG9jcy93YWxrdGhyb3VnaC9zdXNwZW5zZS5tZHhcIixcbiAgXCJzb3VyY2VEaXJOYW1lXCI6IFwid2Fsa3Rocm91Z2hcIixcbiAgXCJzbHVnXCI6IFwiL3dhbGt0aHJvdWdoL3N1c3BlbnNlXCIsXG4gIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3Mvd2Fsa3Rocm91Z2gvc3VzcGVuc2VcIixcbiAgXCJkcmFmdFwiOiBmYWxzZSxcbiAgXCJlZGl0VXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL09tbmlzdGFjL3plZHV4L3RyZWUvbWFzdGVyL2RvY3Mvd2Fsa3Rocm91Z2gvc3VzcGVuc2UubWR4XCIsXG4gIFwidGFnc1wiOiBbXSxcbiAgXCJ2ZXJzaW9uXCI6IFwiY3VycmVudFwiLFxuICBcImZyb250TWF0dGVyXCI6IHtcbiAgICBcImlkXCI6IFwic3VzcGVuc2VcIixcbiAgICBcInRpdGxlXCI6IFwiU3VzcGVuc2VcIlxuICB9LFxuICBcInNpZGViYXJcIjogXCJyZWFjdFwiLFxuICBcInByZXZpb3VzXCI6IHtcbiAgICBcInRpdGxlXCI6IFwiUmVhY3QgQ29udGV4dFwiLFxuICAgIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3Mvd2Fsa3Rocm91Z2gvcmVhY3QtY29udGV4dFwiXG4gIH0sXG4gIFwibmV4dFwiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIlF1ZXJ5IEF0b21zXCIsXG4gICAgXCJwZXJtYWxpbmtcIjogXCIvemVkdXgvZG9jcy93YWxrdGhyb3VnaC9xdWVyeS1hdG9tc1wiXG4gIH1cbn07XG5leHBvcnQgY29uc3QgYXNzZXRzID0ge1xuXG59O1xuXG5cbmV4cG9ydCBjb25zdCB0b2MgPSBbe1xuICB2YWx1ZTogJ1F1aWNrIE92ZXJ2aWV3JyxcbiAgaWQ6ICdxdWljay1vdmVydmlldycsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnQ2hhbmdpbmcgdGhlIFByb21pc2UnLFxuICBpZDogJ2NoYW5naW5nLXRoZS1wcm9taXNlJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdGb3J3YXJkaW5nIFByb21pc2VzJyxcbiAgaWQ6ICdmb3J3YXJkaW5nLXByb21pc2VzJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdObyBUaGFua3MnLFxuICBpZDogJ25vLXRoYW5rcycsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnVHJhZGl0aW9uYWwgRmxvdycsXG4gIGlkOiAndHJhZGl0aW9uYWwtZmxvdycsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnTWFudWFsIFN1c3BlbnNlJyxcbiAgaWQ6ICdtYW51YWwtc3VzcGVuc2UnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ1JlY2FwJyxcbiAgaWQ6ICdyZWNhcCcsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnTmV4dCBTdGVwcycsXG4gIGlkOiAnbmV4dC1zdGVwcycsXG4gIGxldmVsOiAyXG59XTtcblxuY29uc3QgbGF5b3V0UHJvcHMgPSB7XG4gIHRvY1xufTtcbmNvbnN0IE1EWExheW91dCA9IFwid3JhcHBlclwiXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNRFhDb250ZW50KHtcbiAgY29tcG9uZW50cyxcbiAgLi4ucHJvcHNcbn0pIHtcbiAgcmV0dXJuIDxNRFhMYXlvdXQgey4uLmxheW91dFByb3BzfSB7Li4ucHJvcHN9IGNvbXBvbmVudHM9e2NvbXBvbmVudHN9IG1keFR5cGU9XCJNRFhMYXlvdXRcIj5cblxuICAgIDxwPntgQXRvbXMgYXJlIGV4dHJlbWVseSBmbGV4aWJsZSB3aGVuIHdvcmtpbmcgd2l0aCBSZWFjdCBzdXNwZW5zZS4gVGhlIGB9PGEgcGFyZW50TmFtZT1cInBcIiB7Li4ue1xuICAgICAgICBcImhyZWZcIjogXCJhdG9tLWFwaXNcIlxuICAgICAgfX0+e2BBdG9tIEFQSXNgfTwvYT57YCB3YWxrdGhyb3VnaCBzaG93ZWQgaG93IHRvIHNldCBhbiBhdG9tIGluc3RhbmNlJ3MgcHJvbWlzZS4gSXQncyB0aW1lIHRvIGxlYXJuIGhvdyB0aGlzIHdvcmtzIHdpdGggc3VzcGVuc2UuYH08L3A+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidGl0bGVcIjogXCJ5b3Ugd2lsbCBsZWFyblwiLFxuICAgICAgXCJ0eXBlXCI6IFwidGlwXCJcbiAgICB9fT48dWwgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj5cbiAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgSG93IHRvIGVmZmljaWVudGx5IHVzZSBhdG9tcyBhcyBzdXNwZW5kaW5nIHJlc291cmNlcyBpbiBSZWFjdGB9PC9saT5cbiAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgQmVzdCBwcmFjdGljZXMgZm9yIGNyZWF0aW5nIGFuZCB1cGRhdGluZyBwcm9taXNlc2B9PC9saT5cbiAgICAgIDwvdWw+PC9hZG1vbml0aW9uPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcInF1aWNrLW92ZXJ2aWV3XCJcbiAgICB9fT57YFF1aWNrIE92ZXJ2aWV3YH08L2gyPlxuICAgIDxwPntgVG8gcXVpY2tseSByZXZpZXcgc2V0dGluZyBwcm9taXNlcyB3aXRoIGFuIGB9PGEgcGFyZW50TmFtZT1cInBcIiB7Li4ue1xuICAgICAgICBcImhyZWZcIjogXCIuLi9hcGkvY2xhc3Nlcy9BdG9tQXBpXCJcbiAgICAgIH19PntgQXRvbUFwaWB9PC9hPntgLCBsZXQncyBjcmVhdGUgYW4gZXhhbXBsZSBhdG9tIHRoYXQgd2UnbGwgdXNlIHRocm91Z2hvdXQgdGhpcyB3YWxrdGhyb3VnaDpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgaW1wb3J0IHsgYXBpLCBhdG9tIH0gZnJvbSAnQHplZHV4L3JlYWN0J1xuXG5jb25zdCBmZXRjaGVyQXRvbSA9IGF0b20oJ2ZldGNoZXInLCAodXJsOiBzdHJpbmcpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RTdG9yZSh1bmRlZmluZWQsIHsgc3Vic2NyaWJlOiBmYWxzZSB9KVxuXG4gIGNvbnN0IHByb21pc2UgPSBmZXRjaCh1cmwpLnRoZW4oYXN5bmMgcmVzdWx0ID0+XG4gICAgc3RvcmUuc2V0U3RhdGUoYXdhaXQgcmVzdWx0Lmpzb24oKSlcbiAgKVxuXG4gIHJldHVybiBhcGkoc3RvcmUpLnNldFByb21pc2UocHJvbWlzZSlcbn0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFdoZW4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZmV0Y2hlckF0b21gfTwvaW5saW5lQ29kZT57YCBpcyB1c2VkIGluIGEgY29tcG9uZW50IChlLmcuIHZpYSBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2hvb2tzL3VzZUF0b21WYWx1ZVwiXG4gICAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiYVwiPntgdXNlQXRvbVZhbHVlKClgfTwvaW5saW5lQ29kZT48L2E+e2Agb3IgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcIi4uL2FwaS9ob29rcy91c2VBdG9tSW5zdGFuY2VcIlxuICAgICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImFcIj57YHVzZUF0b21JbnN0YW5jZSgpYH08L2lubGluZUNvZGU+PC9hPntgKSwgWmVkdXggd2lsbCB0aHJvdyB0aGUgcHJvbWlzZSwgYWxsb3dpbmcgUmVhY3QgdG8gc3VzcGVuZC4gV2hlbiB0aGUgcHJvbWlzZSBjb21wbGV0ZXMsIFJlYWN0IHdpbGwgcmVjcmVhdGUgdGhlIGNvbXBvbmVudCBhbmQgWmVkdXggd2lsbCBubyBsb25nZXIgdGhyb3cgdGhlIG5vdy1yZXNvbHZlZCBwcm9taXNlLmB9PC9wPlxuICAgIDxwPntgVXNpbmcgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3Vic2NyaWJlOiBmYWxzZWB9PC9pbmxpbmVDb2RlPntgIGlzIGVzc2VudGlhbCB0byBtYWtlIHRoaXMgYXBwcm9hY2ggd29yay4gV2l0aG91dCBpdCB0aGUgcHJvbWlzZSB3aWxsIG1ha2UgdGhpcyBhdG9tIHJlZXZhbHVhdGUgZXZlcnkgdGltZSBpdCBjb21wbGV0ZXMsIHdoaWNoIHdvdWxkIHJlY3JlYXRlIHRoZSBwcm9taXNlLCBtYWtpbmcgYW4gaW5maW5pdGUgbG9vcC5gfTwvcD5cbiAgICA8cD57YFdlJ2xsIGxvb2sgYXQgYSBiZXR0ZXIgYXBwcm9hY2ggaW4gdGhlIGB9PGEgcGFyZW50TmFtZT1cInBcIiB7Li4ue1xuICAgICAgICBcImhyZWZcIjogXCJxdWVyeS1hdG9tc1wiXG4gICAgICB9fT57YHF1ZXJ5IGF0b21zIHdhbGt0aHJvdWdoYH08L2E+e2AsIGJ1dCB0aGlzJ2xsIGRvIGZvciBub3cuYH08L3A+XG4gICAgPHA+e2BZb3UgY2FuIGFjY2VzcyB0aGUgcHJvbWlzZSBkaXJlY3RseSBvbiB0aGUgYXRvbSBpbnN0YW5jZSB2aWEgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcIi4uL2FwaS9jbGFzc2VzL0F0b21JbnN0YW5jZSNwcm9taXNlXCJcbiAgICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJhXCI+e2BpbnN0YW5jZS5wcm9taXNlYH08L2lubGluZUNvZGU+PC9hPntgLiBZb3UgY2FuIHVzZSB0aGlzIG91dHNpZGUgUmVhY3QgdG8gd2FpdCB1bnRpbCBhbiBhdG9tIGluc3RhbmNlIGlzIFwicmVhZHlcIjpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3QgZmV0Y2hVc2Vyc0luc3RhbmNlID0gbXlFY29zeXN0ZW0uZ2V0SW5zdGFuY2UoZmV0Y2hlckF0b20sIFsnL3VzZXJzJ10pXG5mZXRjaFVzZXJzSW5zdGFuY2UucHJvbWlzZS50aGVuKCgpID0+IHtcbiAgLy8gdXNlcnMgYXJlIGxvYWRlZCFcbn0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJjaGFuZ2luZy10aGUtcHJvbWlzZVwiXG4gICAgfX0+e2BDaGFuZ2luZyB0aGUgUHJvbWlzZWB9PC9oMj5cbiAgICA8cD57YElmIHRoZSBwcm9taXNlIHJlZmVyZW5jZSBjaGFuZ2VzIG9uIGEgc3Vic2VxdWVudCBldmFsdWF0aW9uLCBaZWR1eCB3aWxsIG1ha2UgYWxsIGNvbXBvbmVudHMgdXNpbmcgdGhlIGF0b20gaW5zdGFuY2Ugc3VzcGVuZCBhZ2Fpbi5gfTwvcD5cbiAgICA8cD57YFRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BmZXRjaGVyQXRvbWB9PC9pbmxpbmVDb2RlPntgIGFib3ZlIHdpbGwgY3JlYXRlIGEgbmV3IHByb21pc2UgcmVmZXJlbmNlIGV2ZXJ5IHRpbWUgaXQgZXZhbHVhdGVzLiBCdXQgd2l0aCB0aGUgY3VycmVudCBpbXBsZW1lbnRhdGlvbiwgaXQgaGFzIG5vIGRlcGVuZGVuY2llcyB0aGF0IGNvdWxkIGNhdXNlIGl0IHRvIHJlZXZhbHVhdGUhYH08L3A+XG4gICAgPHA+e2BXZWxsLCBhcyB0aGUgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcInNlbGVjdG9yc1wiXG4gICAgICB9fT57YHRoZSBzZWxlY3RvcnMgd2Fsa3Rocm91Z2hgfTwvYT57YCBzaG93ZWQsIFplZHV4IGdpdmVzIHlvdSBsb3RzIG9mIGNvbnRyb2wgb3ZlciB3aGVuIGV2YWx1YXRpb25zIGhhcHBlbi4gSW4gdGhpcyBjYXNlLCB5b3UgY2FuIHVzZSBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2NsYXNzZXMvQXRvbUluc3RhbmNlI2ludmFsaWRhdGVcIlxuICAgICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImFcIj57YGluc3RhbmNlLmludmFsaWRhdGUoKWB9PC9pbmxpbmVDb2RlPjwvYT57YCB0byBmb3JjZSB0aGUgYXRvbSB0byByZWV2YWx1YXRlOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCJcbiAgICAgIH19PntgZnVuY3Rpb24gUmVmcmVzaFVzZXJzKCkge1xuICBjb25zdCBpbnN0YW5jZSA9IHVzZUF0b21JbnN0YW5jZShmZXRjaGVyQXRvbSwgWycvdXNlcnMnXSlcblxuICByZXR1cm4gPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBpbnN0YW5jZS5pbnZhbGlkYXRlKCl9PlJlZnJlc2g8L2J1dHRvbj5cbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgV2hlbiB0aGlzIGJ1dHRvbiBpcyBjbGlja2VkLCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BmZXRjaGVyQXRvbWB9PC9pbmxpbmVDb2RlPntgIHdpbGwgcmVldmFsdWF0ZSBhbmQgY3JlYXRlIGEgbmV3IHByb21pc2UgcmVmZXJlbmNlLCBjYXVzaW5nIGFsbCBjb21wb25lbnRzIHVzaW5nIGl0IHRvIHN1c3BlbmQgYWdhaW4uYH08L3A+XG4gICAgPHA+e2BIZXJlJ3MgYSBsaXZlIHNhbmRib3ggcHV0dGluZyB0aGlzIGFsbCB0b2dldGhlcjpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXN1c3BlbnNlL2ZpcnN0LWV4YW1wbGUgcmVzdWx0VmFyPVVzZXJzXCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwic3VzcGVuc2UvZmlyc3QtZXhhbXBsZVwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIlVzZXJzXCJcbiAgICAgIH19PntgLy8gbW9jayBzdHVmZiBmb3IgZXhhbXBsZTpcbmNvbnN0IG1vY2tVc2VycyA9IFsnSm9lJywgJ0ppbScsICdTYWxseScsICdKaWxsJywgJ0JvYicsICdKYW1pZSddXG5jb25zdCBtb2NrRmV0Y2ggPSAoKSA9PlxuICBuZXcgUHJvbWlzZShyZXNvbHZlID0+XG4gICAgc2V0VGltZW91dChcbiAgICAgICgpID0+IHJlc29sdmUoWy4uLm1vY2tVc2Vyc10uc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KSksXG4gICAgICAxNTAwXG4gICAgKVxuICApXG5cbi8vIHN0YXJ0IGhlcmU6XG5jb25zdCBmZXRjaGVyQXRvbSA9IGF0b20oJ2ZldGNoZXInLCAodXJsOiBzdHJpbmcpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSBpbmplY3RTdG9yZShbXSwgeyBzdWJzY3JpYmU6IGZhbHNlIH0pIC8vIGltcG9ydGFudCFcbiAgY29uc3QgcHJvbWlzZSA9IG1vY2tGZXRjaCh1cmwpLnRoZW4oZGF0YSA9PiBzdG9yZS5zZXRTdGF0ZShkYXRhKSlcblxuICByZXR1cm4gYXBpKHN0b3JlKS5zZXRQcm9taXNlKHByb21pc2UpXG59KVxuXG5mdW5jdGlvbiBSZWZyZXNoVXNlcnMoKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gdXNlQXRvbUluc3RhbmNlKGZldGNoZXJBdG9tLCBbJy91c2VycyddLCB7XG4gICAgc3VzcGVuZDogZmFsc2UsXG4gIH0pXG5cbiAgcmV0dXJuIDxidXR0b24gb25DbGljaz17KCkgPT4gaW5zdGFuY2UuaW52YWxpZGF0ZSgpfT5SZWZyZXNoPC9idXR0b24+XG59XG5cbmZ1bmN0aW9uIFVzZXJzTGlzdCgpIHtcbiAgY29uc3QgdXNlcnMgPSB1c2VBdG9tVmFsdWUoZmV0Y2hlckF0b20sIFsnL3VzZXJzJ10pXG5cbiAgcmV0dXJuIChcbiAgICA8dWw+XG4gICAgICB7dXNlcnMubWFwKHVzZXIgPT4gKFxuICAgICAgICA8bGkga2V5PXt1c2VyfT57dXNlcn08L2xpPlxuICAgICAgKSl9XG4gICAgPC91bD5cbiAgKVxufVxuXG5mdW5jdGlvbiBVc2VycygpIHtcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPFN1c3BlbnNlIGZhbGxiYWNrPXs8ZGl2PmZldGNoaW5nIHVzZXJzLi4uPC9kaXY+fT5cbiAgICAgICAgPFVzZXJzTGlzdCAvPlxuICAgICAgPC9TdXNwZW5zZT5cbiAgICAgIDxSZWZyZXNoVXNlcnMgLz5cbiAgICA8Lz5cbiAgKVxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BXaGVuIHRoZSBcIlJlZnJlc2hcIiBidXR0b24gaXMgY2xpY2tlZCwgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZmV0Y2hlckF0b21gfTwvaW5saW5lQ29kZT57YCByZWV2YWx1YXRlcywgY3JlYXRlcyBhIG5ldyBwcm9taXNlLCBhbmQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgVXNlcnNMaXN0YH08L2lubGluZUNvZGU+e2Agc3VzcGVuZHMgYWdhaW4uYH08L3A+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwiZm9yd2FyZGluZy1wcm9taXNlc1wiXG4gICAgfX0+e2BGb3J3YXJkaW5nIFByb21pc2VzYH08L2gyPlxuICAgIDxwPntgU2F5IHdlIGhhdmUgYSBncmFwaCB3aGVyZSBhdG9tIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGFgfTwvaW5saW5lQ29kZT57YCBpbmplY3RzIGF0b20gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgYmB9PC9pbmxpbmVDb2RlPntgIHdoaWNoIGluamVjdHMgYXRvbSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BjYH08L2lubGluZUNvZGU+e2A6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLnt9fT57YGEgLT4gYiAtPiBjXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YEF0b21zIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGFgfTwvaW5saW5lQ29kZT57YCBhbmQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgYmB9PC9pbmxpbmVDb2RlPntgIGRvbid0IHNldCBwcm9taXNlcywgYnV0IGF0b20gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgY2B9PC9pbmxpbmVDb2RlPntgIGRvZXMuIE5vdyBzYXkgd2UgdXNlIGF0b20gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgYWB9PC9pbmxpbmVDb2RlPntgIGluIGEgY29tcG9uZW50LiBTaW5jZSB3ZSBkaWRuJ3Qgc2V0IGEgcHJvbWlzZSBpbiBhdG9tIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGFgfTwvaW5saW5lQ29kZT57YCBpdHNlbGYsIFJlYWN0IHdvbid0IHN1c3BlbmQuIEF0b20gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgY2B9PC9pbmxpbmVDb2RlPntgJ3MgcHJvbWlzZSB3aWxsIGJlIGlnbm9yZWQhYH08L3A+XG4gICAgPHA+e2BDdXJyZW50bHksIHRvIGdldCBhcm91bmQgdGhpcywgcHJvbWlzZXMgbXVzdCBiZSBmb3J3YXJkZWQgbWFudWFsbHk6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IGF0b21DID0gYXRvbSgnYycsICgpID0+IHtcbiAgcmV0dXJuIGFwaSgpLnNldFByb21pc2UobXlQcm9taXNlKVxufSlcblxuY29uc3QgYXRvbUIgPSBhdG9tKCdiJywgKCkgPT4ge1xuICBjb25zdCBjID0gaW5qZWN0QXRvbUluc3RhbmNlKGF0b21DKVxuXG4gIHJldHVybiBhcGkoKS5zZXRQcm9taXNlKGMucHJvbWlzZSlcbn0pXG5cbmNvbnN0IGF0b21BID0gYXRvbSgnYScsICgpID0+IHtcbiAgY29uc3QgYiA9IGluamVjdEF0b21JbnN0YW5jZShhdG9tQilcblxuICByZXR1cm4gYXBpKCkuc2V0UHJvbWlzZShiLnByb21pc2UpXG59KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BUaGlzIGdpdmVzIHlvdSBmdWxsIGZsZXhpYmlsaXR5IG92ZXIgdGhlIGFzeW5jIGZsb3cuIFlvdSBjYW4gdXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YFByb21pc2UuYWxsKClgfTwvaW5saW5lQ29kZT57YCB5b3Vyc2VsZi4gT3IgdXNlIGEgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgUHJvbWlzZS5yYWNlKClgfTwvaW5saW5lQ29kZT57YCBvciBhbnkgaGVscGVyIG9yIGxpYnJhcnkgZm9yIGhhbmRsaW5nIHBhcmFsbGVsaXphdGlvbiBvciBzZXJpYWxpemF0aW9uIG9mIHByb21pc2VzIC0geW91IGNhbiBldmVuIHVzZSBSeEpTLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2BpbXBvcnQgeyBmcm9tIH0gZnJvbSAncnhqcydcblxuY29uc3QgcnhBdG9tID0gYXRvbSgncngnLCAoKSA9PiB7XG4gIGNvbnN0IGFzeW5jSW5zdGFuY2UgPSBpbmplY3RBdG9tSW5zdGFuY2UobXlBc3luY0F0b20pXG5cbiAgcmV0dXJuIGluamVjdFByb21pc2UoXG4gICAgY29udHJvbGxlciA9PiB7XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBmcm9tKGFzeW5jSW5zdGFuY2UucHJvbWlzZSlcbiAgICAgICAgLnBpcGUoZG9DcmF6eVJ4U3R1ZmYpXG4gICAgICAgIC5zdWJzY3JpYmUocmVzdWx0ID0+IHN0b3JlLnNldFN0YXRlKHJlc3VsdCkpXG5cbiAgICAgIGNvbnRyb2xsZXIuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4ge1xuICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKVxuICAgICAgfSlcbiAgICB9LFxuICAgIFthc3luY0luc3RhbmNlLnByb21pc2VdXG4gIClcbn0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFdlJ2xsIHNlZSBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2luamVjdG9ycy9pbmplY3RQcm9taXNlXCJcbiAgICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJhXCI+e2BpbmplY3RQcm9taXNlKClgfTwvaW5saW5lQ29kZT48L2E+e2AgYXQgd29yayBpbiB0aGUgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcInF1ZXJ5LWF0b21zXCJcbiAgICAgIH19PntgcXVlcnkgYXRvbXMgd2Fsa3Rocm91Z2hgfTwvYT57YC5gfTwvcD5cbiAgICA8cD57YFdoaWxlIHRoaXMgYXN5bmMgZmxleGliaWxpdHkgaXMgaW50ZW50aW9uYWwsIGl0IGlzIGJvaWxlcnBsYXRlLWhlYXZ5IGNvbXBhcmVkIHRvIFJlY29pbCdzIGFzeW5jLWJ5LWRlZmF1bHQgYXBwcm9hY2guIFRob3VnaCBvZiBjb3Vyc2UsIGxvdHMgb2YgdGhpcyBib2lsZXJwbGF0ZSBjYW4gYmUgYWJzdHJhY3RlZCBhd2F5IHVzaW5nIGN1c3RvbSBpbmplY3RvcnMuYH08L3A+XG4gICAgPHA+e2BXZSBtYXkgY3JlYXRlIGFuIGF0b20gdHlwZSBzb21lZGF5IHRoYXQgbWltaWNzIFJlY29pbC4gSW4gZmFjdCwgYW4gZWFybHkgcHJvdG90eXBlIG9mIFplZHV4IGFscmVhZHkgZGlkLiBXZSBwaXZvdGVkIGZyb20gdGhhdCBhcHByb2FjaCBiZWNhdXNlIHdlIG5lZWRlZCBmdWxsIGNvbnRyb2wgb3ZlciBhc3luY2hyb255LiBJbiBmYWN0LCBpdCdzIHRoZSBtYWluIHJlYXNvbiB3ZSBkZWNpZGVkIGFnYWluc3QgdXNpbmcgUmVjb2lsIGF0IE9tbmlzdGFjLmB9PC9wPlxuICAgIDxwPntgWmVkdXgncyBhc3luYyBwb3dlciBhbmQgcHJlZGljdGFibHkgc3luY2hyb25vdXMgZ3JhcGggdXBkYXRlcyBhcmUgd2VsbCB3b3J0aCB0aGUgdHJhZGUtb2ZmIG9mIGFzeW5jIGJvaWxlcnBsYXRlLCBlc3BlY2lhbGx5IGluIG1vcmUgY29tcGxleCBhcHBzLmB9PC9wPlxuICAgIDxwPntgV2UgbWF5IGFsc28gbWFrZSBpdCBwb3NzaWJsZSBmb3IgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcIi4uL2FkdmFuY2VkL3BsdWdpbnNcIlxuICAgICAgfX0+e2BwbHVnaW5zYH08L2E+e2AgdG8gaW1wbGVtZW50IGF1dG9tYXRpYyBwcm9taXNlIGZvcndhcmRpbmcuIElmIHRoYXQgc291bmRzIHVzZWZ1bCB0byB5b3UsIGZlZWwgZnJlZSB0byBvcGVuIGFuIGlzc3VlIGFib3V0IGl0IWB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm5vLXRoYW5rc1wiXG4gICAgfX0+e2BObyBUaGFua3NgfTwvaDI+XG4gICAgPHA+e2BTdXNwZW5zZSBpcyBvbiBieSBkZWZhdWx0IGluIFplZHV4LiBCdXQgc3VzcGVuc2UgaXMgc3RpbGwgdGVjaG5pY2FsbHkgZXhwZXJpbWVudGFsIGluIFJlYWN0LiBUbyB0dXJuIGl0IG9mZiBpbiBaZWR1eCwgZWl0aGVyIGRvbid0IHNldCBhIHByb21pc2Ugb24geW91ciBhdG9tcyAoeW91IGNhbiBzdGlsbCB1c2UgZXhwb3J0ZWQgcmVmcyBvciBldmVuIHN0b3JlIHN0YXRlIHRvIHBhc3MgcHJvbWlzZXMgYXJvdW5kKSBvciB1c2UgdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHN1c3BlbmQ6IGZhbHNlYH08L2lubGluZUNvZGU+e2AgaG9vayBvcHRpb246YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YHVzZUF0b21WYWx1ZShteUF0b20sIFsncGFyYW0tMScsICdwYXJhbS0yJ10sIHsgc3VzcGVuZDogZmFsc2UgfSlcbnVzZUF0b21WYWx1ZShQYXJhbWxlc3NUZW1wbGF0ZSwgW10sIHsgc3VzcGVuZDogZmFsc2UgfSlcbnVzZUF0b21WYWx1ZShhbkF0b21JbnN0YW5jZSwgW10sIHsgc3VzcGVuZDogZmFsc2UgfSlcblxuLy8gdGhlIHNhbWUgYXBwbGllcyBmb3IgYWxsIGhvb2tzIHRoYXQgdGFrZSBhdG9tcywgZS5nLjpcbnVzZUF0b21TdGF0ZShteUF0b20sIFsncGFyYW0tMScsICdwYXJhbS0yJ10sIHsgc3VzcGVuZDogZmFsc2UgfSlcblxudXNlQXRvbUluc3RhbmNlKFBhcmFtbGVzc1RlbXBsYXRlLCBbXSwgeyBzdXNwZW5kOiBmYWxzZSB9KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwidHJhZGl0aW9uYWwtZmxvd1wiXG4gICAgfX0+e2BUcmFkaXRpb25hbCBGbG93YH08L2gzPlxuICAgIDxwPntgSW4gY29tcG9uZW50cyB0aGF0IHlvdSBkb24ndCB3YW50IHRvIHN1c3BlbmQsIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Bpc1N1Y2Nlc3NgfTwvaW5saW5lQ29kZT57YCwgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaXNFcnJvcmB9PC9pbmxpbmVDb2RlPntgLCBhbmQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaXNMb2FkaW5nYH08L2lubGluZUNvZGU+e2AgZmxhZ3MgY2FuIGJlIHVzZWQgdG8gaW1wbGVtZW50IG9sZC1zY2hvb2wgbG9hZGluZyBmbG93czpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiXG4gICAgICB9fT57YGZ1bmN0aW9uIFVzZXJMaXN0KCkge1xuICBjb25zdCB7IGRhdGEsIGlzTG9hZGluZywgaXNTdWNjZXNzIH0gPSB1c2VBdG9tVmFsdWUoZmV0Y2hVc2Vyc0F0b20sIFtdLCB7XG4gICAgc3VzcGVuZDogZmFsc2UsXG4gIH0pXG5cbiAgaWYgKGlzTG9hZGluZykgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PlxuXG4gIGlmIChpc1N1Y2Nlc3MpIHJldHVybiBkYXRhLm1hcCh1c2VyID0+IDxVc2VyIGlkPXt1c2VyLmlkfSAvPilcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm1hbnVhbC1zdXNwZW5zZVwiXG4gICAgfX0+e2BNYW51YWwgU3VzcGVuc2VgfTwvaDI+XG4gICAgPHA+e2BZb3UgZG9uJ3QgaGF2ZSB0byB1c2UgWmVkdXgncyBidWlsdC1pbiBzdXNwZW5zZSBoYW5kbGluZy4gSGVyZSdzIGFuIGV4YW1wbGUgZXhwb3J0aW5nIGEgcHJvbWlzZSBhbmQgaGFuZGxpbmcgc3VzcGVuc2UgYnkgaGFuZDpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXN1c3BlbnNlL21hbnVhbC1zdXNwZW5zZSByZXN1bHRWYXI9QXBwXCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwic3VzcGVuc2UvbWFudWFsLXN1c3BlbnNlXCIsXG4gICAgICAgIFwicmVzdWx0VmFyXCI6IFwiQXBwXCJcbiAgICAgIH19PntgLy8gbW9jayBzdHVmZiBmb3IgZXhhbXBsZTpcbmNvbnN0IG1vY2tGZXRjaCA9ICh1cmw6IHN0cmluZykgPT5cbiAgbmV3IFByb21pc2UocmVzb2x2ZSA9PlxuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShcXGBGZXRjaGVkIHVybDogXCJcXCR7dXJsfVwiIVxcYCksIDE1MDApXG4gIClcblxuLy8gc3RhcnQgaGVyZTpcbmNvbnN0IGZldGNoZXJBdG9tID0gYXRvbSgnZmV0Y2hlcicsICh1cmw6IHN0cmluZykgPT4ge1xuICBjb25zdCBzdG9yZSA9IGluamVjdFN0b3JlKHsgaXNMb2FkaW5nOiB0cnVlIH0pXG4gIGNvbnN0IHByb21pc2VSZWYgPSBpbmplY3RSZWYoKVxuXG4gIHByb21pc2VSZWYuY3VycmVudCA9IGluamVjdE1lbW8oXG4gICAgKCkgPT5cbiAgICAgIG1vY2tGZXRjaCh1cmwpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIHN0b3JlLnNldFN0YXRlKHtcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICBbdXJsXVxuICApXG5cbiAgcmV0dXJuIGFwaShzdG9yZSkuc2V0RXhwb3J0cyh7IHByb21pc2VSZWYgfSlcbn0pXG5cbmZ1bmN0aW9uIFVzZXJuYW1lKCkge1xuICBjb25zdCBbXG4gICAgeyBkYXRhLCBpc0Vycm9yLCBpc0xvYWRpbmcgfSxcbiAgICB7IHByb21pc2VSZWYgfSxcbiAgXSA9IHVzZUF0b21TdGF0ZShmZXRjaGVyQXRvbSwgWycvdXNlciddKVxuXG4gIGlmIChpc0Vycm9yKSB7XG4gICAgdGhyb3cgJ1VzZXIgcmVxdWVzdCBmYWlsZWQnXG4gIH0gZWxzZSBpZiAoaXNMb2FkaW5nKSB7XG4gICAgdGhyb3cgcHJvbWlzZVJlZi5jdXJyZW50XG4gIH1cblxuICByZXR1cm4gPGRpdj57ZGF0YX08L2Rpdj5cbn1cblxuZnVuY3Rpb24gQXBwKCkge1xuICByZXR1cm4gKFxuICAgIDxTdXNwZW5zZSBmYWxsYmFjaz17PGRpdj5GYWxsaW5nIEJhY2s8L2Rpdj59PlxuICAgICAgPFVzZXJuYW1lIC8+XG4gICAgPC9TdXNwZW5zZT5cbiAgKVxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwicmVjYXBcIlxuICAgIH19PntgUmVjYXBgfTwvaDI+XG4gICAgPHVsPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgTWFrZSBhbiBhdG9tIGEgc3VzcGVuZGluZyByZXNvdXJjZSBpbiBSZWFjdCBieSBzZXR0aW5nIGl0cyBwcm9taXNlIHZpYSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgLnNldFByb21pc2UoKWB9PC9pbmxpbmVDb2RlPntgIG9uIGEgcmV0dXJuZWQgQXRvbSBBUEkuYH08L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgUHJvbWlzZXMgbXVzdCBiZSBmb3J3YXJkZWQgbWFudWFsbHkgdG8gdHJpZ2dlciBSZWFjdCBzdXNwZW5zZS5gfTwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BUdXJuIHN1c3BlbnNlIG9mZiB3aXRoIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2B7IHN1c3BlbmQ6IGZhbHNlIH1gfTwvaW5saW5lQ29kZT57YCBvciBqdXN0IGRvbid0IHNldCBhIHByb21pc2UuYH08L2xpPlxuICAgIDwvdWw+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwibmV4dC1zdGVwc1wiXG4gICAgfX0+e2BOZXh0IFN0ZXBzYH08L2gyPlxuICAgIDxwPntgT25lIG9mIHRoZSBtb3N0IGVmZmljaWVudCB3YXlzIHRvIHRyaWdnZXIgUmVhY3Qgc3VzcGVuc2UgaXMgd2l0aCBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwicXVlcnktYXRvbXNcIlxuICAgICAgfX0+e2BxdWVyeSBhdG9tc2B9PC9hPntgLmB9PC9wPlxuICAgIDwvTURYTGF5b3V0Pjtcbn1cbjtcbk1EWENvbnRlbnQuaXNNRFhDb21wb25lbnQgPSB0cnVlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwibWR4IiwiZnJvbnRNYXR0ZXIiLCJpZCIsInRpdGxlIiwiY29udGVudFRpdGxlIiwidW5kZWZpbmVkIiwibWV0YWRhdGEiLCJhc3NldHMiLCJ0b2MiLCJ2YWx1ZSIsImxldmVsIiwibGF5b3V0UHJvcHMiLCJNRFhMYXlvdXQiLCJNRFhDb250ZW50IiwiY29tcG9uZW50cyIsInByb3BzIiwiaXNNRFhDb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9674\n')}}]);