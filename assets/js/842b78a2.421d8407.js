(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[645],{393:function(e,t,n){"use strict";n.d(t,{u:function(){return V}});var r,o,a,i,s,c,u,l,d,p,f=n(7042),h=n(7749),y=n(3250),v=n(4996),m=n(3583),g=n(4544),_=n(7410),b=n(7294),S=n(460),A=n(9163),k=n(9061),j=n(1461),E=Object.assign({},k);"undefined"!=typeof window&&(window.Zedux=E,window.Redux=j);var w=(0,A.F4)(r||(r=(0,y.Z)(["\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(128px, 128px);\n  }\n"]))),I=A.ZP.button(o||(o=(0,y.Z)(["\n  @media all and (max-width: 767px) {\n    ","\n  }\n\n  appearance: none;\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  border-radius: 5px;\n  color: #fff;\n  cursor: pointer;\n  margin-left: 5px;\n  padding: 5px 16px;\n  position: relative;\n  z-index: 1;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.05);\n  }\n"])),(function(e){return e.shouldHide?"display: none;":""})),T=A.ZP.div(a||(a=(0,y.Z)(["\n  overflow: auto;\n"]))),x=A.ZP.div(i||(i=(0,y.Z)(["\n  background: var(--color-dark);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-bottom: 0;\n  border-radius: 10px 10px 0 0;\n  overflow: hidden;\n  padding: 0.5rem 1rem;\n  position: relative;\n\n  &::after {\n    animation: "," 40s infinite linear;\n    background: "," 0 0 repeat;\n    content: '';\n    height: calc(100% + 128px);\n    position: absolute;\n    left: -128px;\n    top: -128px;\n    width: calc(100% + 128px);\n  }\n"])),w,(function(e){return"url("+e.url+")"})),O=A.ZP.img(s||(s=(0,y.Z)(["\n  display: inline-block;\n  margin-right: 0.5rem;\n  vertical-align: middle;\n  width: 2rem;\n"]))),N=A.ZP.span(c||(c=(0,y.Z)(["\n  flex: 1;\n"]))),P=A.ZP.div(u||(u=(0,y.Z)(["\n  align-items: center;\n  background: var(--color-dark);\n  display: flex;\n  flex-flow: row nowrap;\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-top: 0;\n  border-bottom: 0;\n  overflow: hidden;\n  position: relative;\n\n  &::after {\n    animation: "," 40s infinite linear;\n    background: "," 0 0 repeat;\n    content: '';\n    height: calc(100% + 128px);\n    position: absolute;\n    left: -128px;\n    top: -128px;\n    width: calc(100% + 128px);\n  }\n"])),w,(function(e){return"url("+e.url+")"})),C=A.ZP.div(l||(l=(0,y.Z)(["\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-top: 0;\n  border-radius: 0 0 10px 10px;\n  color: #242526;\n  line-height: 2.2;\n  padding: 0.5rem 1rem;\n  position: relative;\n"]))),R=A.ZP.section(d||(d=(0,y.Z)(["\n  color: #fff;\n  margin: 2rem 0;\n"]))),D=Object.assign({},E,b),M=Object.keys(D),H=M.map((function(e){return D[e]})),B=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={hasError:!1},n}(0,f.Z)(t,e);var n=t.prototype;return n.UNSAFE_componentWillReceiveProps=function(){this.setState({hasError:!1})},t.getDerivedStateFromError=function(){return{hasError:!0}},n.render=function(){return this.state.hasError?b.createElement("span",null,"..."):this.props.children||b.createElement("span",null)},t}(b.Component),J=function(e){return b.createElement(g.ZP,{Prism:_.Z,code:e,language:"tsx",theme:p},(function(e){var t=e.tokens,n=e.getLineProps,r=e.getTokenProps;return b.createElement(b.Fragment,null,t.map((function(e,t){return b.createElement("div",n({line:e,key:t}),e.map((function(e,t){var n;try{n=r({token:e,key:t})}catch(o){return b.createElement("span",null,e.content)}return b.createElement("span",n)})))})))}))},G=0,V=function(e){var t=e.children,n=e.extraScope,r=e.resultVar,o=void 0===r?"Result":r,a=(0,b.useRef)(!0),i=(0,b.useRef)(t.trim()),s=(0,b.useState)(),c=s[0],u=s[1],l=(0,b.useState)(t.trim()),d=l[0],f=l[1],y=(0,b.useState)(""),g=y[0],_=y[1],A=(0,v.Z)("img/bg-texture.png");p=(0,m.Z)();var k=(0,b.useMemo)((function(){return"editor-ecosystem-"+G++}),[]),j=(0,b.useMemo)((function(){var e={latestForce:null,latestVal:null,originalForce:null,originalVal:null,timeoutId:null};return function(t,r){if(e.latestVal=t,e.latestForce=r,!e.timeoutId){var i=function(){if(e.originalVal!==e.latestVal||e.originalForce!==e.latestForce)try{var t;E.getEcosystem(k).wipe();var r="string"==typeof n?n:"",i=null==(t=window)?void 0:t.ts.transpile(r+"; "+e.latestVal,{jsx:"react"});if(!i)return;var s=function(e,t,n,r){var o="var "+n+"; "+t+"; var _$_$res = typeof "+n+" === 'function' ? React.createElement("+n+") : "+n+"; return React.createElement(EcosystemProvider, { children: _$_$res, id: '"+e+"' })",a=r?[].concat(Object.keys(r)):[],i=r?[].concat(M,a):M,s=r?[].concat(H,a.map((function(e){return r[e]}))):H,c=(0,h.Z)(Function,["React"].concat(i,[o]));return c.call.apply(c,[null,b].concat(s))}(k,i,o,"string"==typeof n?void 0:n);a.current&&_(s)}catch(c){a.current&&_(c.message),console.error("Live Editor error:",c)}};i(),e.originalVal=t,e.originalForce=r,e.timeoutId=setTimeout((function(){i(),e.timeoutId=null}),500)}}}),[k]);return(0,b.useEffect)((function(){j(d,c)}),[c,o,d]),(0,b.useEffect)((function(){return function(){a.current=!1}}),[]),b.createElement(R,null,b.createElement(x,{url:A},b.createElement(O,{src:(0,v.Z)("img/zedux-icon.png")})," Live Editor"),b.createElement(T,null,b.createElement(S.Z,{value:d,padding:10,highlight:J,onValueChange:f,style:Object.assign({fontFamily:"monospace",fontSize:"15px",letterSpacing:"-0.05px",lineHeight:"1.4",minWidth:"738px",whiteSpace:"pre"},p.plain)})),b.createElement(P,{url:A},b.createElement(O,{src:(0,v.Z)("img/zedux-icon.png")})," ",b.createElement(N,null,"Live Result:")," ",b.createElement(I,{onClick:function(){console.log("Zedux Exports:",E),console.log("React Exports:",b),n&&console.log("Extra Scope:",n)},shouldHide:!0},"Log Scope"),b.createElement(I,{onClick:function(){var e=E.zeduxGlobalStore.getState().ecosystems[k];console.log("Ecosystem:",e),console.log("Current State:",e.inspectInstanceValues())},shouldHide:!0},"Log State"),b.createElement(I,{onClick:function(){f(i.current),u({})}},"Reset")),b.createElement(C,null,b.createElement(B,null,g)))}},3251:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.metaTypes=t.actionTypes=void 0;var n="@@zedux/";t.actionTypes={HYDRATE:n+"hydrate",PARTIAL_HYDRATE:n+"partialHydrate",RECALCULATE:n+"recalculate"},t.metaTypes={DELEGATE:n+"delegate",INHERIT:n+"inherit",SKIP_EVALUATION:n+"skipEvaluation"}},5408:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActor=void 0;var r=n(8291);function o(){return this.type}t.createActor=function(e){if("string"!=typeof e)throw new TypeError("Zedux Error - createActor() - actionType must be a string. Received "+r.detailedTypeof(e));var t=function e(t){var n={type:e.type};return void 0!==t&&(n.payload=t),n};return t.toString=o,t.type=e,t}},8323:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.createActorFactory=void 0;var a=n(5408);t.createActorFactory=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n=o(o([],r(e)),[t]).join("/");return a.createActor(n)}}},1620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMachine=void 0;var r=n(6042);t.createMachine=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e.length)throw new Error("Zedux Error - createMachine() - At least one state is required");var n=e[0].type,o={};e.forEach((function(e){r.assertIsValidState(e),o[e.type]=e.transitions}));var a=function(e,t){void 0===e&&(e=n);var r=t.type,a=o[e];return a&&a[r]||e};return a}},925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createReducer=void 0;var r=n(3818);t.createReducer=function(e){var t={},n=function(n,r){return void 0===n&&(n=e),function(e,t,n){return e.reduce((function(e,t){return t(e,n.payload)}),t)}(t[r.type]||[],n,r)};return n.reduce=function(e,o){var a="ZeduxReducer.reduce()",i=Array.isArray(e)?r.extractActionTypes(e,a):[r.extractActionType(a)(e)];return function(e,t,n){t.forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))}(t,i,o),n},n}},1218:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Store=t.createStore=void 0;var u=n(4667),l=n(635),d=n(2428),p=n(6042),f=n(8291),h=a(n(2068)),y=n(3251),v=n(1366),m={type:y.actionTypes.RECALCULATE};t.createStore=function(e,t){return new g(e,t)};var g=function(){function e(e,t){var n=this;this._subscribers=new Map,this.dispatch=function(e){return n._dispatch(e)},this.setState=function(e,t){return n._setState(e,t)},this._currentState=t,e&&this.use(e)}return e.prototype.getState=function(){if(this._isDispatching)throw new Error(p.invalidAccess("store.getState()"));return this._currentState},e.prototype.setStateDeep=function(e,t){return this._setState(e,t,!0)},e.prototype.subscribe=function(e){var t=this,n="function"==typeof e?{next:e}:e;return n.next&&p.assert("function"==typeof n.next,p.getError("subscriberNext"),n.next),n.error&&p.assert("function"==typeof n.error,p.getError("subscriberError"),n.error),n.effects&&p.assert("function"==typeof n.effects,p.getError("subscriberEffects"),n.effects),this._subscribers.set(n,n.id===f.INTERNAL_SUBSCRIBER_ID),{unsubscribe:function(){t._subscribers.delete(n)}}},e.prototype.use=function(e){var t=u.hierarchyDescriptorToDiffTree(e,this._registerChildStore.bind(this));return this._currentDiffTree=l.mergeDiffTrees(this._currentDiffTree,t,this.constructor.hierarchyConfig),this._rootReducer=this._currentDiffTree.reducer,this._rootReducer&&this._dispatchAction(m,m,this._currentState),this},e.prototype._dispatch=function(e){if("function"==typeof e)throw new TypeError("\n      Zedux Error - store.dispatch() - Thunks are not currently supported.\n      Only normal action objects can be passed to store.dispatch().\n      Inducers should be passed to store.setState()");return p.assertIsPlainObject(e,"Action"),!1!==d.delegate(this._currentDiffTree,e)?this._currentState:this._routeAction(e)},e.prototype._dispatchAction=function(e,t,n){if(this._isDispatching)throw new Error(p.invalidAccess("dispatch(), hydrate(), setState()"));var r;this._isDispatching=!0;var o=n;try{this._rootReducer&&(o=this._rootReducer(n,t))}catch(a){throw r=a,a}finally{this._isDispatching=!1,this._informSubscribers(o,e,void 0,r)}return o},e.prototype._dispatchHydration=function(e,t,n){var r=t===y.actionTypes.HYDRATE?e:l.mergeStateTrees(this._currentState,e,this.constructor.hierarchyConfig)[0];if(r===this._currentState)return this._currentState;var o={payload:r,type:t};return null!=n&&(o.meta=n),this._dispatchAction(o,o,r)},e.prototype._dispatchInducer=function(e,t,n){var r;try{r=e(this._currentState)}catch(o){throw this._informSubscribers(this._currentState,{type:y.actionTypes.PARTIAL_HYDRATE},void 0,o),o}return this._dispatchHydration(r,n?y.actionTypes.PARTIAL_HYDRATE:y.actionTypes.HYDRATE,t)},e.prototype._informSubscribers=function(e,t,n,r){var o,a,u,l=this._currentState;this._currentState=e;var d=s([],i(this._subscribers.keys()));try{for(var p=c(d),f=p.next();!f.done;f=p.next()){var h=f.value;r&&h.error&&h.error(r),e!==l&&h.next&&h.next(e,l,t),h.effects&&(u||(u={action:t,effect:n,error:r,newState:e,oldState:l,store:this}),h.effects(u))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}},e.prototype._registerChildStore=function(e,t){var n=this;return t.subscribe({effects:function(t){var r=t.action,o=t.effect,a=t.error,i=t.newState,s=t.oldState;if(!n._isDispatching){var c=i===s?n._currentState:d.propagateChange(n._currentState,e,i,n.constructor.hierarchyConfig),u=o&&v.addMeta(o,y.metaTypes.DELEGATE,e),l=r&&v.addMeta(r,y.metaTypes.DELEGATE,e);n._informSubscribers(c,l,u,a)}},id:f.INTERNAL_SUBSCRIBER_ID}).unsubscribe},e.prototype._routeAction=function(e){var t=v.removeAllMeta(e);return p.assertIsValidAction(t),t.type===y.actionTypes.HYDRATE?this._dispatchHydration(t.payload,y.actionTypes.HYDRATE,t.meta):t.type===y.actionTypes.PARTIAL_HYDRATE?this._dispatchHydration(t.payload,y.actionTypes.PARTIAL_HYDRATE,t.meta):this._dispatchAction(e,t,this._currentState)},e.prototype._setState=function(e,t,n){return void 0===n&&(n=!1),"function"==typeof e?this._dispatchInducer(e,t,n):this._dispatchHydration(e,n?y.actionTypes.PARTIAL_HYDRATE:y.actionTypes.HYDRATE,t)},e.hierarchyConfig=h,e.$$typeof=f.STORE_IDENTIFIER,e}();t.Store=g},1366:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.removeMeta=t.removeAllMeta=t.hasMeta=t.getMetaData=t.addMeta=void 0;var o=n(6042),a=function(e){o.assert(!!e,'Invalid meta chain. The last node in the chain must be either a valid action object with a non-empty "type" property or an effect with a non-empty "effectType" property')},i=function(e,t,n){return t&&n?(t.payload=e.payload,n):e.payload};t.addMeta=function(e,t,n){var r={metaType:t,payload:e};return n&&(r.metaData=n),r};t.getMetaData=function(e,t){for(;e.hasOwnProperty("metaType");){if(e.metaType===t)return e.metaData;e=e.payload,a(e)}};t.hasMeta=function(e,t){for(;e.hasOwnProperty("metaType");){if(e.metaType===t)return!0;e=e.payload,a(e)}return!1};t.removeAllMeta=function(e){for(;e.hasOwnProperty("metaType");)e=e.payload,a(e);return e};t.removeMeta=function(e,t){for(var n=e,o=null,a=null;n.hasOwnProperty("metaType");){if(n.metaType===t)return i(n,o,a);var s=r({},n);o&&(o.payload=s),o=s,n=n.payload,a||(a=o)}return e}},2512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.states=t.createState=void 0;var r=n(3818);t.createState=function(e){var t={},n={is:function(t){return t===e},on:function(e,o){var a=r.extractActionType("createState()")(e);return t[a]=r.extractStateType(o),n},transitions:t,type:e};return n};t.states=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.map((function(e){return t.createState(e)}));return r}},3180:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.when=void 0;var o=n(3818),a=n(6042),i=n(1366);t.when=function(e){var t={},n=[],s=[],c=[],u=[],l=function(e){if(e.action){n.forEach((function(t){return t(e)}));var r=i.removeAllMeta(e.action),o=t[r.type];null==o||o.forEach((function(t){return t(e)}))}},d=function(e){s.forEach((function(t){var n=t.enterHooks,r=t.getMachine,o=t.leaveHooks,a=void 0!==e.oldState&&r(e.oldState),i=r(e.newState);if(i!==a){var s="string"==typeof a?o[a]:null,c=n[i];null==s||s.forEach((function(t){return t(e)})),null==c||c.forEach((function(t){return t(e)}))}}))},p=function(e){c.forEach((function(t){return t(e)})),u.forEach((function(t){var n=t.predicate,r=t.sideEffect,o=n(e.oldState),a=n(e.newState);a&&o!==a&&r(e)}))},f={machine:function(e){void 0===e&&(e=function(e){return e});var t={enterHooks:{},getMachine:e,leaveHooks:{}};s.push(t);var n=r(r({},f),{enters:function(e,r){return(Array.isArray(e)?e:[e]).forEach((function(e){var n=o.extractStateType(e);t.enterHooks[n]||(t.enterHooks[n]=[]),t.enterHooks[n].push(r)})),n},leaves:function(e,r){return(Array.isArray(e)?e:[e]).forEach((function(e){var n=o.extractStateType(e);t.leaveHooks[n]||(t.leaveHooks[n]=[]),t.leaveHooks[n].push(r)})),n}});return n},receivesAction:function(e,r){if(void 0===r)return a.assertAreFunctions([e],"whenBuilder.receivesAction()"),n.push(e),f;a.assertAreFunctions([r],"whenBuilder.receivesEffect()");var i=e,s=o.extractActionType("whenBuilder.receivesAction()")(i);return t[s]||(t[s]=[]),t[s].push(r),f},stateChanges:function(e){return c.push(e),f},stateMatches:function(e,t){return a.assertAreFunctions([e,t],"whenBuilder.stateMatches()"),u.push({predicate:e,sideEffect:t}),f},subscription:e.subscribe({effects:function(e){e.action&&l(e),e.newState!==e.oldState&&(d(e),p(e))}})};return f}},4667:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.wrapStoreInReducer=t.hierarchyDescriptorToDiffTree=t.getHierarchyType=void 0;var a=n(3251),i=n(1366),s=n(6042),c=n(8291);function u(e,t,n){var a={};return Object.entries(e).forEach((function(e){var i=r(e,2),s=i[0],c=i[1],u=o(o([],r(n)),[s]);a[s]=d(c,t,u)})),a}function l(e){return"function"==typeof e?c.HierarchyType.Reducer:e&&c.isZeduxStore(e)?c.HierarchyType.Store:c.isPlainObject(e)?c.HierarchyType.Branch:(s.assertIsNullHierarchyDescriptorNode(e),c.HierarchyType.Null)}function d(e,t,n){void 0===n&&(n=[]);var r=l(e);return r!==c.HierarchyType.Branch?function(e,t,n,r){return e===c.HierarchyType.Null?{type:e}:e===c.HierarchyType.Reducer?{type:e,reducer:t}:{type:e,destroy:n(r,t),reducer:p(t),store:t}}(r,e,t,n):{type:r,children:u(e,t,n)}}function p(e){return function(t,n){n.type!==a.actionTypes.HYDRATE&&n.type!==a.actionTypes.PARTIAL_HYDRATE||(n={type:a.actionTypes.HYDRATE,payload:t});var r=i.addMeta(n,a.metaTypes.INHERIT);return e.dispatch(r)}}t.getHierarchyType=l,t.hierarchyDescriptorToDiffTree=d,t.wrapStoreInReducer=p},635:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeStateTrees=t.mergeDiffTrees=t.mergeBranches=t.destroyTree=void 0;var a=n(8291);function i(e){if(e){var t=e,n=t.children,r=t.destroy;r&&r(),n&&Object.values(n).forEach(i)}}function s(e,t,n){var o,i,s,u,l,d,p,f=r({},e.children);return Object.keys(t.children).forEach((function(r){var o,i=t.children[r],s=c(null===(o=e.children)||void 0===o?void 0:o[r],i,n);s.type!==a.HierarchyType.Null?f[r]=s:delete f[r]})),{children:f,reducer:(o=f,i=n,s=i.create,u=i.get,l=i.isNode,d=i.set,p=i.size,function(e,t){void 0===e&&(e=s());var n=s(),r=!1;return Object.keys(o).forEach((function(a){var i=o[a].reducer,s=l(e)?u(e,a):void 0,c=i(s,t);n=d(n,a,c),r||(r=c!==s)})),r||(r=!l(e)||!Object.keys(o).length&&!!p(e)),r?n:e}),type:a.HierarchyType.Branch}}function c(e,t,n){return t.type!==a.HierarchyType.Branch?(i(e),t):e&&e.type===a.HierarchyType.Branch?s(e,t,n):(i(e),s({type:a.HierarchyType.Null},t,n))}t.destroyTree=i,t.mergeBranches=s,t.mergeDiffTrees=c,t.mergeStateTrees=function e(t,n,r){if(!r.isNode(t)||!r.isNode(n))return[n,n!==t];var a=!1,i=r.clone(t);return r.iterate(n,(function(t,n){var s=r.get(i,t),c=o(r.isNode(n)?e(s,n,r):[n,n!==s],2),u=c[0],l=c[1];l&&(a||(a=l),r.set(i,t,u))})),[a?i:t,a]}},2428:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.propagateChange=t.delegate=void 0;var o=n(3251),a=n(6042),i=n(8291),s=n(1366);t.delegate=function(e,t){var n=s.getMetaData(t,o.metaTypes.DELEGATE);if(!n||!e)return!1;var c=function(e,t,n){var o,a;try{for(var s=r(t),c=s.next();!c.done;c=s.next()){var u=c.value;if(e.type!==i.HierarchyType.Branch)throw new ReferenceError(n(t));if(!(e=e.children[u]))throw new ReferenceError(n(t))}}catch(l){o={error:l}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return e}(e,n,a.invalidDelegation);if(c.type!==i.HierarchyType.Store)throw new TypeError(a.invalidDelegation(n));return c.store.dispatch(s.removeMeta(t,o.metaTypes.DELEGATE))};t.propagateChange=function(e,n,r,o){if(!n.length)return r;var a=o.clone(e),i=n[0];return o.set(a,i,t.propagateChange(o.get(e,i),n.slice(1),r,o))}},8142:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.isZeduxStore=void 0,o(n(3251),t),o(n(5408),t),o(n(8323),t),o(n(1620),t),o(n(925),t),o(n(1218),t),o(n(1366),t),o(n(2512),t),o(n(3180),t);var a=n(8291);Object.defineProperty(t,"isZeduxStore",{enumerable:!0,get:function(){return a.isZeduxStore}}),o(n(4060),t)},4060:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractStateType=t.extractActionTypes=t.extractActionType=void 0;var r=n(6042);t.extractActionType=function(e){return function(t){return"string"==typeof t?t:(r.assertIsValidActor(t,e),t.type)}};t.extractActionTypes=function(e,n){return e.map(t.extractActionType(n))};t.extractStateType=function(e){return"string"==typeof e?e:(r.assertIsValidState(e),e.type)}},6042:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.invalidNonPlainObject=t.invalidNonFunction=t.invalidHierarchyDescriptorNode=t.invalidDelegation=t.invalidState=t.invalidActor=t.invalidAction=t.invalidAccess=t.assertIsValidState=t.assertIsValidActor=t.assertIsValidAction=t.assertIsPlainObject=t.assertIsNullHierarchyDescriptorNode=t.assertAreFunctions=t.getError=t.assert=void 0;var o=n(8291),a="Zedux Error -";t.assert=function(e,t,n){if(!e){var r=a+" "+t;throw n&&(r+=". Received "+o.detailedTypeof(n)),new Error(r)}};var i={subscriberEffects:"store.subscribe() - subscriber.effects must be a function",subscriberError:"store.subscribe() - subscriber.error must be a function",subscriberNext:'store.subscribe() expects either a function or an object with a "next" property whose value is a function'};t.getError=function(e){return i[e]};t.assertAreFunctions=function(e,n){var o,a;try{for(var i=r(e),s=i.next();!s.done;s=i.next()){var c=s.value;if("function"!=typeof c)throw new TypeError(t.invalidNonFunction(c,n))}}catch(u){o={error:u}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(o)throw o.error}}};t.assertIsNullHierarchyDescriptorNode=function(e){if(null!=e)throw new TypeError(t.invalidHierarchyDescriptorNode(e))};t.assertIsPlainObject=function(e,n){if(!o.isPlainObject(e))throw new TypeError(t.invalidNonPlainObject(e,n))};t.assertIsValidAction=function(e){if("string"!=typeof e.type)throw new TypeError(t.invalidAction(e))};t.assertIsValidActor=function(e,n){if("function"!=typeof e||"string"!=typeof e.type)throw new TypeError(t.invalidActor(e,n))};t.assertIsValidState=function(e){if(!e||"object"!=typeof e||"string"!=typeof e.type)throw new TypeError(t.invalidState(e))};t.invalidAccess=function(e){return a+" "+e+" - This method cannot be called within a reducer."};t.invalidAction=function(e){return a+' store.dispatch() - Action must have a string "type" property. Received '+o.detailedTypeof(e.type)+"."};t.invalidActor=function(e,t){var n="function"==typeof e?'function with invalid "type" property - '+typeof e.type:typeof e;return a+" "+t+' - Actor must be either a string or a function with a "type" property. Received '+n};t.invalidState=function(e){return a+" - state.on() - Target state must be either a string or MachineState object. Received "+typeof e};t.invalidDelegation=function(e){return a+" store.dispatch() - Invalid Delegation - Current store hierarchy does not contain a sub-store at path: "+e.join(" -> ")};t.invalidHierarchyDescriptorNode=function(e){return a+" store.use() - Hierarchy descriptor nodes must be reducers, stores, or plain objects. Received "+o.detailedTypeof(e)};t.invalidNonFunction=function(e,t){return a+" "+t+" - Expected argument to be a function. Received "+typeof e};t.invalidNonPlainObject=function(e,t){return a+" store.dispatch() - "+t+" must be a plain object. Received "+o.detailedTypeof(e)}},8291:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isZeduxStore=t.isPlainObject=t.detailedTypeof=t.STORE_IDENTIFIER=t.INTERNAL_SUBSCRIBER_ID=t.observableSymbol=t.HierarchyType=t.PLAIN_OBJECT=t.NULL=t.NO_PROTOTYPE=t.COMPLEX_OBJECT=t.ARRAY=void 0,t.ARRAY="array",t.COMPLEX_OBJECT="complex object",t.NO_PROTOTYPE="prototype-less object",t.NULL="null",t.PLAIN_OBJECT="object",function(e){e[e.Branch=0]="Branch",e[e.Null=1]="Null",e[e.Reducer=2]="Reducer",e[e.Store=3]="Store"}(t.HierarchyType||(t.HierarchyType={})),t.observableSymbol="function"==typeof Symbol&&Symbol.observable||"@@observable",t.INTERNAL_SUBSCRIBER_ID=Symbol.for("zedux.subscriber"),t.STORE_IDENTIFIER=Symbol.for("zedux.store"),t.detailedTypeof=function(e){var n=typeof e;return"object"!==n?n:e?Array.isArray(e)?t.ARRAY:function(e){var n=Object.getPrototypeOf(e);return n?Object.getPrototypeOf(n)?t.COMPLEX_OBJECT:t.PLAIN_OBJECT:t.NO_PROTOTYPE}(e):t.NULL},t.isPlainObject=function(e){if("object"!=typeof e||!e)return!1;var t=Object.getPrototypeOf(e);return!!t&&null===Object.getPrototypeOf(t)},t.isZeduxStore=function(e){var n;return(null===(n=null==e?void 0:e.constructor)||void 0===n?void 0:n.$$typeof)===t.STORE_IDENTIFIER}},2068:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.size=t.set=t.iterate=t.isNode=t.get=t.create=t.clone=void 0;var a=n(8291);t.clone=function(e){return r({},e)};t.create=function(){return{}};t.get=function(e,t){return e[t]},t.isNode=a.isPlainObject;t.iterate=function(e,t){Object.entries(e).forEach((function(e){var n=o(e,2),r=n[0],a=n[1];return t(r,a)}))};t.set=function(e,t,n){return e[t]=n,e};t.size=function(e){return Object.keys(e).length}},5346:function(e,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AtomApi=void 0;var r=function(){function e(t){t instanceof e?(this.dispatchInterceptors=t.dispatchInterceptors,this.exports=t.exports,this.setStateInterceptors=t.setStateInterceptors,this.promise=t.promise,this.ttl=t.ttl,this.value=t.value):this.value=t}return e.prototype.addExports=function(e){return this.exports?this.exports=n(n({},this.exports),e):this.exports=e,this},e.prototype.addDispatchInterceptor=function(e){return this.dispatchInterceptors||(this.dispatchInterceptors=[]),this.dispatchInterceptors.push(e),this},e.prototype.addSetStateInterceptor=function(e){return this.setStateInterceptors||(this.setStateInterceptors=[]),this.setStateInterceptors.push(e),this},e.prototype.setExports=function(e){return this.exports=e,this},e.prototype.setPromise=function(e){return this.promise=e,this},e.prototype.setTtl=function(e){return this.ttl=e,this},e.prototype._interceptDispatch=function(e,t){var n;return((null===(n=this.dispatchInterceptors)||void 0===n?void 0:n.reduceRight((function(e,t){return function(n){return t(n,e)}}),t))||t)(e)},e.prototype._interceptSetState=function(e,t){var n;return((null===(n=this.setStateInterceptors)||void 0===n?void 0:n.reduceRight((function(e,t){return function(n){return t(n,e)}}),t))||t)(e)},e}();t.AtomApi=r},7659:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.AtomInstance=void 0;var s=n(8142),c=n(147),u=n(5213),l=n(5776),d=n(8142),p=n(5346),f=n(9426),h=function(e){return d.isZeduxStore(e)?c.StateType.Store:c.StateType.Value},y=function(e){function t(t,n,r,o){var i,l,p=e.call(this)||this;p.ecosystem=t,p.atom=n,p.keyHash=r,p.params=o,p._activeState=c.ActiveState.Initializing,p._evaluationReasons=[],p._isEvaluating=!1,p.dispatch=function(e){var t,n,r=(null===(n=null===(t=p.api)||void 0===t?void 0:t.dispatchInterceptors)||void 0===n?void 0:n.length)?p.api._interceptDispatch(e,(function(e){return p.store.dispatch(e)})):p.store.dispatch(e);return p.ecosystem._scheduler.flush(),r},p.setState=function(e,t){var n,r,o=(null===(r=null===(n=p.api)||void 0===n?void 0:n.setStateInterceptors)||void 0===r?void 0:r.length)?p.api._interceptSetState(e,(function(e){return p.store.setState(e,t)})):p.store.setState(e,t);return p.ecosystem._scheduler.flush(),o},p._scheduleEvaluation=function(e,t){void 0===t&&(t=0),p._activeState!==c.ActiveState.Destroyed&&(p._evaluationReasons.length?p._evaluationReasons.push(e):(p._evaluationReasons=[e],p.ecosystem._scheduler.scheduleJob({flagScore:t,keyHash:p.keyHash,task:p.evaluationTask,type:u.JobType.EvaluateAtom})))},p.invalidate=function(){return p._invalidate()},p.evaluate=function(){return p._evaluate()},p.evaluationTask=function(){return p._evaluationTask()};var f=p._doEvaluate();return i=a(function(e){var t=h(e),n=t===c.StateType.Store?e:d.createStore();return t===c.StateType.Value&&n.setState("function"==typeof e?function(){return e}:e),[t,n]}(f),2),p._stateType=i[0],p.store=i[1],p._subscription=p.store.subscribe((function(e,n,o){o.meta!==s.metaTypes.SKIP_EVALUATION&&t._graph.scheduleDependents(r,p._evaluationReasons,e,n)})),!p.promise&&p._shouldForwardPromise()&&p._forwardPromises(),p.exports=p.exports||void 0,p._promiseStatus=null!==(l=p._promiseStatus)&&void 0!==l?l:c.PromiseStatus.Resolved,p._activeState=c.ActiveState.Active,p}return o(t,e),t.prototype._destroy=function(e){var t,n,r,o=this;if(this._activeState!==c.ActiveState.Destroyed&&(e||!Object.keys((null===(t=this.ecosystem._graph.nodes[this.keyHash])||void 0===t?void 0:t.dependents)||{}).length)){this._activeState=c.ActiveState.Destroyed,this._evaluationReasons.length&&this.ecosystem._scheduler.unscheduleJob(this.evaluationTask);var i=[];null===(n=this._injectors)||void 0===n||n.forEach((function(e){var t;e.type===u.InjectorType.Effect?null===(t=e.cleanup)||void 0===t||t.call(e):i.push(e)})),i.forEach((function(e){var t;null===(t=e.cleanup)||void 0===t||t.call(e)})),this._getKeyHashes&&Object.entries(this._getKeyHashes).forEach((function(e){var t=a(e,2),n=t[0],r=t[1];o.ecosystem._graph.removeDependency(o.keyHash,n,r)})),null===(r=this._subscription)||void 0===r||r.unsubscribe(),this.ecosystem._destroyAtomInstance(this.keyHash)}},t.prototype._evaluate=function(){var e=this.atom._value;if(e instanceof p.AtomApi)return this.api=e,e.value;if("function"!=typeof e)return e;try{var t=e.apply(void 0,i([],a(this.params)));return t instanceof p.AtomApi?(this.api=t,this._activeState===c.ActiveState.Initializing&&(this.exports=t.exports,t.promise&&this._setPromise(t.promise)),t.value):t}catch(n){throw console.error('Zedux - Error while instantiating atom "'+this.atom.key+'" with params:',this.params,n),n}},t.prototype._get=function(e,t){var n=e instanceof f.AtomInstanceBase?e:this.ecosystem.getInstance(e,t);return this._isEvaluating&&(this._nextGetKeyHashes||(this._nextGetKeyHashes={}),this._nextGetKeyHashes[n.keyHash]=[u.GraphEdgeDynamicity.Dynamic,"get"]),n.store.getState()},t.prototype._getInstance=function(e,t,n){var r,o=e instanceof f.AtomInstanceBase?e:this.ecosystem.getInstance(e,t);return this._isEvaluating&&(this._nextGetKeyHashes||(this._nextGetKeyHashes={}),(null===(r=this._nextGetKeyHashes[o.keyHash])||void 0===r?void 0:r[0])!==u.GraphEdgeDynamicity.Dynamic&&(this._nextGetKeyHashes[o.keyHash]=n||[u.GraphEdgeDynamicity.Static,"getInstance"])),o},t.prototype._scheduleDestruction=function(){var e=this;if(this._activeState===c.ActiveState.Active){this._activeState=c.ActiveState.Stale;var t=this.atom.maxInstances;if(null!=t){if(0===t)return this._destroy();if(this.ecosystem.findInstances(this.atom).length>t)return this._destroy()}var n=this._getTtl();if(null!=n&&-1!==n){if(0===n)return this._destroy();if("number"!=typeof n){if("function"==typeof n.then){var r=!1;return n.then((function(){r||e._destroy()})),void(this._cancelDestruction=function(){r=!0})}var o=n.subscribe((function(){return e._destroy()}));this._cancelDestruction=function(){return o.unsubscribe()}}else{var a=setTimeout((function(){return e._destroy()}),n);this._cancelDestruction=function(){return clearTimeout(a)}}}}},t.prototype._doEvaluate=function(){var e,t=[];this._isEvaluating=!0;try{e=l.diContext.provide({injectors:t,instance:this},this.evaluate)}catch(n){throw t.forEach((function(e){var t;null===(t=e.cleanup)||void 0===t||t.call(e)})),n}finally{this._isEvaluating=!1,this._activeState!==c.ActiveState.Initializing&&(this._evaluationReasons=[])}return this._injectors=t,this._updateGetEdges(),e},t.prototype._evaluationTask=function(){var e=this._doEvaluate(),t=h(e);if(t!==this._stateType)throw new Error('Zedux Error - atom factory for atom "'+this.atom.key+'" returned a different type than the previous evaluation. This can happen if the atom returned a store initially but then returned a non-store value on a later evaluation or vice versa');if(t===c.StateType.Store&&e!==this.store)throw new Error('Zedux Error - atom factory for atom "'+this.atom.key+'" returned a different store. Did you mean to use `injectState()`, `injectStore()`, or `injectMemo()`?');t===c.StateType.Value&&this.store.setState("function"==typeof e?function(){return e}:e)},t.prototype._forwardPromises=function(){var e=this,t=Object.keys(this.ecosystem._graph.nodes[this.keyHash].dependencies).map((function(t){return e.ecosystem._instances[t].promise})).filter(Boolean);t.length&&this._setPromise(Promise.all(t))},t.prototype._getTtl=function(){var e;if(null==(null===(e=this.api)||void 0===e?void 0:e.ttl))return null!=this.atom.ttl?this.atom.ttl:this.ecosystem.defaultTtl;var t=this.api.ttl;return"function"==typeof t?t():t},t.prototype._invalidate=function(){this._scheduleEvaluation({operation:"invalidate",targetType:u.EvaluationTargetType.External,type:u.EvaluationType.CacheInvalidated})},t.prototype._setPromise=function(e){var t=this;this.promise=e,this._promiseStatus=c.PromiseStatus.Pending,e.then((function(){t._promiseStatus=c.PromiseStatus.Resolved})).catch((function(e){t._promiseStatus=c.PromiseStatus.Rejected,t._promiseError=e}))},t.prototype._shouldForwardPromise=function(){return null!=this.atom.forwardPromises?this.atom.forwardPromises:this.ecosystem.defaultForwardPromises},t.prototype._updateGetEdges=function(){var e=this,t=this._getKeyHashes,n=this._nextGetKeyHashes;if(t&&Object.entries(t).forEach((function(t){var r=a(t,2),o=r[0],i=r[1],s=null==n?void 0:n[o],c=(null==s?void 0:s[0])===u.GraphEdgeDynamicity.Static;s&&c===i.isStatic||e.ecosystem._graph.removeDependency(e.keyHash,o,i)})),n){var r={};Object.keys(n).forEach((function(o){var a=n[o],i=a[0]===u.GraphEdgeDynamicity.Static,s=null==t?void 0:t[o];if(s)r[o]=s;else{var c=e.ecosystem._graph.addDependency(e.keyHash,o,a[1],i);r[o]=c}})),this._getKeyHashes=r}this._nextGetKeyHashes=void 0},t}(f.AtomInstanceBase);t.AtomInstance=y},7044:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.Ecosystem=t.ecosystemContext=void 0;var a=n(7294),i=n(7271),s=n(5213),c=n(843),u=n(9426),l=n(7099),d=function(e){return e.reduce((function(e,t){return e[t.key]=t,e}),{})};t.ecosystemContext=a.createContext("global");var p=function(){function e(e){var t=e.context,n=e.defaultForwardPromises,r=e.defaultTtl,o=e.destroyOnUnmount,a=e.flags,u=e.id,d=e.overrides,p=e.preload;if(this._graph=new c.Graph(this),this._instances={},this._destroyOnUnmount=!1,this._refCount=0,this._scheduler=new l.Scheduler(this),this.flags=[],this.overrides={},this.isInitialized=!1,a&&!Array.isArray(a))throw new TypeError("Zedux Error - The Ecosystem's `flags` property must be an array of strings");if(d&&!Array.isArray(d))throw new TypeError("Zedux Error - The Ecosystem's `overrides` property must be an array of Atom objects");this.ecosystemId=u||s.generateAppId(),d&&this.setOverrides(d),a&&(this.flags=a),this.context=t,this.defaultForwardPromises=n,this.defaultTtl=null!=r?r:-1,this._destroyOnUnmount=!!o,this._preload=p,i.globalStore.dispatch(i.addEcosystem(this)),this.isInitialized=!0,null==p||p(this,t)}return e.prototype.addOverrides=function(e){var t=this;this.overrides=r(r({},this.overrides),d(e)),e.forEach((function(e){t.findInstances(e).forEach((function(e){return e._destroy(!0)}))}))},e.prototype.destroy=function(e){!e&&this._refCount>0||i.globalStore.getState().ecosystems[this.ecosystemId]&&(this.wipe(),i.globalStore.dispatch(i.removeEcosystem({ecosystemId:this.ecosystemId})))},e.prototype.findInstances=function(e){var t="string"==typeof e?e:e.key;return Object.values(this._instances).filter((function(e){return e.atom.key===t}))},e.prototype.get=function(e,t){return e instanceof u.AtomInstanceBase?e.store.getState():this.getInstance(e,t).store.getState()},e.prototype.getInstance=function(e,t){var n=t||[],r=e.getKeyHash(n),o=this._instances[r];if(o)return o;var a=this.resolveAtom(e);this._graph.addNode(r);var i=a._createInstance(this,r,n);return this._instances[r]=i,i},e.prototype.inspectInstanceValues=function(e){var t={},n="string"==typeof e?e:null==e?void 0:e.key;return Object.entries(this._instances).sort((function(e,t){var n=o(e,1)[0],r=o(t,1)[0];return n.localeCompare(r)})).forEach((function(e){var r=o(e,2),a=r[0],i=r[1];(!n||i.atom.key.includes(n)||i.keyHash.includes(n))&&(t[a]=i.store.getState())})),t},e.prototype.removeOverrides=function(e){var t=this;this.overrides=d(Object.values(this.overrides).filter((function(t){return e.every((function(e){return("string"==typeof e?e:e.key)!==t.key}))}))),e.forEach((function(e){t.findInstances(e).forEach((function(e){return e._destroy(!0)}))}))},e.prototype.reset=function(e){var t;this.wipe(),e&&(this.context=e),null===(t=this._preload)||void 0===t||t.call(this,this,e||this.context)},e.prototype.setOverrides=function(e){var t=this,n=this.overrides;this.overrides=d(e),this.isInitialized&&(e.forEach((function(e){t.findInstances(e).forEach((function(e){e._destroy(!0)}))})),n&&Object.values(n).forEach((function(e){t.findInstances(e).forEach((function(e){e._destroy(!0)}))})))},e.prototype.wipe=function(){Object.values(this._instances).forEach((function(e){e._destroy(!0)})),this._scheduler.wipe(),this._scheduler.flush()},e.prototype._destroyAtomInstance=function(e){this._graph.removeNode(e),delete this._instances[e]},e.prototype.resolveAtom=function(e){var t,n,r=this,o=(null===(t=this.overrides)||void 0===t?void 0:t[e.key])||e;if(this.flags){var a=null===(n=o.flags)||void 0===n?void 0:n.find((function(e){var t;return!(null===(t=r.flags)||void 0===t?void 0:t.includes(e))}));a&&console.error('Zedux - encountered unsafe atom "'+e.key+'" with flag "'+a+'". This atom should be overridden in the current environment.')}return o},e}();t.Ecosystem=p},843:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;var o=n(5213),a=function(e){var t=0;return e.isStatic&&(t+=4),e.isExternal&&(t+=2),e.isAsync&&(t+=1),t},i=function(){function e(e){this.ecosystem=e,this.nodes={}}return e.prototype.addDependency=function(e,t,n,r,o,a){void 0===o&&(o=!1);var i=this.nodes[t],s={isAsync:o,isStatic:r,operation:n,shouldUpdate:a};return this.nodes[e].dependencies[t]=!0,i.dependents[e]?i.dependents[e].push(s):i.dependents[e]=[s],this.unscheduleDestruction(t),r||this.recalculateWeight(e,i.weight),s},e.prototype.addNode=function(e){this.nodes[e]||(this.nodes[e]={dependencies:{},dependents:{},weight:1})},e.prototype.registerExternalDependent=function(e,t,n,r,a){var i=this;void 0===a&&(a=!1);var s=e.keyHash,c=this.nodes[s];if(!c)return console.warn("Zedux - tried registering external dependent after its dependency was destroyed. This may indicate a memory leak in your application"),function(){};var u=o.generateNodeId(),l={callback:t,isAsync:a,isExternal:!0,isStatic:r,operation:n};return c.dependents[u]=[l],this.unscheduleDestruction(s),function(){l.task&&i.ecosystem._scheduler.unscheduleJob(l.task),delete c.dependents[u],i.scheduleInstanceDestruction(e.keyHash)}},e.prototype.removeDependency=function(e,t,n){var r=this.nodes[t],o=null==r?void 0:r.dependents[e];if((null==o?void 0:o.length)>1){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}else delete this.nodes[e].dependencies[t],r&&(delete r.dependents[e],n.isStatic||this.recalculateWeight(e,-r.weight),this.scheduleInstanceDestruction(t))},e.prototype.removeNode=function(e){var t=this,n=this.nodes[e];n&&(Object.keys(n.dependents).forEach((function(r){n.dependents[r].forEach((function(i){var s=a(i);i.isExternal?t.ecosystem._scheduler.scheduleJob({flagScore:s,task:function(){var e;return null===(e=i.callback)||void 0===e?void 0:e.call(i,o.GraphEdgeSignal.Destroyed)},type:o.JobType.UpdateExternalDependent}):(i.isStatic||t.recalculateWeight(r,-n.weight),delete t.nodes[r].dependencies[e],t.ecosystem._instances[r]._scheduleEvaluation({operation:i.operation,targetKey:e,targetType:o.EvaluationTargetType.Atom,type:o.EvaluationType.InstanceDestroyed},s))}))})),delete this.nodes[e])},e.prototype.scheduleDependents=function(e,t,n,i){var s=this,c=this.ecosystem._instances[e],u=this.nodes[e];Object.entries(u.dependents).forEach((function(u){var l=r(u,2),d=l[0];l[1].forEach((function(r){if(!r.isStatic&&!r.task){var u=a(r);if(!r.isExternal){if(r.shouldUpdate&&!r.shouldUpdate(n))return;return s.ecosystem._instances[d]._scheduleEvaluation({newState:n,oldState:i,operation:r.operation,reasons:t,targetKey:e,targetType:o.EvaluationTargetType.Atom,type:o.EvaluationType.StateChanged},u)}var l=function(){var e;r.task=void 0,null===(e=r.callback)||void 0===e||e.call(r,o.GraphEdgeSignal.Updated,c.store.getState())};s.ecosystem._scheduler.scheduleJob({flagScore:u,task:l,type:o.JobType.UpdateExternalDependent}),r.task=function(){return s.ecosystem._scheduler.unscheduleJob(l)}}}))}))},e.prototype.recalculateWeight=function(e,t){var n=this,r=this.nodes[e];r&&(r.weight+=t,Object.keys(r.dependents).forEach((function(e){n.recalculateWeight(e,t)})))},e.prototype.scheduleInstanceDestruction=function(e){var t=this.nodes[e];t&&!Object.keys(t.dependents).length&&this.ecosystem._instances[e]._scheduleDestruction()},e.prototype.unscheduleDestruction=function(e){var t,n=this.nodes[e];if(1===Object.keys(n.dependents).length){var r=this.ecosystem._instances[e];null===(t=r._cancelDestruction)||void 0===t||t.call(r)}},e}();t.Graph=i},7099:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheduler=void 0;var r=n(5213),o=function(){function e(e){this.ecosystem=e,this.scheduledJobs=[]}return e.prototype.flush=function(){this._isRunning||(this._timeoutId&&clearTimeout(this._timeoutId),this.runJobs())},e.prototype.scheduleJob=function(e){var t=this,n=0===this.scheduledJobs.length;e.type===r.JobType.RunEffect?this.scheduledJobs.push(e):e.type===r.JobType.EvaluateAtom?this.insertEvaluateAtomJob(e):this.insertUpdateExternalDependentJob(e),n&&(this._timeoutId=setTimeout((function(){t._timeoutId=void 0,t.runJobs()})))},e.prototype.unscheduleJob=function(e){this.scheduledJobs=this.scheduledJobs.filter((function(t){return t.task!==e}))},e.prototype.wipe=function(){this.scheduledJobs=this.scheduledJobs.filter((function(e){return e.type===r.JobType.UpdateExternalDependent}))},e.prototype.findInsertionIndex=function(e,t,n){void 0===t&&(t=Math.ceil(this.scheduledJobs.length/2)-1),void 0===n&&(n=1);var r=this.scheduledJobs[t];if(void 0===r)return t;var o=e(r);if(!o)return t;var a=Math.pow(2,n);if(a>this.scheduledJobs.length)return t+(1===o?1:0);var i=Math.round(this.scheduledJobs.length/a),s=Math.min(this.scheduledJobs.length-1,Math.max(0,t+Math.ceil(i/2)*o));return this.findInsertionIndex(e,s,n+1)},e.prototype.insertEvaluateAtomJob=function(e){var t=this.ecosystem._graph.nodes,n=t[e.keyHash],o=this.findInsertionIndex((function(e){if(e.type!==r.JobType.EvaluateAtom)return-1;var o=t[e.keyHash];return n.weight<o.weight?-1:+(n.weight>o.weight)}));-1!==o?this.scheduledJobs.splice(o,0,e):this.scheduledJobs.push(e)},e.prototype.insertUpdateExternalDependentJob=function(e){var t=this.findInsertionIndex((function(t){return t.type===r.JobType.EvaluateAtom?1:t.type!==r.JobType.UpdateExternalDependent||e.flagScore<t.flagScore?-1:+(e.flagScore>t.flagScore)}));-1!==t?this.scheduledJobs.splice(t,0,e):this.scheduledJobs.push(e)},e.prototype.runJobs=function(){for(this._isRunning=!0;this.scheduledJobs.length;){this.scheduledJobs.shift().task()}this._isRunning=!1},e}();t.Scheduler=o},5190:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Atom=void 0;var a=n(9059),i=n(5213),s=n(7659),c=function(e){function t(t,n,r){var o=e.call(this)||this;return o.key=t,o._value=n,o.flags=null==r?void 0:r.flags,o.forwardPromises=null==r?void 0:r.forwardPromises,o.internalId=i.generateImplementationId(),o.maxInstances=null==r?void 0:r.maxInstances,o.ttl=null==r?void 0:r.ttl,o}return o(t,e),t.prototype._createInstance=function(e,t,n){return new s.AtomInstance(e,this,t,n)},t.prototype.getKeyHash=function(e){var t=""+this.key;return(null==e?void 0:e.length)?t+"-"+i.hashParams(e):t},t.prototype.override=function(e){return a.atom(this.key,e,{flags:this.flags,maxInstances:this.maxInstances,ttl:this.ttl})},t}(n(7779).StandardAtomBase);t.Atom=c},3662:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtomBase=void 0;var n=function(){};t.AtomBase=n},6687:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.Ion=void 0;var s=n(5190),c=n(3217),u=n(54),l=n(7967),d=n(5776),p=function(e){function t(t,n,r,o){var s=this;return(s=e.call(this,t,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=l.injectEcosystem(),s=l.injectGet(),u=l.injectGetInstance(),p=d.diContext.consume().instance,f=n.apply(void 0,i([{ecosystem:o,get:s,getInstance:u}],a(e))),h=c.api(f);return r&&h.addSetStateInterceptor((function(e){var t=r({ecosystem:o,get:s,getInstance:u,instance:p,set:function(e,t,n){var r=n?t:[],a=n||t;o.getInstance(e,r).setState(a)}},e);return void 0===t?p.store.getState():t})),h}),o)||this)._get=n,s._set=r,s}return o(t,e),t.prototype.override=function(e,t){return u.ion(this.key,e||this._get,t||this._set,{flags:this.flags})},t}(s.Atom);t.Ion=p},7972:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalAtom=void 0;var c=n(6370),u=n(5213),l=function(e){function t(t,n,r){return e.call(this,t,n,a({ttl:0},r))||this}return o(t,e),t.prototype.getKeyHash=function(t){return"string"==typeof t[0]?e.prototype.getKeyHash.call(this,t):e.prototype.getKeyHash.call(this,s([u.generateLocalId()],i(t.slice(1))))},t.prototype.override=function(e){return c.localAtom(this.key,e,{flags:this.flags})},t}(n(5190).Atom);t.LocalAtom=l},7779:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.StandardAtomBase=void 0;var a=n(5213),i=n(7294),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getReactContext=function(){return this.reactContext?this.reactContext:this.reactContext=i.createContext(a.EMPTY_CONTEXT)},t}(n(3662).AtomBase);t.StandardAtomBase=s},3499:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6687),t),o(n(5190),t),o(n(3662),t),o(n(7779),t),o(n(7972),t),o(n(7659),t),o(n(9426),t),o(n(5346),t),o(n(7044),t)},9426:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AtomInstanceBase=void 0;var n=function(){};t.AtomInstanceBase=n},7440:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AtomInstanceProvider=void 0;var o=r(n(7294));t.AtomInstanceProvider=function(e){var t=e.children,n=e.instance,r=e.instances;if(!n&&!r)throw new Error("Zedux - AtomInstanceProvider requires either an `instance` or `instances` prop");var a=(r||[n]).reduceRight((function(e,t){var n=t.atom.getReactContext();return o.default.createElement(n.Provider,{value:t},e)}),t);return o.default.createElement(o.default.Fragment,null,a)}},8753:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EcosystemProvider=void 0;var i=a(n(7294)),s=n(3499),c=n(530),u=n(4171),l=n(7271);t.EcosystemProvider=function(e){var t=e.children,n=e.context,r=e.defaultForwardPromises,o=e.defaultTtl,a=e.destroyOnUnmount,d=void 0===a||a,p=e.ecosystem,f=e.flags,h=e.id,y=e.overrides,v=e.preload,m=i.useMemo((function(){var e=p||c.ecosystem({context:n,defaultForwardPromises:r,defaultTtl:o,destroyOnUnmount:d,flags:f,id:h,overrides:y,preload:v});return l.globalStore.getState().ecosystems[e.ecosystemId]||l.globalStore.dispatch(l.addEcosystem(e)),e}),[h,p]),g=i.useRef(!0),_=u.useStableReference(y);return i.useEffect((function(){!g.current&&_&&m.setOverrides(_)}),[_]),i.useEffect((function(){return m._refCount+=1,function(){m._refCount-=1,m._destroyOnUnmount&&m.destroy()}}),[]),i.useEffect((function(){g.current=!1}),[]),i.default.createElement(s.ecosystemContext.Provider,{value:m.ecosystemId},t)}},7768:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(7440),t),o(n(8753),t)},3217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.api=void 0;var r=n(5346);t.api=function(e){return new r.AtomApi(e)}},9059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.atom=void 0;var r=n(5190);t.atom=function(e,t,n){if(!e)throw new TypeError("Zedux - All atoms must have a key");return new r.Atom(e,t,n)}},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ecosystem=void 0;var r=n(7044);t.ecosystem=function(e){return void 0===e&&(e={}),new r.Ecosystem(e)}},254:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3217),t),o(n(9059),t),o(n(530),t),o(n(54),t),o(n(6370),t)},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ion=void 0;var r=n(6687);t.ion=function(e,t,n,o){var a="function"==typeof n?n:void 0,i=o||n;return new r.Ion(e,t,a,i)}},6370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localAtom=void 0;var r=n(7972);t.localAtom=function(e,t,n){if(!e)throw new TypeError("Zedux - All atoms must have a key");return new r.LocalAtom(e,t,n)}},5275:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(8045),t),o(n(7198),t),o(n(7254),t),o(n(5622),t),o(n(8514),t),o(n(1111),t),o(n(5929),t),o(n(9180),t)},8045:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAtomConsumer=void 0;var r=n(7294),o=n(3499),a=n(5929);t.useAtomConsumer=function(e,t){var n=a.useEcosystem(),i=r.useContext(e.getReactContext());if(!t||i instanceof o.AtomInstance)return i;if("boolean"==typeof t)throw new ReferenceError('Zedux - useAtomConsumer - No atom instance was provided for atom "'+e.key+'".');return n.getInstance(e,t)}},7198:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.useAtomInstance=void 0;var o=n(7294),a=n(3499),i=n(147),s=n(5213),c=n(5929),u=n(4171);t.useAtomInstance=function(e,t,n){void 0===n&&(n=!0);var l=r(o.useState(),2),d=l[0],p=l[1],f=c.useEcosystem(),h=u.useStableReference(t),y=o.useRef(),v=o.useMemo((function(){y.current&&(y.current(),y.current=void 0);var t=e instanceof a.AtomInstanceBase?e:f.getInstance(e,h);if(t.promise){if(t._promiseStatus===i.PromiseStatus.Pending)throw t.promise;if(t._promiseStatus===i.PromiseStatus.Rejected)throw t._promiseError}return n?(y.current=f._graph.registerExternalDependent(t,(function(e){e===s.GraphEdgeSignal.Destroyed&&p({})}),"useAtomInstance",!0),t):t}),[e,f,d,n,h]);return o.useLayoutEffect((function(){return function(){var e;return null===(e=y.current)||void 0===e?void 0:e.call(y)}}),[]),v}},7254:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.useAtomInstanceDynamic=void 0;var o=n(7294),a=n(3499),i=n(147),s=n(5213),c=n(5929),u=n(4171);t.useAtomInstanceDynamic=function(e,t){var n=r(o.useState(),2)[1],l=r(o.useState(),2),d=l[0],p=l[1],f=c.useEcosystem(),h=u.useStableReference(t),y=o.useRef(),v=o.useMemo((function(){y.current&&(y.current(),y.current=void 0);var t=e instanceof a.AtomInstanceBase?e:f.getInstance(e,h);if(t.promise){if(t._promiseStatus===i.PromiseStatus.Pending)throw t.promise;if(t._promiseStatus===i.PromiseStatus.Rejected)throw t._promiseError}return y.current=f._graph.registerExternalDependent(t,(function(e,t){e!==s.GraphEdgeSignal.Destroyed?n(t):p({})}),"useAtomInstanceDynamic",!1),t}),[e,f,d,h]);return o.useLayoutEffect((function(){return function(){var e;return null===(e=y.current)||void 0===e?void 0:e.call(y)}}),[]),v}},5622:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.useAtomSelector=void 0;var o=n(7198),a=n(7294),i=n(5213);t.useAtomSelector=function(e,t,n){var s=n?t:[],c=n||t;return function(e,t){var n=r(a.useState((function(){return t(e.store.getState())})),2),o=n[0],s=n[1],c=r(a.useState(),2)[1],u=a.useRef(t);return u.current=t,a.useEffect((function(){var t;return e.ecosystem._graph.registerExternalDependent(e,(function(e,n){if(e!==i.GraphEdgeSignal.Destroyed){var r=u.current(n);r!==t&&s(t=r)}else c({})}),"useAtomInstanceSelector",!1)}),[e]),o}(o.useAtomInstance(e,s,!1),c)}},8514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAtomState=void 0;var r=n(7254);t.useAtomState=function(e,t){var n=r.useAtomInstanceDynamic(e,t);return[n.store.getState(),n.setState]}},1111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAtomValue=void 0;var r=n(7254);t.useAtomValue=function(e,t){return r.useAtomInstanceDynamic(e,t).store.getState()}},5929:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEcosystem=void 0;var r=n(7294),o=n(3499),a=n(6689);t.useEcosystem=function(){return a.getEcosystem(r.useContext(o.ecosystemContext))}},9180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useGetInstance=void 0;var r=n(5929);t.useGetInstance=function(e){var t=r.useEcosystem();return e?function(n){return t.getInstance(e,n)}:function(e,n){return t.getInstance(e,n)}}},4171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStableReference=void 0;var r=n(7294);t.useStableReference=function(e){var t=r.useRef(e);return r.useMemo((function(){return e===t.current?t.current:e&&t.current?e.length!==t.current.length||e.some((function(e,n){var r;return(null===(r=t.current)||void 0===r?void 0:r[n])!==e}))?(t.current=e,e):t.current:e}),[e])}},9061:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.asyncUtils=void 0,o(n(8142),t),o(n(3499),t),o(n(7768),t),o(n(254),t),o(n(5275),t),o(n(7967),t),o(n(6689),t);var a=n(4554);Object.defineProperty(t,"asyncUtils",{enumerable:!0,get:function(){return a.asyncUtils}}),o(n(147),t)},7967:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(7996),t),o(n(5599),t),o(n(5557),t),o(n(3300),t),o(n(9097),t),o(n(107),t),o(n(7997),t),o(n(4399),t),o(n(7761),t),o(n(5889),t),o(n(5587),t),o(n(8486),t),o(n(6346),t),o(n(352),t),o(n(8103),t),o(n(8600),t),o(n(3508),t)},7996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectAsyncEffect=void 0;var r=n(5213),o=n(4554),a=n(4399),i=function(e,t){var n=[],r=!1;return function(){t.asyncStore.dispatch(o.asyncUtils.actions.load());var a=e((function(e){if(r)return e();n.push(e)}));a&&"function"==typeof a.then&&a.then((function(e){var n;r||(null===(n=t.resolveRef)||void 0===n||n.call(t,e),t.asyncStore.dispatch(o.asyncUtils.actions.loadSuccess(e)))})).catch((function(e){var n;r||(null===(n=t.rejectRef)||void 0===n||n.call(t,e),t.asyncStore.dispatch(o.asyncUtils.actions.loadError(e)))})),t.cleanupTask=function(){n.forEach((function(e){return e()})),r=!0,t.cleanupTask=void 0}}};t.injectAsyncEffect=function(e,t){var n=a.injectEcosystem(),s=r.split("injectAsyncEffect",r.InjectorType.AsyncEffect,(function(){var a=o.asyncUtils.createAsyncStore(),s=a.subscribe({effects:function(e){var t,n=e.action;(null==n?void 0:n.type)===o.asyncUtils.actions.cancel.type&&(null===(t=c.cleanupTask)||void 0===t||t.call(c))}}),c={cleanup:function(){var e;null===(e=c.cleanupTask)||void 0===e||e.call(c),s.unsubscribe()},deps:t,asyncStore:a,subscription:s,type:r.InjectorType.AsyncEffect};c.promise=new Promise((function(e,t){c.resolveRef=e,c.rejectRef=t}));var u=i(e,c);return c.cleanupTask=function(){n._scheduler.unscheduleJob(u),c.cleanupTask=void 0},n._scheduler.scheduleJob({task:u,type:r.JobType.RunEffect}),c}),(function(o){var a;if(!r.haveDepsChanged(o.deps,t))return o;null===(a=o.cleanupTask)||void 0===a||a.call(o);var s=i(e,o);return o.cleanupTask=function(){n._scheduler.unscheduleJob(s),o.cleanupTask=void 0},o.deps=t,n._scheduler.scheduleJob({task:s,type:r.JobType.RunEffect}),o}));return[s.promise,s.asyncStore]}},5599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectAtomInstance=void 0;var r=n(5213),o=n(5587),a=n(4399),i=n(3499);t.injectAtomInstance=function(e,t,n,s){void 0===n&&(n="injectAtomInstance"),void 0===s&&(s=!0);var c=a.injectEcosystem(),u=o.injectGetInstance();return r.split("injectAtomInstance",r.InjectorType.Atom,(function(){return{instance:s?u(e,t,[r.GraphEdgeDynamicity.Static,n]):e instanceof i.AtomInstanceBase?e:c.getInstance(e,t),shouldRegisterDependency:s,type:r.InjectorType.Atom}}),(function(o){var a=(e instanceof i.AtomInstanceBase?e.atom:e).internalId!==o.instance.atom.internalId,l=r.haveDepsChanged(o.instance.params,t,!1);if(!a&&!l&&s===o.shouldRegisterDependency)return s&&u(e,t),o;var d=s?u(e,t,[r.GraphEdgeDynamicity.Static,n]):e instanceof i.AtomInstanceBase?e:c.getInstance(e,t);return o.instance=d,o})).instance}},5557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectAtomInstanceDynamic=void 0;var r=n(3499),o=n(5213),a=n(5587),i="injectAtomInstanceDynamic";t.injectAtomInstanceDynamic=function(e,t,n){void 0===n&&(n=i);var s=a.injectGetInstance();return o.split(i,o.InjectorType.AtomDynamic,(function(){return{instance:s(e,t,[o.GraphEdgeDynamicity.Dynamic,n]),type:o.InjectorType.AtomDynamic}}),(function(a){var i=(e instanceof r.AtomInstanceBase?e.atom:e).internalId!==a.instance.atom.internalId,c=o.haveDepsChanged(a.instance.params,t,!1),u=s(e,t,[o.GraphEdgeDynamicity.Dynamic,n]);return i||c?(a.instance=u,a):a})).instance}},3300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectAtomSelector=void 0;var r=n(5599),o=n(5213),a=n(4399);t.injectAtomSelector=function(e,t,n){var i=n?t:[],s=n||t;return function(e,t){var n=a.injectEcosystem();return o.split("injectAtomSelector",o.InjectorType.Selector,(function(r){var a=r.instance,i=n._graph.addDependency(a.keyHash,e.keyHash,"injectAtomSelector",!1,!1,(function(e){var t=s.selector(e),n=t!==s.selectorResult;return s.selectorResult=t,n})),s={cleanup:function(){n._graph.removeDependency(a.keyHash,e.keyHash,i)},instance:e,selector:t,selectorResult:t(e.store.getState()),type:o.InjectorType.Selector};return s}),(function(r,o){var a,i=o.instance;if(e!==r.instance){null===(a=r.cleanup)||void 0===a||a.call(r);var s=n._graph.addDependency(i.keyHash,e.keyHash,"injectAtomSelector",!1,!1,(function(e){var t=r.selector(e),n=t!==r.selectorResult;return r.selectorResult=t,n}));r.cleanup=function(){n._graph.removeDependency(i.keyHash,e.keyHash,s)},r.instance=e}if(r.selector===t)return r;var c=t(e.store.getState());return r.selectorResult=c,r.selector=t,r})).selectorResult}(r.injectAtomInstance(e,i,"injectAtomSelector",!1),s)}},9097:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectAtomState=void 0;var r=n(5557);t.injectAtomState=function(e,t){var n=r.injectAtomInstanceDynamic(e,t,"injectAtomState");return[n.store.getState(),n.setState]}},107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectAtomValue=void 0;var r=n(5557);t.injectAtomValue=function(e,t){return r.injectAtomInstanceDynamic(e,t,"injectAtomValue").store.getState()}},7997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectCallback=void 0;var r=n(6346);t.injectCallback=function(e,t){return r.injectMemo((function(){return e}),t)}},4399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectEcosystem=void 0;var r=n(5776);t.injectEcosystem=function(){return r.diContext.consume().instance.ecosystem}},7761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectEffect=void 0;var r=n(5213),o=n(2913),a=function(e,t){return function(){var n=e();t.cleanup=n||void 0}};t.injectEffect=function(e,t){r.split("injectEffect",o.InjectorType.Effect,(function(n){var r=n.instance,i={deps:t,type:o.InjectorType.Effect},s=a(e,i);return i.cleanup=function(){r.ecosystem._scheduler.unscheduleJob(s),i.cleanup=void 0},r.ecosystem._scheduler.scheduleJob({task:s,type:o.JobType.RunEffect}),i}),(function(n,i){var s,c=i.instance;if(!r.haveDepsChanged(null==n?void 0:n.deps,t))return n;null===(s=n.cleanup)||void 0===s||s.call(n);var u=a(e,n);return n.cleanup=function(){c.ecosystem._scheduler.unscheduleJob(u),n.cleanup=void 0},n.deps=t,c.ecosystem._scheduler.scheduleJob({task:u,type:o.JobType.RunEffect}),n}))}},5889:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};Object.defineProperty(t,"__esModule",{value:!0}),t.injectGet=void 0;var a=n(5776);t.injectGet=function(){var e=a.diContext.consume().instance;return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e._get.apply(e,o([],r(t)))}}},5587:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectGetInstance=void 0;var r=n(5213),o=n(5776),a=[r.GraphEdgeDynamicity.Static,"getInstance"];t.injectGetInstance=function(e){var t=o.diContext.consume().instance;return e?function(n,r){return void 0===r&&(r=a),t._getInstance(e,n,r)}:function(e,n,r){return void 0===r&&(r=a),t._getInstance(e,n,r)}}},8486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectInvalidate=void 0;var r=n(5213),o=n(5776);t.injectInvalidate=function(){var e=o.diContext.consume().instance;return function(){e._scheduleEvaluation({operation:"injectInvalidate",targetType:r.EvaluationTargetType.Injector,type:r.EvaluationType.CacheInvalidated})}}},6346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectMemo=void 0;var r=n(5213),o=n(2913);t.injectMemo=function(e,t){return r.split("injectMemo",o.InjectorType.Memo,(function(){return{type:o.InjectorType.Memo,deps:t,memoizedVal:e()}}),(function(n){var o=r.haveDepsChanged(n.deps,t)?e():n.memoizedVal;return n.deps=t,n.memoizedVal=o,n})).memoizedVal}},352:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectRef=void 0;var r=n(5213);t.injectRef=function(e){return r.split("injectRef",r.InjectorType.Ref,(function(){return{ref:{current:e},type:r.InjectorType.Ref}})).ref}},8103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectState=void 0;var r=n(8142),o=n(5213),a=n(2913);t.injectState=function(e){var t=o.split("injectState",a.InjectorType.State,(function(t){var n=t.instance,o=r.createStore();void 0!==e&&o.setState(e);var i=o.subscribe({effects:function(e){var t=e.action,r=e.newState,o=e.oldState;r!==o&&n._scheduleEvaluation({newState:r,oldState:o,operation:"injectState",reasons:[{action:t,newState:r,oldState:o,operation:"dispatch",targetType:a.EvaluationTargetType.Store,type:a.EvaluationType.StateChanged}],targetType:a.EvaluationTargetType.Injector,type:a.EvaluationType.StateChanged})}});return{cleanup:function(){return i.unsubscribe()},store:o,type:a.InjectorType.State}})).store;return[t.getState(),t.setState,t]}},8600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectStore=void 0;var r=n(8142),o=n(5213),a=function(e,t){return t.subscribe({effects:function(t){var n=t.action,r=t.newState,a=t.oldState;r===a||e._isEvaluating||e._scheduleEvaluation({newState:r,oldState:a,operation:"injectStore",reasons:[{action:n,newState:r,oldState:a,operation:"dispatch",targetType:o.EvaluationTargetType.Store,type:o.EvaluationType.StateChanged}],targetType:o.EvaluationTargetType.Injector,type:o.EvaluationType.StateChanged})}})};t.injectStore=function(e,t){return void 0===t&&(t=!1),o.split("injectStore",o.InjectorType.Store,(function(n){var i=n.instance,s=("function"==typeof e?e:function(){return r.createStore(null,e)})(),c=t&&a(i,s);return{cleanup:c?function(){return c.unsubscribe()}:void 0,store:s,type:o.InjectorType.Store}}),(function(e,n){var r,o=n.instance;if(!!e.cleanup===t)return e;if(!t)return null===(r=e.cleanup)||void 0===r||r.call(e),e.cleanup=void 0,e;var i=a(o,e.store);return e.cleanup=function(){return i.unsubscribe()},e})).store}},3508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.injectWhy=void 0;var r=n(5213),o=n(5776);t.injectWhy=function(){return r.split("injectWhy",r.InjectorType.Why,(function(){return{type:r.InjectorType.Why}}),(function(e){return e})),o.diContext.consume().instance._evaluationReasons}},6068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=t.updateEcosystem=t.removeAtomInstance=t.removeEcosystem=t.addAtomInstance=t.addEcosystem=void 0;var r=n(8142).createActorFactory("@@react-zedux","global");t.addEcosystem=r("addEcosystem"),t.addAtomInstance=r("addAtomInstance"),t.removeEcosystem=r("removeEcosystem"),t.removeAtomInstance=r("removeAtomInstance"),t.updateEcosystem=r("updateEcosystem"),t.wipe=r("wipe")},9024:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.atomsReducer=void 0;var o=n(8142),a=n(6068);t.atomsReducer=o.createReducer({}).reduce(a.addAtomInstance,(function(e,t){var n,o=t.atom;return r(r({},e),((n={})[o.internalId]=o,n))})).reduce(a.wipe,(function(){return{}}))},1029:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ecosystemsReducer=void 0;var o=n(8142),a=n(6068),i={};t.ecosystemsReducer=o.createReducer(i).reduce(a.addEcosystem,(function(e,t){var n;return r(r({},e),((n={})[t.ecosystemId]=t,n))})).reduce(a.removeEcosystem,(function(e,t){var n=t.ecosystemId,o=r({},e);return delete o[n],o})).reduce(a.wipe,(function(){return i}))},7271:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.globalStore=void 0;var a=n(8142),i=n(9024),s=n(1029);o(n(6068),t),t.globalStore=a.createStore({atoms:i.atomsReducer,ecosystems:s.ecosystemsReducer})},6689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zeduxGlobalStore=t.wipe=t.getEcosystem=void 0;var r=n(530),o=n(7271);t.getEcosystem=function(e){return o.globalStore.getState().ecosystems[e]||r.ecosystem({id:e})};t.wipe=function(){Object.values(o.globalStore.getState().ecosystems).forEach((function(e){e.destroy(!0)})),o.globalStore.dispatch(o.wipe())},t.zeduxGlobalStore=o.globalStore},147:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateType=t.PromiseStatus=t.AsyncStatus=t.ActiveState=void 0,function(e){e.Active="Active",e.Destroyed="Destroyed",e.Stale="Stale",e.Initializing="Initializing"}(t.ActiveState||(t.ActiveState={})),function(e){e.Error="Error",e.Idle="Idle",e.Loading="Loading",e.Success="Success"}(t.AsyncStatus||(t.AsyncStatus={})),function(e){e[e.Pending=0]="Pending",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(t.PromiseStatus||(t.PromiseStatus={})),function(e){e[e.Store=0]="Store",e[e.Value=1]="Value"}(t.StateType||(t.StateType={}))},4554:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.asyncUtils=void 0;var a=n(8142),i=n(147),s=a.createActorFactory("@zedux/react/asyncMachine"),c=s("cancel"),u=s("load"),l=s("loadSuccess"),d=s("loadError"),p=s("reset"),f=o(a.states(i.AsyncStatus.Error,i.AsyncStatus.Idle,i.AsyncStatus.Loading,i.AsyncStatus.Success),4),h=f[0],y=f[1],v=f[2],m=f[3],g=a.createMachine(y.on(u,v),v.on(l,m).on(d,h).on(c,y),m.on(p,y),h.on(p,y)),_=function(){return function(e,t){void 0===e&&(e={isError:!1,isIdle:!0,isLoading:!1,isSuccess:!1,status:i.AsyncStatus.Idle});var n=g(e.status,t);if(n===e.status)return e;t.type===c.type&&(e.prevStatus===m.type?n=m.type:e.prevStatus===h.type&&(n=h.type));var o=r(r({},e),{isError:n===i.AsyncStatus.Error,isIdle:n===i.AsyncStatus.Idle,isLoading:n===i.AsyncStatus.Loading,isSuccess:n===i.AsyncStatus.Success,prevStatus:e.status,status:n});return t.type===l.type&&(o.data=t.payload),t.type===d.type&&(o.error=t.payload),o}};t.asyncUtils={actions:{cancel:c,load:u,loadSuccess:l,loadError:d,reset:p},createAsyncStore:function(){return a.createStore(_())},states:i.AsyncStatus}},9209:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCallStackContext=void 0;var n=[];t.createCallStackContext=function(){var e={consume:function(t){void 0===t&&(t=!0);var r=n.find((function(t){return t.context===e}));if(!r&&t)throw new Error("Zedux - Injectors can only be used in instance factories");return(null==r?void 0:r.value)||null},provide:function(t,r){n.unshift({context:e,value:t});var o=r();return n.shift(),o}};return e}},5776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.diContext=void 0;var r=n(9209);t.diContext=r.createCallStackContext()},5196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateInjector=t.split=t.haveDepsChanged=t.hashParams=t.generateNodeId=t.generateLocalId=t.generateImplementationId=t.generateAppId=t.EMPTY_CONTEXT=void 0;var r=n(8291),o=n(5776),a=n(147),i=n(3499),s=0,c=function(){return s+=1};t.EMPTY_CONTEXT={};t.generateAppId=function(){return"ecosystem-"+c()};t.generateImplementationId=function(){return"im-"+c()};t.generateLocalId=function(){return"lo-"+c()};t.generateNodeId=function(){return"no-"+c()};t.hashParams=function(e){return JSON.stringify(e,(function(e,t){return t instanceof i.AtomInstance?t.keyHash:r.isPlainObject(t)?Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{}):t}))};t.haveDepsChanged=function(e,t,n){return void 0===n&&(n=!0),e&&t?e.length!==t.length||e.some((function(e,n){return t[n]!==e})):!!n||e&&t};t.split=function(e,t,n,r){var i,s=o.diContext.consume();if(s.instance._activeState===a.ActiveState.Initializing){var c=n(s);return s.injectors.push(c),c}var u=null===(i=s.instance._injectors)||void 0===i?void 0:i[s.injectors.length];if(!u||u.type!==t)throw new Error("Zedux Error - "+e+' in atom "'+s.instance.atom.key+'" - injectors cannot be added, removed, or reordered');var l=r?r(u,s):u;return s.injectors.push(l),l};t.validateInjector=function(e,t,n){var r;if(n.instance._activeState!==a.ActiveState.Initializing){var o=null===(r=n.instance._injectors)||void 0===r?void 0:r[n.injectors.length];if(!o||o.type!==t)throw new Error("Zedux Error - "+e+' in atom "'+n.instance.atom.key+'" - injectors cannot be added, removed, or reordered');return o}}},5213:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5196),t),o(n(2913),t)},2913:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JobType=t.InjectorType=t.GraphEdgeSignal=t.GraphEdgeDynamicity=t.EvaluationType=t.EvaluationTargetType=void 0,function(e){e.Atom="Atom",e.External="External",e.Injector="Injector",e.Store="Store"}(t.EvaluationTargetType||(t.EvaluationTargetType={})),function(e){e.CacheInvalidated="cache invalidated",e.InstanceDestroyed="atom instance destroyed",e.StateChanged="state changed"}(t.EvaluationType||(t.EvaluationType={})),function(e){e[e.Dynamic=1]="Dynamic",e[e.Static=2]="Static"}(t.GraphEdgeDynamicity||(t.GraphEdgeDynamicity={})),function(e){e.Destroyed="Destroyed",e.Updated="Updated"}(t.GraphEdgeSignal||(t.GraphEdgeSignal={})),function(e){e.AsyncEffect="AsyncEffect",e.Atom="Atom",e.AtomDynamic="AtomDynamic",e.Effect="Effect",e.Exports="Exports",e.Memo="Memo",e.Ref="Ref",e.Selector="Selector",e.State="State",e.Store="Store",e.Value="Value",e.Why="Why"}(t.InjectorType||(t.InjectorType={})),function(e){e.EvaluateAtom="EvaluateAtom",e.RunEffect="RunEffect",e.UpdateExternalDependent="UpdateExternalDependent"}(t.JobType||(t.JobType={}))},9342:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var r=n(4034),o=n(9973),a=(n(7294),n(3905)),i=n(393),s={id:"using-atoms",title:"Using Atoms"},c={unversionedId:"walkthrough/using-atoms",id:"walkthrough/using-atoms",isDocsHomePage:!1,title:"Using Atoms",description:"In the quick start, we learned a few basic ways to instantiate and consume atoms. In this page, we'll cover more hooks and injectors for atom instantiation and consumption, as well as how to interact with atom instances directly.",source:"@site/docs/walkthrough/using-atoms.mdx",sourceDirName:"walkthrough",slug:"/walkthrough/using-atoms",permalink:"/zedux/docs/walkthrough/using-atoms",editUrl:"https://github.com/Omnistac/zedux/tree/master/docs/walkthrough/using-atoms.mdx",version:"current",frontMatter:{id:"using-atoms",title:"Using Atoms"},sidebar:"react",previous:{title:"Creating Atoms",permalink:"/zedux/docs/walkthrough/creating-atoms"},next:{title:"Ecosystems",permalink:"/zedux/docs/walkthrough/ecosystems"}},u=[{value:"Dynamic Hooks &amp; Injectors",id:"dynamic-hooks--injectors",children:[{value:"<code>useAtomSelector</code>",id:"useatomselector",children:[]},{value:"<code>useAtomState</code>",id:"useatomstate",children:[]},{value:"<code>useAtomValue</code>",id:"useatomvalue",children:[]}]},{value:"Static Hooks/Injectors",id:"static-hooksinjectors",children:[{value:"<code>useAtomConsumer</code>",id:"useatomconsumer",children:[]},{value:"<code>useAtomInstance</code>",id:"useatominstance",children:[]},{value:"<code>useGetInstance</code>",id:"usegetinstance",children:[]}]},{value:"Instances",id:"instances",children:[{value:"<code>.store</code>",id:"store",children:[]},{value:"<code>.setState()</code>",id:"setstate",children:[]},{value:"<code>.dispatch()</code>",id:"dispatch",children:[]},{value:"<code>.exports</code>",id:"exports",children:[]},{value:"<code>.invalidate()</code>",id:"invalidate",children:[]},{value:"Hooks and Injectors",id:"hooks-and-injectors",children:[]}]},{value:"Recap",id:"recap",children:[]},{value:"Next Steps",id:"next-steps",children:[]}],l={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"In the quick start, we learned a few basic ways to instantiate and consume atoms. In this page, we'll cover more hooks and injectors for atom instantiation and consumption, as well as how to interact with atom instances directly."),(0,a.kt)("h2",{id:"dynamic-hooks--injectors"},"Dynamic Hooks & Injectors"),(0,a.kt)("p",null,"Some hooks create a ",(0,a.kt)("a",{parentName:"p",href:"../api/glossary#dynamic-graph-dependency"},"dynamic graph dependency")," on the atom. This means that when the atom instance's store's state changes, components that use these hooks will rerender."),(0,a.kt)("p",null,"All these hooks have complementary injectors. When the injected atom instance's state changes, atoms that use these injectors will reevaluate."),(0,a.kt)("h3",{id:"useatomselector"},(0,a.kt)("inlineCode",{parentName:"h3"},"useAtomSelector")),(0,a.kt)("p",null,"Returns a portion or derivation of the state of an atom instance's store. Also ensures that the component only reevaluates when the selector's result changes. Similar to Redux' ",(0,a.kt)("a",{parentName:"p",href:"https://react-redux.js.org/api/hooks#useselector"},(0,a.kt)("inlineCode",{parentName:"a"},"useSelector()")),"."),(0,a.kt)(i.u,{resultVar:"SelectorSerendipity",mdxType:"LiveEditor"},"\nconst countersAtom = atom('counters', () => ({\n  a: 0,\n  b: 0\n}))\n\nfunction SelectorSerendipity() {\n  // whenever countersAtom's state changes, this selector will run.\n  // If the selector returns a new value, this component will rerender.\n  const counterA = useAtomSelector(countersAtom, ({ a }) => a)\n  const instance = useAtomInstance(countersAtom)\n  const { setState } = instance\n\n  return (\n    <>\n      <div>Counter A: {counterA}</div>\n      <button onClick={() => setState(val => ({ ...val, a: val.a + 1 }))}>\n        Increment Counter A (triggers rerender)\n      </button>\n      <div>Counter B: {instance.store.getState().b}</div>\n      <button onClick={() => setState(val => ({ ...val, b: val.b + 1 }))}>\n        Increment Counter B (no rerender)\n      </button>\n    </>\n  )\n}\n"),(0,a.kt)("p",null,"If the atom takes params, pass those as the second parameter to ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomSelector"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const usersByRoleAtom = ion('usersByRole', ({ get }, role: string) =>\n  get(usersAtom).filter(user => user.role === role)\n)\n\nfunction App() {\n  const userIds = useAtomSelector(\n    usersByRoleAtom,\n    // highlight-next-line\n    ['admin'],\n    users => users.map(({ id }) => id)\n  )\n  ...\n}\n")),(0,a.kt)("p",null,"Note that while you can use a selector memoizing library like ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/reselect"},"reselect"),", it isn't necessary in Zedux. If more sophisticated selector behavior is required, use selector atoms like we did with ",(0,a.kt)("inlineCode",{parentName:"p"},"usersByRoleAtom")," in the above example. ",(0,a.kt)("a",{parentName:"p",href:"../api/classes/Ion"},"Ions")," are particulary suited for this use case."),(0,a.kt)("p",null,"Selector atoms are composable, memoized by default (since they live in an atom ecosystem), and the cache size and ttl are configurable too - all because they're atoms. The memoization details can even be handled more granularly using ",(0,a.kt)("a",{parentName:"p",href:"../api/injectors/injectMemo"},(0,a.kt)("inlineCode",{parentName:"a"},"injectMemo()")),"."),(0,a.kt)("h4",{id:"injectatomselector"},(0,a.kt)("inlineCode",{parentName:"h4"},"injectAtomSelector")),(0,a.kt)("p",null,"The injector equivalent of ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomSelector")," - for use in atoms:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const userAtom = atom('user', () => {\n  const token = injectAtomSelector(authAtom, authData => authData.token)\n  ...\n})\n")),(0,a.kt)("h3",{id:"useatomstate"},(0,a.kt)("inlineCode",{parentName:"h3"},"useAtomState")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"useAtomState()")," is similar to React's ",(0,a.kt)("inlineCode",{parentName:"p"},"useState()")," hook."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import { useAtomState } from '@zedux/react'\n\nfunction App() {\n  // whenever myAtom's state changes, this component will rerender\n  const [state, setState] = useAtomState(myAtom)\n  const [withParams, setWithParams] = useAtomState(myAtom, ['a param'])\n  ...\n}\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"setState")," is a reference to the ",(0,a.kt)("inlineCode",{parentName:"p"},"setState")," function on the atom instance, which wraps the ",(0,a.kt)("inlineCode",{parentName:"p"},"setState")," function of the instance's store. It functions like a React state setter."),(0,a.kt)("p",null,"To get a reference to ",(0,a.kt)("inlineCode",{parentName:"p"},"setState")," without creating a dynamic dependency, use ",(0,a.kt)("a",{parentName:"p",href:"#useatominstance"},(0,a.kt)("inlineCode",{parentName:"a"},"useAtomInstance()")),"."),(0,a.kt)("h4",{id:"injectatomstate"},(0,a.kt)("inlineCode",{parentName:"h4"},"injectAtomState")),(0,a.kt)("p",null,"The injector equivalent of ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomState")," - for use in atoms."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const userAtom = atom('user', () => {\n  const [auth, setAuth] = injectAtomState(authAtom)\n})\n")),(0,a.kt)("h3",{id:"useatomvalue"},(0,a.kt)("inlineCode",{parentName:"h3"},"useAtomValue")),(0,a.kt)("p",null,"The simplest way to consume an atom's state. Returns an atom instance's value. Creates a dynamic graph dependency on the resolved atom instance. This means that the current component will rerender when the resolved atom instance's state changes."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"function MyComponent() {\n  // whenever myAtom's state changes, this component will rerender\n  const currentState = useAtomValue(myAtom, ['param 1', 'param 2'])\n  const paramless = useAtomValue(paramlessAtom)\n  ...\n}\n")),(0,a.kt)("h4",{id:"injectatomvalue"},(0,a.kt)("inlineCode",{parentName:"h4"},"injectAtomValue")),(0,a.kt)("p",null,"The injector equivalent of ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomValue"),". Returns an atom instance's value. Creates a dynamic graph dependency on the resolved atom instance. This means that the current atom instance will reevaluate when the resolved atom instance's state changes."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const dependentAtom = atom('dependent', () => {\n  // whenever myAtom's state changes, this atom will reevaluate\n  const currentState = injectAtomValue(myAtom)\n  ...\n})\n")),(0,a.kt)("p",null,"This injector is your main tool for Dependency Injection."),(0,a.kt)("h2",{id:"static-hooksinjectors"},"Static Hooks/Injectors"),(0,a.kt)("p",null,"The following hooks/injectors do not cause rerenders/reevaluations when the resolved atom instance's state changes. They do, however, register static graph dependencies on the resolved atom instance. This means that Zedux will prevent the instance from being cleaned up as long as the dependent depends on it."),(0,a.kt)("h3",{id:"useatomconsumer"},(0,a.kt)("inlineCode",{parentName:"h3"},"useAtomConsumer")),(0,a.kt)("p",null,"Used in conjuction with ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomInstance")," to consume atom instances provided over React context. Note that there is no such thing as ",(0,a.kt)("inlineCode",{parentName:"p"},"injectAtomConsumer"),"."),(0,a.kt)("h3",{id:"useatominstance"},(0,a.kt)("inlineCode",{parentName:"h3"},"useAtomInstance")),(0,a.kt)("p",null,"Returns a reference to an instance of the atom. Atom instances have many features."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import { useAtomInstance, useAtomValue } from '@zedux/react'\n\nfunction MyComponent() {\n  const instance = useAtomInstance(myAtom)\n  const value = useAtomValue(instance) // useAtomValue accepts an instance\n}\n")),(0,a.kt)("p",null,"In this example, when we use ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomInstance()"),", it creates a static dependency. This means MyComponent will not rerender when the instance's state changes. However, we then use another hook - ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomValue()")," - to make the dependency dynamic."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"useAtomInstance()")," can also be used in conjunction with ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomConsumer()")," to provide an instance over React context, so deeply nested children don't need to know the params of a specific atom instance they want to reuse:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import {\n  AtomInstanceProvider,\n  useAtomConsumer,\n  useAtomInstance\n} from '@zedux/react'\n\nfunction Parent() {\n  const instance = useAtomInstance(myAtom, ['some', 'params'])\n\n  return (\n    <AtomInstanceProvider instance={instance}>\n      <Child />\n    </AtomInstanceProvider>\n  )\n}\n\nfunction Child() {\n  const instance = useAtomConsumer(myAtom) // no need to pass params here\n  const value = useAtomValue(instance) // subscribe to the instance\n  ...\n}\n")),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"While ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomConsumer()")," creates a static dependency, ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomValue()")," makes it dynamic."))),(0,a.kt)("p",null,"Instances also expose lots of extra, low-level functionality. We'll cover more of that in the ",(0,a.kt)("a",{parentName:"p",href:"/not-done"},"instances walkthrough"),"."),(0,a.kt)("h4",{id:"injectatominstance"},(0,a.kt)("inlineCode",{parentName:"h4"},"injectAtomInstance")),(0,a.kt)("p",null,"The injector equivalent of ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomInstance")," - for use in atoms."),(0,a.kt)("h3",{id:"usegetinstance"},(0,a.kt)("inlineCode",{parentName:"h3"},"useGetInstance")),(0,a.kt)("p",null,"Returns a function that can be used to dynamically create/retrieve atom instances. Often used to preload atoms, especially for kicking off render-as-you-fetch React suspense flows."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-tsx"},"import { useGetInstance } from '@zedux/react'\n\nfunction BlogPostThumbnail({ id }: { id: string }) {\n  const lazyLoad = useGetInstance()\n\n  return (\n    <button\n      onClick={() => {\n        lazyLoad(blogPostAtom, [id])\n      }}\n    >\n      View Post\n    </button>\n  )\n}\n")),(0,a.kt)("p",null,"Calling the loader function instantiates the atom, if no instance has been created for the given params yet, and returns the instance."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"useGetInstance")," also accepts an optional ",(0,a.kt)("inlineCode",{parentName:"p"},"atom")," param that partially applies the returned ",(0,a.kt)("inlineCode",{parentName:"p"},"getInstance")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const getBlogPostInstance = useGetInstance(blogPostAtom)\n...\nconst instance = getBlogPostInstance([id])\n")),(0,a.kt)("h4",{id:"injectgetinstance"},(0,a.kt)("inlineCode",{parentName:"h4"},"injectGetInstance")),(0,a.kt)("p",null,"The injector equivalent of ",(0,a.kt)("inlineCode",{parentName:"p"},"useGetInstance")," - for use in atoms. This injector will also dynamically register static graph dependencies when called during synchronous atom evaluation."),(0,a.kt)("h2",{id:"instances"},"Instances"),(0,a.kt)("p",null,"You'll often interact with ",(0,a.kt)("a",{parentName:"p",href:"../api/classes/AtomInstance"},"atom instances")," directly. Atom instances have many useful properties."),(0,a.kt)("h3",{id:"store"},(0,a.kt)("inlineCode",{parentName:"h3"},".store")),(0,a.kt)("p",null,"A reference to the underlying store of this atom instance. Don't use this directly if you can avoid it. That said, there are many cases where it can be useful. We'll cover some of these in the ",(0,a.kt)("a",{parentName:"p",href:"side-effects"},"side effects walkthrough"),"."),(0,a.kt)("h3",{id:"setstate"},(0,a.kt)("inlineCode",{parentName:"h3"},".setState()")),(0,a.kt)("p",null,"The most common way to set an atom instance's state. The tuple returned by ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomState")," contains a reference to this function. ",(0,a.kt)("inlineCode",{parentName:"p"},".setState()")," accepts either the new state or a function that receives the current state and returns the new state."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const instance = getInstance(myAtom)\ninstance.setState(newState)\ninstance.setState(currentState => newState)\n")),(0,a.kt)("p",null,"This ",(0,a.kt)("inlineCode",{parentName:"p"},".setState()")," function is ",(0,a.kt)("strong",{parentName:"p"},"not")," a reference to the instance's store's ",(0,a.kt)("inlineCode",{parentName:"p"},".setState()")," function. ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.setState()")," is a wrapper around ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.store.setState()"),". This is important because ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.setState()")," allows interceptors to run before calling ",(0,a.kt)("inlineCode",{parentName:"p"},".store.setState()"),"."),(0,a.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Always prefer calling ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.setState()")," over ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.store.setState()")))),(0,a.kt)("h3",{id:"dispatch"},(0,a.kt)("inlineCode",{parentName:"h3"},".dispatch()")),(0,a.kt)("p",null,"The recommended way to dispatch actions to the instance's store."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const instance = getInstance(myAtom)\ninstance.dispatch({ type: 'some-type' })\n")),(0,a.kt)("p",null,"Similar to ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.setState()"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.dispatch()")," is a wrapper around ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.store.dispatch()"),". The difference is that ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.dispatch()")," allows dispatch interceptors to run before calling ",(0,a.kt)("inlineCode",{parentName:"p"},".store.dispatch()"),"."),(0,a.kt)("div",{className:"admonition admonition-important alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Always prefer calling ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.dispatch()")," over ",(0,a.kt)("inlineCode",{parentName:"p"},"instance.store.dispatch()")))),(0,a.kt)("h3",{id:"exports"},(0,a.kt)("inlineCode",{parentName:"h3"},".exports")),(0,a.kt)("p",null,"A reference to the exports of the atom."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const instance = getInstance(myAtom)\nconst { someExport } = instance.exports\n")),(0,a.kt)("p",null,"These exports are constant - they are set the first time an atom instance evaluates and they will not change on subsequent evaluations."),(0,a.kt)("h3",{id:"invalidate"},(0,a.kt)("inlineCode",{parentName:"h3"},".invalidate()")),(0,a.kt)("p",null,"Call this to force the atom instance to reevaluate. Outside of testing, there shouldn't be a need for this. Unless you know what you're doing, avoid impure or mutation-oriented patterns that require you to manually invalidate atom instances."),(0,a.kt)(i.u,{resultVar:"RandomNum",mdxType:"LiveEditor"},"\nconst randomNumAtom = atom('randomNum', () => Math.floor(Math.random() * 100))\n\nfunction RandomNum() {\n  const instance = useAtomInstance(randomNumAtom)\n  const value = useAtomValue(randomNumAtom)\n\n  return (\n    <>\n      <div>Random Number: {value}</div>\n      <button onClick={() => instance.invalidate()}>Re-roll</button>\n    </>\n  )\n}\n"),(0,a.kt)("h3",{id:"hooks-and-injectors"},"Hooks and Injectors"),(0,a.kt)("p",null,"Most hooks and injectors that return an atom instance create a static graph dependency on that instance. To turn that into a dynamic dependency (one that'll cause rerenders/reevaluations when the instance's state updates), we need to pass the instance to another hook/injector."),(0,a.kt)("p",null,"It just so happens that instances can be passed directly to ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomSelector"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomState"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomValue"),", and their corresponding injectors. Yep, we've already seen all of those \ud83d\udcaa."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"function App() {\n  const instance = useAtomInstance(myAtom) // static dep \ud83d\ude22\n  const val = useAtomValue(instance) // dynamic dep \ud83c\udf89\n  ...\n}\n")),(0,a.kt)("h2",{id:"recap"},"Recap"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Every atom instance has an underlying Zedux store.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"useAtomSelector"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomState"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomValue"),", and their corresponding injectors all create dynamic graph dependencies that trigger updates when the resolved atom instance's state changes.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"useAtomInstance")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomConsumer")," can be used together to provide and consume atom instances over React context.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"useGetInstance")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"injectGetInstance")," return a function that can be used to preload or lazy-load atoms.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Atom instances have ",(0,a.kt)("inlineCode",{parentName:"p"},".store"),", ",(0,a.kt)("inlineCode",{parentName:"p"},".setState"),", ",(0,a.kt)("inlineCode",{parentName:"p"},".dispatch"),", ",(0,a.kt)("inlineCode",{parentName:"p"},".exports"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},".invalidate")," properties that can be used directly.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"useAtomSelector"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomState"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"useAtomValue"),", and their corresponding injectors all accept atom instances too."))),(0,a.kt)("h2",{id:"next-steps"},"Next Steps"),(0,a.kt)("p",null,"Now we know how to create and consume atoms. Next we'll learn how to create and configure isolated atom environments using ",(0,a.kt)("a",{parentName:"p",href:"ecosystems"},"ecosystems"),"."))}d.isMDXComponent=!0}}]);