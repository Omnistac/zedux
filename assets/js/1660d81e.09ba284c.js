"use strict";(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[7052],{2822:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "assets": function() { return /* binding */ assets; },\n/* harmony export */   "contentTitle": function() { return /* binding */ contentTitle; },\n/* harmony export */   "default": function() { return /* binding */ MDXContent; },\n/* harmony export */   "frontMatter": function() { return /* binding */ frontMatter; },\n/* harmony export */   "metadata": function() { return /* binding */ metadata; },\n/* harmony export */   "toc": function() { return /* binding */ toc; }\n/* harmony export */ });\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7462);\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3366);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7294);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3905);\nvar _excluded=["components"];/* @jsxRuntime classic */ /* @jsx mdx */ /* @jsxFrag React.Fragment */var frontMatter={id:\'react-context\',title:\'React Context\'};var contentTitle=undefined;var metadata={"unversionedId":"walkthrough/react-context","id":"walkthrough/react-context","title":"React Context","description":"The atomic model naturally fixes all the problems with React context. In Zedux, we can use React context with all of its benefits and none of its downsides.","source":"@site/docs/walkthrough/react-context.mdx","sourceDirName":"walkthrough","slug":"/walkthrough/react-context","permalink":"/zedux/docs/walkthrough/react-context","draft":false,"editUrl":"https://github.com/Omnistac/zedux/tree/master/docs/walkthrough/react-context.mdx","tags":[],"version":"current","frontMatter":{"id":"react-context","title":"React Context"},"sidebar":"react","previous":{"title":"Destruction","permalink":"/zedux/docs/walkthrough/destruction"},"next":{"title":"Suspense","permalink":"/zedux/docs/walkthrough/suspense"}};var assets={};var toc=[{value:\'Providing\',id:\'providing\',level:2},{value:\'Multiple Instances\',id:\'multiple-instances\',level:3},{value:\'Consuming\',id:\'consuming\',level:2},{value:\'If an Instance Wasn&#39;t Provided\',id:\'if-an-instance-wasnt-provided\',level:3},{value:\'Case #1: I want a default atom instance to be created, if none was provided.\',id:\'case-1-i-want-a-default-atom-instance-to-be-created-if-none-was-provided\',level:4},{value:\'Case #2: I don&#39;t ever want an instance to not be provided. Throw an error if I forget!\',id:\'case-2-i-dont-ever-want-an-instance-to-not-be-provided-throw-an-error-if-i-forget\',level:4},{value:\'Subscribing\',id:\'subscribing\',level:2},{value:\'Using Selectors\',id:\'using-selectors\',level:2},{value:\'Cool But Why?\',id:\'cool-but-why\',level:2},{value:\'Recap\',id:\'recap\',level:2},{value:\'Next Steps\',id:\'next-steps\',level:2}];var layoutProps={toc:toc};var MDXLayout="wrapper";function MDXContent(_ref){var components=_ref.components,props=(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(_ref,_excluded);return (0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)(MDXLayout,(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The atomic model naturally fixes all the problems with React context. In Zedux, we can use React context with all of its benefits and none of its downsides."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The important philosophy here is that Zedux uses ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"https://blog.testdouble.com/posts/2021-03-19-react-context-for-dependency-injection-not-state/"},"React context for Dependency Injection, not State Management"),". That article is an excellent breakdown of this technique."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"title":"you will learn:","type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"admonition"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"How to provide and consume atom instances over React context."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"How to control renders in both the providing and consuming component."))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"providing"},"Providing"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"An atom instance can be provided over React context via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/components/AtomInstanceProvider"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"<AtomInstanceProvider>")),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"import { AtomInstanceProvider, useAtomInstance } from \'@zedux/react\'\\n\\nfunction Parent() {\\n  const instance = useAtomInstance(myAtom)\\n\\n  return (\\n    <AtomInstanceProvider instance={instance}>\\n      <Child />\\n    </AtomInstanceProvider>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"multiple-instances"},"Multiple Instances"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"To provide instances of multiple atoms from the same component, you could nest a bunch of ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"<AtomInstanceProvider>"),"s. But that isn\'t very aesthetically pleasing now, is it."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"To this end, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"AtomInstanceProvider")," accepts an ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"instances")," prop, whose value is an array of instances to provide. Only provide either an ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"instance")," or an ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"instances")," prop, not both."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"return (\\n  <AtomInstanceProvider instances={[instanceA, instanceB]}>\\n    {children}\\n  </AtomInstanceProvider>\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"consuming"},"Consuming"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Consume provided instances with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/hooks/useAtomConsumer"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"useAtomConsumer"))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { useAtomConsumer } from \'@zedux/react\'\\n\\nfunction Child() {\\n  const instance = useAtomConsumer(myAtom)\\n  ...\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"if-an-instance-wasnt-provided"},"If an Instance Wasn\'t Provided"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"If a component uses ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"useAtomConsumer")," but no instance was provided by any parent, an empty object will be returned."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const instance = useAtomConsumer(myAtom)\\ninstance.invalidate() // error! instance.invalidate is not a function\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"TypeScript users will be warned of this. But to get around it, you\'d have to put checks before everything you try to do with that instance. This isn\'t very useful. In fact, it\'s downright annoying."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Fortunately (on purpose), ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"useAtomConsumer")," has two overloads that help with this:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h4",{"id":"case-1-i-want-a-default-atom-instance-to-be-created-if-none-was-provided"},"Case #1: I want a default atom instance to be created, if none was provided."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can provide an array of params to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"useAtomConsumer"),". These params must match the params of the atom. If no atom instance was provided, Zedux will use the passed default params to locate an existing atom instance or create a new instance if it doesn\'t exist yet."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const instance = useAtomConsumer(myAtom, [\'default instance params\'])\\ninstance.invalidate() // all good! Even TS is happy\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"If the atom doesn\'t take params, you must still pass an empty array for Zedux to find/create a default instance."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const paramlessInstance = useAtomConsumer(myAtom, [])\\ninstance.invalidate() // \\uD83D\\uDE0A\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h4",{"id":"case-2-i-dont-ever-want-an-instance-to-not-be-provided-throw-an-error-if-i-forget"},"Case #2: I don\'t ever want an instance to not be provided. Throw an error if I forget!"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Instead of an array of default parameters, you can pass ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"true")," as the second param to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"useAtomConsumer"),". This tells Zedux to throw an error if no atom instance was provided."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const instance = useAtomConsumer(myAtom, true)\\ninstance.invalidate() // all good again! TS smiles upon you\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"#failfast! This overload is recommended in almost every situation.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"subscribing"},"Subscribing"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The amazing thing about using atoms for React context is that neither the providing nor consuming component subscribes to the atom instance by default. This gives you full control over rerenders."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Any component can set the state of the atom without subscribing to the state itself. And, of course, any component can subscribe itself to the atom instance using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/hooks/useAtomValue"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"useAtomValue"))," or similar."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"function Parent() {\\n  const instance = useAtomInstance(myAtom) // doesn\'t subscribe\\n  const value = useAtomValue(instance) // subscribes\\n\\n  return (\\n    <AtomInstanceProvider instance={instance}>\\n      <Child />\\n    </AtomInstanceProvider>\\n  )\\n}\\n\\nfunction Child() {\\n  const instance = useAtomConsumer(myAtom, true) // doesn\'t subscribe\\n  const value = useAtomValue(instance) // subscribes\\n  ...\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Let\'s see a live example of what we have so far."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=context/simple resultVar=Parent","live":true,"ecosystemId":"context/simple","resultVar":"Parent"},"const providedAtom = atom(\'provided\', \'the state!\')\\n\\nfunction Child() {\\n  const instance = useAtomConsumer(providedAtom)\\n  const [state, setState] = useAtomState(instance) // subscribe to state updates\\n\\n  return (\\n    <>\\n      <div>Child State (subscribed): {state}</div>\\n      <button onClick={() => setState(\'new state!\')}>Change</button>\\n    </>\\n  )\\n}\\n\\nfunction Parent() {\\n  const instance = useAtomInstance(providedAtom)\\n\\n  return (\\n    <AtomInstanceProvider instance={instance}>\\n      <div>Parent State (not subscribed): {instance.getState()}</div>\\n      <Child />\\n    </AtomInstanceProvider>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"title":"try me","type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"Try changing the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"Parent")," component above to be dynamic with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"useAtomValue(instance)"),".")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"using-selectors"},"Using Selectors"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"A common pattern is to pass the provided atom instance to an Atom Getter inside ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/hooks/useAtomSelector"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"useAtomSelector"))," to limit component rerenders."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"function Child() {\\n  const instance = useAtomConsumer(myAtom, true) // doesn\'t subscribe\\n\\n  // subscribe, but only cause a rerender when `someField` changes:\\n  const someField = useAtomSelector(({ get }) => get(instance).someField)\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"cool-but-why"},"Cool But Why?"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Ecosystems essentially make all atom instances \\"global\\" to the whole component tree under an ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"<EcosystemProvider>"),". So why would we need to provide certain instances to parts of the tree?"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The primary purpose of providing atom instances over React context is to give a reusable subtree an atom instance with specific parameters. The children in the subtree don\'t need to know what params to pass to the atom."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"function Child() {\\n  // without useAtomConsumer, you need to pass the right params every time you use the atom:\\n  const instance = useAtomInstance(myAtom, [\\n    \'my\',\\n    { specific: { params: \'here\' } },\\n  ])\\n\\n  // compare:\\n  const instance = useAtomConsumer(myAtom, true)\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This is particularly useful for lists. Say we have a component that\'s rendered many times with different props:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"function UserThumbnail({ id }) {\\n  return (\\n    <>\\n      <Avatar id={id} />\\n      <Nickname id={id} />\\n      <OnlineStatus id={id} />\\n    </>\\n  )\\n}\\n\\nfunction UserList({ users }) {\\n  return users.map(user => <UserThumbnail key={user.id} id={user.id} />)\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can see how all the children of ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"UserThumbnail")," might need to use the id to fetch/maintain some state - their current profile picture, their preferred display name, and whether they\'re online. For example:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"function OnlineStatus({ id }) {\\n  const userData = useAtomValue(userData, [id])\\n\\n  return <div>{userData.isOnline ? <GreenDot /> : <RedDot />}</div>\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"But with context, we can instead give the entire subtree its own isolated state:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"function UserThumbnail({ id }) {\\n  const instance = useAtomInstance(userData, [id])\\n\\n  return (\\n    <AtomInstanceProvider instance={userInstance}>\\n      <Avatar />\\n      <Nickname />\\n      <OnlineStatus />\\n    </AtomInstanceProvider>\\n  )\\n}\\n\\nfunction OnlineStatus() {\\n  // no need to pass `id` prop!\\n  const userData = useAtomConsumer(userData, true)\\n\\n  return <div>{userData.isOnline ? <GreenDot /> : <RedDot />}</div>\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Here\'s a very contrived, in-depth, live example if you want to review a little of what we\'ve learned so far. Otherwise, we\'re done here. Go next!"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=react-context/list-example resultVar=TodoList","live":true,"ecosystemId":"react-context/list-example","resultVar":"TodoList"},"const isEditingTodosAtom = atom(\'isEditingTodos\', false)\\n\\nconst todoListAtom = atom(\'todoList\', () => [\\n  { id: 1, text: \'Go\' },\\n  { id: 2, text: \'Fight\' },\\n  { id: 3, text: \'Win\' },\\n])\\n\\nconst todoAtom = ion(\'todo\', ({ get, getInstance }, id: number) => {\\n  const todoListInstance = getInstance(todoListAtom)\\n\\n  // dynamicize the edge:\\n  const todo = get(todoListInstance).find(todo => todo.id === id)\\n  const textStore = injectStore(todo.text) // take an initial state snapshot\\n\\n  const saveChanges = () =>\\n    todoListInstance.setState(todos =>\\n      todos.map(todo =>\\n        todo.id === id ? { ...todo, text: textStore.getState() } : todo\\n      )\\n    )\\n\\n  return api(textStore).setExports({ saveChanges })\\n})\\n\\nfunction Todo() {\\n  const todoInstance = useAtomConsumer(todoAtom, true)\\n  const [text, setText] = useAtomState(todoInstance)\\n  const isEditing = useAtomValue(isEditingTodosAtom)\\n\\n  return (\\n    <div>\\n      {isEditing ? (\\n        <input onChange={event => setText(event.target.value)} value={text} />\\n      ) : (\\n        <span>{text}</span>\\n      )}\\n    </div>\\n  )\\n}\\n\\nfunction TodoList() {\\n  // this is a pretty advanced pattern - using a selector to get instances\\n  const instances = useAtomSelector(({ get, getInstance }) => {\\n    const todos = get(todoListAtom)\\n\\n    return todos.map(todo => getInstance(todoAtom, [todo.id]))\\n  })\\n\\n  const [isEditing, setIsEditing] = useAtomState(isEditingTodosAtom)\\n\\n  const saveAllChanges = () => {\\n    instances.forEach(instance => instance.exports.saveChanges())\\n    setIsEditing(false)\\n  }\\n\\n  return (\\n    <>\\n      {!isEditing && <button onClick={() => setIsEditing(true)}>Edit</button>}\\n      {instances.map(instance => (\\n        // vvv  Provide a different instance for each item  vvv\\n        <AtomInstanceProvider key={instance.keyHash} instance={instance}>\\n          <Todo />\\n        </AtomInstanceProvider>\\n      ))}\\n      {isEditing && <button onClick={saveAllChanges}>Save Changes</button>}\\n    </>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"recap"},"Recap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Atom instances can be provided over React context via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"li","href":"../api/components/AtomInstanceProvider"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"<AtomInstanceProvider>")),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Atom instances can be consumed from React context via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"li","href":"../api/hooks/useAtomConsumer"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"useAtomConsumer")),".",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"li"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"useAtomConsumer(myAtom, [...defaultParams])")," creates an atom instance with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"defaultParams")," if no instance was provided."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"useAtomConsumer(myAtom, true)")," throws an error if no atom instance was provided."))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"You can subscribe any component to a consumed atom instance by using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"li","href":"../api/hooks/useAtomValue"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"useAtomValue"))," or any other hook that creates a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"li","href":"../api/glossary#dynamic-graph-dependency"},"dynamic graph dependency"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"useAtomSelector")," will only rerender the component when the selector result changes.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"next-steps"},"Next Steps"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Let\'s continue learning how to integrate atoms with React. Next up: ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"suspense"},"React suspense"),"."));};MDXContent.isMDXComponent=true;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUVBQUksVUFBVSxDQUFDLElBQUksRUFBQywyRUFBWSxVQUFVLENBQUMsSUFBSSxvQkFBaUMsdUVBQTRFLENBQ3pKLENBQ0wsbUVBQ0UsSUFBSSxDQUFFLFlBQVksZUFDRSxDQUN0Qiw2SUFBMkUsa0VBQUcsVUFBVSxDQUFDLEdBQUcsQ0FDeEYsTUFBTSxDQUFFLFVBQVUsbUJBQ0ssS0FBUyxDQUN4QixDQUNoQixDQUNBLENBQ0FELFVBQVUsQ0FBQ0csY0FBYyxDQUFHLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZWR1eC1kb2NzLy4vZG9jcy93YWxrdGhyb3VnaC9yZWFjdC1jb250ZXh0Lm1keD9jNjhiIl0sInNvdXJjZXNDb250ZW50IjpbIlxuXG4vKiBAanN4UnVudGltZSBjbGFzc2ljICovXG4vKiBAanN4IG1keCAqL1xuLyogQGpzeEZyYWcgUmVhY3QuRnJhZ21lbnQgKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1keCB9IGZyb20gJ0BtZHgtanMvcmVhY3QnO1xuXG5cbmV4cG9ydCBjb25zdCBmcm9udE1hdHRlciA9IHtcblx0aWQ6ICdyZWFjdC1jb250ZXh0Jyxcblx0dGl0bGU6ICdSZWFjdCBDb250ZXh0J1xufTtcbmV4cG9ydCBjb25zdCBjb250ZW50VGl0bGUgPSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3QgbWV0YWRhdGEgPSB7XG4gIFwidW52ZXJzaW9uZWRJZFwiOiBcIndhbGt0aHJvdWdoL3JlYWN0LWNvbnRleHRcIixcbiAgXCJpZFwiOiBcIndhbGt0aHJvdWdoL3JlYWN0LWNvbnRleHRcIixcbiAgXCJ0aXRsZVwiOiBcIlJlYWN0IENvbnRleHRcIixcbiAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBhdG9taWMgbW9kZWwgbmF0dXJhbGx5IGZpeGVzIGFsbCB0aGUgcHJvYmxlbXMgd2l0aCBSZWFjdCBjb250ZXh0LiBJbiBaZWR1eCwgd2UgY2FuIHVzZSBSZWFjdCBjb250ZXh0IHdpdGggYWxsIG9mIGl0cyBiZW5lZml0cyBhbmQgbm9uZSBvZiBpdHMgZG93bnNpZGVzLlwiLFxuICBcInNvdXJjZVwiOiBcIkBzaXRlL2RvY3Mvd2Fsa3Rocm91Z2gvcmVhY3QtY29udGV4dC5tZHhcIixcbiAgXCJzb3VyY2VEaXJOYW1lXCI6IFwid2Fsa3Rocm91Z2hcIixcbiAgXCJzbHVnXCI6IFwiL3dhbGt0aHJvdWdoL3JlYWN0LWNvbnRleHRcIixcbiAgXCJwZXJtYWxpbmtcIjogXCIvemVkdXgvZG9jcy93YWxrdGhyb3VnaC9yZWFjdC1jb250ZXh0XCIsXG4gIFwiZHJhZnRcIjogZmFsc2UsXG4gIFwiZWRpdFVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9PbW5pc3RhYy96ZWR1eC90cmVlL21hc3Rlci9kb2NzL3dhbGt0aHJvdWdoL3JlYWN0LWNvbnRleHQubWR4XCIsXG4gIFwidGFnc1wiOiBbXSxcbiAgXCJ2ZXJzaW9uXCI6IFwiY3VycmVudFwiLFxuICBcImZyb250TWF0dGVyXCI6IHtcbiAgICBcImlkXCI6IFwicmVhY3QtY29udGV4dFwiLFxuICAgIFwidGl0bGVcIjogXCJSZWFjdCBDb250ZXh0XCJcbiAgfSxcbiAgXCJzaWRlYmFyXCI6IFwicmVhY3RcIixcbiAgXCJwcmV2aW91c1wiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIkRlc3RydWN0aW9uXCIsXG4gICAgXCJwZXJtYWxpbmtcIjogXCIvemVkdXgvZG9jcy93YWxrdGhyb3VnaC9kZXN0cnVjdGlvblwiXG4gIH0sXG4gIFwibmV4dFwiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIlN1c3BlbnNlXCIsXG4gICAgXCJwZXJtYWxpbmtcIjogXCIvemVkdXgvZG9jcy93YWxrdGhyb3VnaC9zdXNwZW5zZVwiXG4gIH1cbn07XG5leHBvcnQgY29uc3QgYXNzZXRzID0ge1xuXG59O1xuXG5cbmV4cG9ydCBjb25zdCB0b2MgPSBbe1xuICB2YWx1ZTogJ1Byb3ZpZGluZycsXG4gIGlkOiAncHJvdmlkaW5nJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdNdWx0aXBsZSBJbnN0YW5jZXMnLFxuICBpZDogJ211bHRpcGxlLWluc3RhbmNlcycsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnQ29uc3VtaW5nJyxcbiAgaWQ6ICdjb25zdW1pbmcnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ0lmIGFuIEluc3RhbmNlIFdhc24mIzM5O3QgUHJvdmlkZWQnLFxuICBpZDogJ2lmLWFuLWluc3RhbmNlLXdhc250LXByb3ZpZGVkJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdDYXNlICMxOiBJIHdhbnQgYSBkZWZhdWx0IGF0b20gaW5zdGFuY2UgdG8gYmUgY3JlYXRlZCwgaWYgbm9uZSB3YXMgcHJvdmlkZWQuJyxcbiAgaWQ6ICdjYXNlLTEtaS13YW50LWEtZGVmYXVsdC1hdG9tLWluc3RhbmNlLXRvLWJlLWNyZWF0ZWQtaWYtbm9uZS13YXMtcHJvdmlkZWQnLFxuICBsZXZlbDogNFxufSwge1xuICB2YWx1ZTogJ0Nhc2UgIzI6IEkgZG9uJiMzOTt0IGV2ZXIgd2FudCBhbiBpbnN0YW5jZSB0byBub3QgYmUgcHJvdmlkZWQuIFRocm93IGFuIGVycm9yIGlmIEkgZm9yZ2V0IScsXG4gIGlkOiAnY2FzZS0yLWktZG9udC1ldmVyLXdhbnQtYW4taW5zdGFuY2UtdG8tbm90LWJlLXByb3ZpZGVkLXRocm93LWFuLWVycm9yLWlmLWktZm9yZ2V0JyxcbiAgbGV2ZWw6IDRcbn0sIHtcbiAgdmFsdWU6ICdTdWJzY3JpYmluZycsXG4gIGlkOiAnc3Vic2NyaWJpbmcnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ1VzaW5nIFNlbGVjdG9ycycsXG4gIGlkOiAndXNpbmctc2VsZWN0b3JzJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdDb29sIEJ1dCBXaHk/JyxcbiAgaWQ6ICdjb29sLWJ1dC13aHknLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ1JlY2FwJyxcbiAgaWQ6ICdyZWNhcCcsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnTmV4dCBTdGVwcycsXG4gIGlkOiAnbmV4dC1zdGVwcycsXG4gIGxldmVsOiAyXG59XTtcblxuY29uc3QgbGF5b3V0UHJvcHMgPSB7XG4gIHRvY1xufTtcbmNvbnN0IE1EWExheW91dCA9IFwid3JhcHBlclwiXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNRFhDb250ZW50KHtcbiAgY29tcG9uZW50cyxcbiAgLi4ucHJvcHNcbn0pIHtcbiAgcmV0dXJuIDxNRFhMYXlvdXQgey4uLmxheW91dFByb3BzfSB7Li4ucHJvcHN9IGNvbXBvbmVudHM9e2NvbXBvbmVudHN9IG1keFR5cGU9XCJNRFhMYXlvdXRcIj5cblxuICAgIDxwPntgVGhlIGF0b21pYyBtb2RlbCBuYXR1cmFsbHkgZml4ZXMgYWxsIHRoZSBwcm9ibGVtcyB3aXRoIFJlYWN0IGNvbnRleHQuIEluIFplZHV4LCB3ZSBjYW4gdXNlIFJlYWN0IGNvbnRleHQgd2l0aCBhbGwgb2YgaXRzIGJlbmVmaXRzIGFuZCBub25lIG9mIGl0cyBkb3duc2lkZXMuYH08L3A+XG4gICAgPHA+e2BUaGUgaW1wb3J0YW50IHBoaWxvc29waHkgaGVyZSBpcyB0aGF0IFplZHV4IHVzZXMgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcImh0dHBzOi8vYmxvZy50ZXN0ZG91YmxlLmNvbS9wb3N0cy8yMDIxLTAzLTE5LXJlYWN0LWNvbnRleHQtZm9yLWRlcGVuZGVuY3ktaW5qZWN0aW9uLW5vdC1zdGF0ZS9cIlxuICAgICAgfX0+e2BSZWFjdCBjb250ZXh0IGZvciBEZXBlbmRlbmN5IEluamVjdGlvbiwgbm90IFN0YXRlIE1hbmFnZW1lbnRgfTwvYT57YC4gVGhhdCBhcnRpY2xlIGlzIGFuIGV4Y2VsbGVudCBicmVha2Rvd24gb2YgdGhpcyB0ZWNobmlxdWUuYH08L3A+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidGl0bGVcIjogXCJ5b3Ugd2lsbCBsZWFybjpcIixcbiAgICAgIFwidHlwZVwiOiBcInRpcFwiXG4gICAgfX0+PHVsIHBhcmVudE5hbWU9XCJhZG1vbml0aW9uXCI+XG4gICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YEhvdyB0byBwcm92aWRlIGFuZCBjb25zdW1lIGF0b20gaW5zdGFuY2VzIG92ZXIgUmVhY3QgY29udGV4dC5gfTwvbGk+XG4gICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YEhvdyB0byBjb250cm9sIHJlbmRlcnMgaW4gYm90aCB0aGUgcHJvdmlkaW5nIGFuZCBjb25zdW1pbmcgY29tcG9uZW50LmB9PC9saT5cbiAgICAgIDwvdWw+PC9hZG1vbml0aW9uPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcInByb3ZpZGluZ1wiXG4gICAgfX0+e2BQcm92aWRpbmdgfTwvaDI+XG4gICAgPHA+e2BBbiBhdG9tIGluc3RhbmNlIGNhbiBiZSBwcm92aWRlZCBvdmVyIFJlYWN0IGNvbnRleHQgdmlhIGB9PGEgcGFyZW50TmFtZT1cInBcIiB7Li4ue1xuICAgICAgICBcImhyZWZcIjogXCIuLi9hcGkvY29tcG9uZW50cy9BdG9tSW5zdGFuY2VQcm92aWRlclwiXG4gICAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiYVwiPntgPEF0b21JbnN0YW5jZVByb3ZpZGVyPmB9PC9pbmxpbmVDb2RlPjwvYT57YC5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiXG4gICAgICB9fT57YGltcG9ydCB7IEF0b21JbnN0YW5jZVByb3ZpZGVyLCB1c2VBdG9tSW5zdGFuY2UgfSBmcm9tICdAemVkdXgvcmVhY3QnXG5cbmZ1bmN0aW9uIFBhcmVudCgpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSB1c2VBdG9tSW5zdGFuY2UobXlBdG9tKVxuXG4gIHJldHVybiAoXG4gICAgPEF0b21JbnN0YW5jZVByb3ZpZGVyIGluc3RhbmNlPXtpbnN0YW5jZX0+XG4gICAgICA8Q2hpbGQgLz5cbiAgICA8L0F0b21JbnN0YW5jZVByb3ZpZGVyPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJtdWx0aXBsZS1pbnN0YW5jZXNcIlxuICAgIH19PntgTXVsdGlwbGUgSW5zdGFuY2VzYH08L2gzPlxuICAgIDxwPntgVG8gcHJvdmlkZSBpbnN0YW5jZXMgb2YgbXVsdGlwbGUgYXRvbXMgZnJvbSB0aGUgc2FtZSBjb21wb25lbnQsIHlvdSBjb3VsZCBuZXN0IGEgYnVuY2ggb2YgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgPEF0b21JbnN0YW5jZVByb3ZpZGVyPmB9PC9pbmxpbmVDb2RlPntgcy4gQnV0IHRoYXQgaXNuJ3QgdmVyeSBhZXN0aGV0aWNhbGx5IHBsZWFzaW5nIG5vdywgaXMgaXQuYH08L3A+XG4gICAgPHA+e2BUbyB0aGlzIGVuZCwgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgQXRvbUluc3RhbmNlUHJvdmlkZXJgfTwvaW5saW5lQ29kZT57YCBhY2NlcHRzIGFuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluc3RhbmNlc2B9PC9pbmxpbmVDb2RlPntgIHByb3AsIHdob3NlIHZhbHVlIGlzIGFuIGFycmF5IG9mIGluc3RhbmNlcyB0byBwcm92aWRlLiBPbmx5IHByb3ZpZGUgZWl0aGVyIGFuIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluc3RhbmNlYH08L2lubGluZUNvZGU+e2Agb3IgYW4gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5zdGFuY2VzYH08L2lubGluZUNvZGU+e2AgcHJvcCwgbm90IGJvdGguYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c3hcIlxuICAgICAgfX0+e2ByZXR1cm4gKFxuICA8QXRvbUluc3RhbmNlUHJvdmlkZXIgaW5zdGFuY2VzPXtbaW5zdGFuY2VBLCBpbnN0YW5jZUJdfT5cbiAgICB7Y2hpbGRyZW59XG4gIDwvQXRvbUluc3RhbmNlUHJvdmlkZXI+XG4pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJjb25zdW1pbmdcIlxuICAgIH19PntgQ29uc3VtaW5nYH08L2gyPlxuICAgIDxwPntgQ29uc3VtZSBwcm92aWRlZCBpbnN0YW5jZXMgd2l0aCBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2hvb2tzL3VzZUF0b21Db25zdW1lclwiXG4gICAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiYVwiPntgdXNlQXRvbUNvbnN1bWVyYH08L2lubGluZUNvZGU+PC9hPjwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgaW1wb3J0IHsgdXNlQXRvbUNvbnN1bWVyIH0gZnJvbSAnQHplZHV4L3JlYWN0J1xuXG5mdW5jdGlvbiBDaGlsZCgpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSB1c2VBdG9tQ29uc3VtZXIobXlBdG9tKVxuICAuLi5cbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcImlmLWFuLWluc3RhbmNlLXdhc250LXByb3ZpZGVkXCJcbiAgICB9fT57YElmIGFuIEluc3RhbmNlIFdhc24ndCBQcm92aWRlZGB9PC9oMz5cbiAgICA8cD57YElmIGEgY29tcG9uZW50IHVzZXMgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgdXNlQXRvbUNvbnN1bWVyYH08L2lubGluZUNvZGU+e2AgYnV0IG5vIGluc3RhbmNlIHdhcyBwcm92aWRlZCBieSBhbnkgcGFyZW50LCBhbiBlbXB0eSBvYmplY3Qgd2lsbCBiZSByZXR1cm5lZC5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3QgaW5zdGFuY2UgPSB1c2VBdG9tQ29uc3VtZXIobXlBdG9tKVxuaW5zdGFuY2UuaW52YWxpZGF0ZSgpIC8vIGVycm9yISBpbnN0YW5jZS5pbnZhbGlkYXRlIGlzIG5vdCBhIGZ1bmN0aW9uXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFR5cGVTY3JpcHQgdXNlcnMgd2lsbCBiZSB3YXJuZWQgb2YgdGhpcy4gQnV0IHRvIGdldCBhcm91bmQgaXQsIHlvdSdkIGhhdmUgdG8gcHV0IGNoZWNrcyBiZWZvcmUgZXZlcnl0aGluZyB5b3UgdHJ5IHRvIGRvIHdpdGggdGhhdCBpbnN0YW5jZS4gVGhpcyBpc24ndCB2ZXJ5IHVzZWZ1bC4gSW4gZmFjdCwgaXQncyBkb3ducmlnaHQgYW5ub3lpbmcuYH08L3A+XG4gICAgPHA+e2BGb3J0dW5hdGVseSAob24gcHVycG9zZSksIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHVzZUF0b21Db25zdW1lcmB9PC9pbmxpbmVDb2RlPntgIGhhcyB0d28gb3ZlcmxvYWRzIHRoYXQgaGVscCB3aXRoIHRoaXM6YH08L3A+XG4gICAgPGg0IHsuLi57XG4gICAgICBcImlkXCI6IFwiY2FzZS0xLWktd2FudC1hLWRlZmF1bHQtYXRvbS1pbnN0YW5jZS10by1iZS1jcmVhdGVkLWlmLW5vbmUtd2FzLXByb3ZpZGVkXCJcbiAgICB9fT57YENhc2UgIzE6IEkgd2FudCBhIGRlZmF1bHQgYXRvbSBpbnN0YW5jZSB0byBiZSBjcmVhdGVkLCBpZiBub25lIHdhcyBwcm92aWRlZC5gfTwvaDQ+XG4gICAgPHA+e2BZb3UgY2FuIHByb3ZpZGUgYW4gYXJyYXkgb2YgcGFyYW1zIHRvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHVzZUF0b21Db25zdW1lcmB9PC9pbmxpbmVDb2RlPntgLiBUaGVzZSBwYXJhbXMgbXVzdCBtYXRjaCB0aGUgcGFyYW1zIG9mIHRoZSBhdG9tLiBJZiBubyBhdG9tIGluc3RhbmNlIHdhcyBwcm92aWRlZCwgWmVkdXggd2lsbCB1c2UgdGhlIHBhc3NlZCBkZWZhdWx0IHBhcmFtcyB0byBsb2NhdGUgYW4gZXhpc3RpbmcgYXRvbSBpbnN0YW5jZSBvciBjcmVhdGUgYSBuZXcgaW5zdGFuY2UgaWYgaXQgZG9lc24ndCBleGlzdCB5ZXQuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IGluc3RhbmNlID0gdXNlQXRvbUNvbnN1bWVyKG15QXRvbSwgWydkZWZhdWx0IGluc3RhbmNlIHBhcmFtcyddKVxuaW5zdGFuY2UuaW52YWxpZGF0ZSgpIC8vIGFsbCBnb29kISBFdmVuIFRTIGlzIGhhcHB5XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YElmIHRoZSBhdG9tIGRvZXNuJ3QgdGFrZSBwYXJhbXMsIHlvdSBtdXN0IHN0aWxsIHBhc3MgYW4gZW1wdHkgYXJyYXkgZm9yIFplZHV4IHRvIGZpbmQvY3JlYXRlIGEgZGVmYXVsdCBpbnN0YW5jZS5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3QgcGFyYW1sZXNzSW5zdGFuY2UgPSB1c2VBdG9tQ29uc3VtZXIobXlBdG9tLCBbXSlcbmluc3RhbmNlLmludmFsaWRhdGUoKSAvLyDwn5iKXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDQgey4uLntcbiAgICAgIFwiaWRcIjogXCJjYXNlLTItaS1kb250LWV2ZXItd2FudC1hbi1pbnN0YW5jZS10by1ub3QtYmUtcHJvdmlkZWQtdGhyb3ctYW4tZXJyb3ItaWYtaS1mb3JnZXRcIlxuICAgIH19PntgQ2FzZSAjMjogSSBkb24ndCBldmVyIHdhbnQgYW4gaW5zdGFuY2UgdG8gbm90IGJlIHByb3ZpZGVkLiBUaHJvdyBhbiBlcnJvciBpZiBJIGZvcmdldCFgfTwvaDQ+XG4gICAgPHA+e2BJbnN0ZWFkIG9mIGFuIGFycmF5IG9mIGRlZmF1bHQgcGFyYW1ldGVycywgeW91IGNhbiBwYXNzIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHRydWVgfTwvaW5saW5lQ29kZT57YCBhcyB0aGUgc2Vjb25kIHBhcmFtIHRvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHVzZUF0b21Db25zdW1lcmB9PC9pbmxpbmVDb2RlPntgLiBUaGlzIHRlbGxzIFplZHV4IHRvIHRocm93IGFuIGVycm9yIGlmIG5vIGF0b20gaW5zdGFuY2Ugd2FzIHByb3ZpZGVkLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCBpbnN0YW5jZSA9IHVzZUF0b21Db25zdW1lcihteUF0b20sIHRydWUpXG5pbnN0YW5jZS5pbnZhbGlkYXRlKCkgLy8gYWxsIGdvb2QgYWdhaW4hIFRTIHNtaWxlcyB1cG9uIHlvdVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGFkbW9uaXRpb24gey4uLntcbiAgICAgIFwidHlwZVwiOiBcInRpcFwiXG4gICAgfX0+PHAgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj57YCNmYWlsZmFzdCEgVGhpcyBvdmVybG9hZCBpcyByZWNvbW1lbmRlZCBpbiBhbG1vc3QgZXZlcnkgc2l0dWF0aW9uLmB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJzdWJzY3JpYmluZ1wiXG4gICAgfX0+e2BTdWJzY3JpYmluZ2B9PC9oMj5cbiAgICA8cD57YFRoZSBhbWF6aW5nIHRoaW5nIGFib3V0IHVzaW5nIGF0b21zIGZvciBSZWFjdCBjb250ZXh0IGlzIHRoYXQgbmVpdGhlciB0aGUgcHJvdmlkaW5nIG5vciBjb25zdW1pbmcgY29tcG9uZW50IHN1YnNjcmliZXMgdG8gdGhlIGF0b20gaW5zdGFuY2UgYnkgZGVmYXVsdC4gVGhpcyBnaXZlcyB5b3UgZnVsbCBjb250cm9sIG92ZXIgcmVyZW5kZXJzLmB9PC9wPlxuICAgIDxwPntgQW55IGNvbXBvbmVudCBjYW4gc2V0IHRoZSBzdGF0ZSBvZiB0aGUgYXRvbSB3aXRob3V0IHN1YnNjcmliaW5nIHRvIHRoZSBzdGF0ZSBpdHNlbGYuIEFuZCwgb2YgY291cnNlLCBhbnkgY29tcG9uZW50IGNhbiBzdWJzY3JpYmUgaXRzZWxmIHRvIHRoZSBhdG9tIGluc3RhbmNlIHVzaW5nIGB9PGEgcGFyZW50TmFtZT1cInBcIiB7Li4ue1xuICAgICAgICBcImhyZWZcIjogXCIuLi9hcGkvaG9va3MvdXNlQXRvbVZhbHVlXCJcbiAgICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJhXCI+e2B1c2VBdG9tVmFsdWVgfTwvaW5saW5lQ29kZT48L2E+e2Agb3Igc2ltaWxhci5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiXG4gICAgICB9fT57YGZ1bmN0aW9uIFBhcmVudCgpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSB1c2VBdG9tSW5zdGFuY2UobXlBdG9tKSAvLyBkb2Vzbid0IHN1YnNjcmliZVxuICBjb25zdCB2YWx1ZSA9IHVzZUF0b21WYWx1ZShpbnN0YW5jZSkgLy8gc3Vic2NyaWJlc1xuXG4gIHJldHVybiAoXG4gICAgPEF0b21JbnN0YW5jZVByb3ZpZGVyIGluc3RhbmNlPXtpbnN0YW5jZX0+XG4gICAgICA8Q2hpbGQgLz5cbiAgICA8L0F0b21JbnN0YW5jZVByb3ZpZGVyPlxuICApXG59XG5cbmZ1bmN0aW9uIENoaWxkKCkge1xuICBjb25zdCBpbnN0YW5jZSA9IHVzZUF0b21Db25zdW1lcihteUF0b20sIHRydWUpIC8vIGRvZXNuJ3Qgc3Vic2NyaWJlXG4gIGNvbnN0IHZhbHVlID0gdXNlQXRvbVZhbHVlKGluc3RhbmNlKSAvLyBzdWJzY3JpYmVzXG4gIC4uLlxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BMZXQncyBzZWUgYSBsaXZlIGV4YW1wbGUgb2Ygd2hhdCB3ZSBoYXZlIHNvIGZhci5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPWNvbnRleHQvc2ltcGxlIHJlc3VsdFZhcj1QYXJlbnRcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJjb250ZXh0L3NpbXBsZVwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIlBhcmVudFwiXG4gICAgICB9fT57YGNvbnN0IHByb3ZpZGVkQXRvbSA9IGF0b20oJ3Byb3ZpZGVkJywgJ3RoZSBzdGF0ZSEnKVxuXG5mdW5jdGlvbiBDaGlsZCgpIHtcbiAgY29uc3QgaW5zdGFuY2UgPSB1c2VBdG9tQ29uc3VtZXIocHJvdmlkZWRBdG9tKVxuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZUF0b21TdGF0ZShpbnN0YW5jZSkgLy8gc3Vic2NyaWJlIHRvIHN0YXRlIHVwZGF0ZXNcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8ZGl2PkNoaWxkIFN0YXRlIChzdWJzY3JpYmVkKToge3N0YXRlfTwvZGl2PlxuICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRTdGF0ZSgnbmV3IHN0YXRlIScpfT5DaGFuZ2U8L2J1dHRvbj5cbiAgICA8Lz5cbiAgKVxufVxuXG5mdW5jdGlvbiBQYXJlbnQoKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gdXNlQXRvbUluc3RhbmNlKHByb3ZpZGVkQXRvbSlcblxuICByZXR1cm4gKFxuICAgIDxBdG9tSW5zdGFuY2VQcm92aWRlciBpbnN0YW5jZT17aW5zdGFuY2V9PlxuICAgICAgPGRpdj5QYXJlbnQgU3RhdGUgKG5vdCBzdWJzY3JpYmVkKToge2luc3RhbmNlLmdldFN0YXRlKCl9PC9kaXY+XG4gICAgICA8Q2hpbGQgLz5cbiAgICA8L0F0b21JbnN0YW5jZVByb3ZpZGVyPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0aXRsZVwiOiBcInRyeSBtZVwiLFxuICAgICAgXCJ0eXBlXCI6IFwidGlwXCJcbiAgICB9fT48cCBwYXJlbnROYW1lPVwiYWRtb25pdGlvblwiPntgVHJ5IGNoYW5naW5nIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BQYXJlbnRgfTwvaW5saW5lQ29kZT57YCBjb21wb25lbnQgYWJvdmUgdG8gYmUgZHluYW1pYyB3aXRoIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHVzZUF0b21WYWx1ZShpbnN0YW5jZSlgfTwvaW5saW5lQ29kZT57YC5gfTwvcD48L2FkbW9uaXRpb24+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwidXNpbmctc2VsZWN0b3JzXCJcbiAgICB9fT57YFVzaW5nIFNlbGVjdG9yc2B9PC9oMj5cbiAgICA8cD57YEEgY29tbW9uIHBhdHRlcm4gaXMgdG8gcGFzcyB0aGUgcHJvdmlkZWQgYXRvbSBpbnN0YW5jZSB0byBhbiBBdG9tIEdldHRlciBpbnNpZGUgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcIi4uL2FwaS9ob29rcy91c2VBdG9tU2VsZWN0b3JcIlxuICAgICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImFcIj57YHVzZUF0b21TZWxlY3RvcmB9PC9pbmxpbmVDb2RlPjwvYT57YCB0byBsaW1pdCBjb21wb25lbnQgcmVyZW5kZXJzLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCJcbiAgICAgIH19PntgZnVuY3Rpb24gQ2hpbGQoKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gdXNlQXRvbUNvbnN1bWVyKG15QXRvbSwgdHJ1ZSkgLy8gZG9lc24ndCBzdWJzY3JpYmVcblxuICAvLyBzdWJzY3JpYmUsIGJ1dCBvbmx5IGNhdXNlIGEgcmVyZW5kZXIgd2hlbiBcXGBzb21lRmllbGRcXGAgY2hhbmdlczpcbiAgY29uc3Qgc29tZUZpZWxkID0gdXNlQXRvbVNlbGVjdG9yKCh7IGdldCB9KSA9PiBnZXQoaW5zdGFuY2UpLnNvbWVGaWVsZClcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcImNvb2wtYnV0LXdoeVwiXG4gICAgfX0+e2BDb29sIEJ1dCBXaHk/YH08L2gyPlxuICAgIDxwPntgRWNvc3lzdGVtcyBlc3NlbnRpYWxseSBtYWtlIGFsbCBhdG9tIGluc3RhbmNlcyBcImdsb2JhbFwiIHRvIHRoZSB3aG9sZSBjb21wb25lbnQgdHJlZSB1bmRlciBhbiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2A8RWNvc3lzdGVtUHJvdmlkZXI+YH08L2lubGluZUNvZGU+e2AuIFNvIHdoeSB3b3VsZCB3ZSBuZWVkIHRvIHByb3ZpZGUgY2VydGFpbiBpbnN0YW5jZXMgdG8gcGFydHMgb2YgdGhlIHRyZWU/YH08L3A+XG4gICAgPHA+e2BUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHByb3ZpZGluZyBhdG9tIGluc3RhbmNlcyBvdmVyIFJlYWN0IGNvbnRleHQgaXMgdG8gZ2l2ZSBhIHJldXNhYmxlIHN1YnRyZWUgYW4gYXRvbSBpbnN0YW5jZSB3aXRoIHNwZWNpZmljIHBhcmFtZXRlcnMuIFRoZSBjaGlsZHJlbiBpbiB0aGUgc3VidHJlZSBkb24ndCBuZWVkIHRvIGtub3cgd2hhdCBwYXJhbXMgdG8gcGFzcyB0byB0aGUgYXRvbS5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgZnVuY3Rpb24gQ2hpbGQoKSB7XG4gIC8vIHdpdGhvdXQgdXNlQXRvbUNvbnN1bWVyLCB5b3UgbmVlZCB0byBwYXNzIHRoZSByaWdodCBwYXJhbXMgZXZlcnkgdGltZSB5b3UgdXNlIHRoZSBhdG9tOlxuICBjb25zdCBpbnN0YW5jZSA9IHVzZUF0b21JbnN0YW5jZShteUF0b20sIFtcbiAgICAnbXknLFxuICAgIHsgc3BlY2lmaWM6IHsgcGFyYW1zOiAnaGVyZScgfSB9LFxuICBdKVxuXG4gIC8vIGNvbXBhcmU6XG4gIGNvbnN0IGluc3RhbmNlID0gdXNlQXRvbUNvbnN1bWVyKG15QXRvbSwgdHJ1ZSlcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgVGhpcyBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBsaXN0cy4gU2F5IHdlIGhhdmUgYSBjb21wb25lbnQgdGhhdCdzIHJlbmRlcmVkIG1hbnkgdGltZXMgd2l0aCBkaWZmZXJlbnQgcHJvcHM6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c3hcIlxuICAgICAgfX0+e2BmdW5jdGlvbiBVc2VyVGh1bWJuYWlsKHsgaWQgfSkge1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8QXZhdGFyIGlkPXtpZH0gLz5cbiAgICAgIDxOaWNrbmFtZSBpZD17aWR9IC8+XG4gICAgICA8T25saW5lU3RhdHVzIGlkPXtpZH0gLz5cbiAgICA8Lz5cbiAgKVxufVxuXG5mdW5jdGlvbiBVc2VyTGlzdCh7IHVzZXJzIH0pIHtcbiAgcmV0dXJuIHVzZXJzLm1hcCh1c2VyID0+IDxVc2VyVGh1bWJuYWlsIGtleT17dXNlci5pZH0gaWQ9e3VzZXIuaWR9IC8+KVxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BZb3UgY2FuIHNlZSBob3cgYWxsIHRoZSBjaGlsZHJlbiBvZiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BVc2VyVGh1bWJuYWlsYH08L2lubGluZUNvZGU+e2AgbWlnaHQgbmVlZCB0byB1c2UgdGhlIGlkIHRvIGZldGNoL21haW50YWluIHNvbWUgc3RhdGUgLSB0aGVpciBjdXJyZW50IHByb2ZpbGUgcGljdHVyZSwgdGhlaXIgcHJlZmVycmVkIGRpc3BsYXkgbmFtZSwgYW5kIHdoZXRoZXIgdGhleSdyZSBvbmxpbmUuIEZvciBleGFtcGxlOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCJcbiAgICAgIH19PntgZnVuY3Rpb24gT25saW5lU3RhdHVzKHsgaWQgfSkge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZUF0b21WYWx1ZSh1c2VyRGF0YSwgW2lkXSlcblxuICByZXR1cm4gPGRpdj57dXNlckRhdGEuaXNPbmxpbmUgPyA8R3JlZW5Eb3QgLz4gOiA8UmVkRG90IC8+fTwvZGl2PlxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BCdXQgd2l0aCBjb250ZXh0LCB3ZSBjYW4gaW5zdGVhZCBnaXZlIHRoZSBlbnRpcmUgc3VidHJlZSBpdHMgb3duIGlzb2xhdGVkIHN0YXRlOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCJcbiAgICAgIH19PntgZnVuY3Rpb24gVXNlclRodW1ibmFpbCh7IGlkIH0pIHtcbiAgY29uc3QgaW5zdGFuY2UgPSB1c2VBdG9tSW5zdGFuY2UodXNlckRhdGEsIFtpZF0pXG5cbiAgcmV0dXJuIChcbiAgICA8QXRvbUluc3RhbmNlUHJvdmlkZXIgaW5zdGFuY2U9e3VzZXJJbnN0YW5jZX0+XG4gICAgICA8QXZhdGFyIC8+XG4gICAgICA8Tmlja25hbWUgLz5cbiAgICAgIDxPbmxpbmVTdGF0dXMgLz5cbiAgICA8L0F0b21JbnN0YW5jZVByb3ZpZGVyPlxuICApXG59XG5cbmZ1bmN0aW9uIE9ubGluZVN0YXR1cygpIHtcbiAgLy8gbm8gbmVlZCB0byBwYXNzIFxcYGlkXFxgIHByb3AhXG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlQXRvbUNvbnN1bWVyKHVzZXJEYXRhLCB0cnVlKVxuXG4gIHJldHVybiA8ZGl2Pnt1c2VyRGF0YS5pc09ubGluZSA/IDxHcmVlbkRvdCAvPiA6IDxSZWREb3QgLz59PC9kaXY+XG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YEhlcmUncyBhIHZlcnkgY29udHJpdmVkLCBpbi1kZXB0aCwgbGl2ZSBleGFtcGxlIGlmIHlvdSB3YW50IHRvIHJldmlldyBhIGxpdHRsZSBvZiB3aGF0IHdlJ3ZlIGxlYXJuZWQgc28gZmFyLiBPdGhlcndpc2UsIHdlJ3JlIGRvbmUgaGVyZS4gR28gbmV4dCFgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPXJlYWN0LWNvbnRleHQvbGlzdC1leGFtcGxlIHJlc3VsdFZhcj1Ub2RvTGlzdFwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcInJlYWN0LWNvbnRleHQvbGlzdC1leGFtcGxlXCIsXG4gICAgICAgIFwicmVzdWx0VmFyXCI6IFwiVG9kb0xpc3RcIlxuICAgICAgfX0+e2Bjb25zdCBpc0VkaXRpbmdUb2Rvc0F0b20gPSBhdG9tKCdpc0VkaXRpbmdUb2RvcycsIGZhbHNlKVxuXG5jb25zdCB0b2RvTGlzdEF0b20gPSBhdG9tKCd0b2RvTGlzdCcsICgpID0+IFtcbiAgeyBpZDogMSwgdGV4dDogJ0dvJyB9LFxuICB7IGlkOiAyLCB0ZXh0OiAnRmlnaHQnIH0sXG4gIHsgaWQ6IDMsIHRleHQ6ICdXaW4nIH0sXG5dKVxuXG5jb25zdCB0b2RvQXRvbSA9IGlvbigndG9kbycsICh7IGdldCwgZ2V0SW5zdGFuY2UgfSwgaWQ6IG51bWJlcikgPT4ge1xuICBjb25zdCB0b2RvTGlzdEluc3RhbmNlID0gZ2V0SW5zdGFuY2UodG9kb0xpc3RBdG9tKVxuXG4gIC8vIGR5bmFtaWNpemUgdGhlIGVkZ2U6XG4gIGNvbnN0IHRvZG8gPSBnZXQodG9kb0xpc3RJbnN0YW5jZSkuZmluZCh0b2RvID0+IHRvZG8uaWQgPT09IGlkKVxuICBjb25zdCB0ZXh0U3RvcmUgPSBpbmplY3RTdG9yZSh0b2RvLnRleHQpIC8vIHRha2UgYW4gaW5pdGlhbCBzdGF0ZSBzbmFwc2hvdFxuXG4gIGNvbnN0IHNhdmVDaGFuZ2VzID0gKCkgPT5cbiAgICB0b2RvTGlzdEluc3RhbmNlLnNldFN0YXRlKHRvZG9zID0+XG4gICAgICB0b2Rvcy5tYXAodG9kbyA9PlxuICAgICAgICB0b2RvLmlkID09PSBpZCA/IHsgLi4udG9kbywgdGV4dDogdGV4dFN0b3JlLmdldFN0YXRlKCkgfSA6IHRvZG9cbiAgICAgIClcbiAgICApXG5cbiAgcmV0dXJuIGFwaSh0ZXh0U3RvcmUpLnNldEV4cG9ydHMoeyBzYXZlQ2hhbmdlcyB9KVxufSlcblxuZnVuY3Rpb24gVG9kbygpIHtcbiAgY29uc3QgdG9kb0luc3RhbmNlID0gdXNlQXRvbUNvbnN1bWVyKHRvZG9BdG9tLCB0cnVlKVxuICBjb25zdCBbdGV4dCwgc2V0VGV4dF0gPSB1c2VBdG9tU3RhdGUodG9kb0luc3RhbmNlKVxuICBjb25zdCBpc0VkaXRpbmcgPSB1c2VBdG9tVmFsdWUoaXNFZGl0aW5nVG9kb3NBdG9tKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIHtpc0VkaXRpbmcgPyAoXG4gICAgICAgIDxpbnB1dCBvbkNoYW5nZT17ZXZlbnQgPT4gc2V0VGV4dChldmVudC50YXJnZXQudmFsdWUpfSB2YWx1ZT17dGV4dH0gLz5cbiAgICAgICkgOiAoXG4gICAgICAgIDxzcGFuPnt0ZXh0fTwvc3Bhbj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZnVuY3Rpb24gVG9kb0xpc3QoKSB7XG4gIC8vIHRoaXMgaXMgYSBwcmV0dHkgYWR2YW5jZWQgcGF0dGVybiAtIHVzaW5nIGEgc2VsZWN0b3IgdG8gZ2V0IGluc3RhbmNlc1xuICBjb25zdCBpbnN0YW5jZXMgPSB1c2VBdG9tU2VsZWN0b3IoKHsgZ2V0LCBnZXRJbnN0YW5jZSB9KSA9PiB7XG4gICAgY29uc3QgdG9kb3MgPSBnZXQodG9kb0xpc3RBdG9tKVxuXG4gICAgcmV0dXJuIHRvZG9zLm1hcCh0b2RvID0+IGdldEluc3RhbmNlKHRvZG9BdG9tLCBbdG9kby5pZF0pKVxuICB9KVxuXG4gIGNvbnN0IFtpc0VkaXRpbmcsIHNldElzRWRpdGluZ10gPSB1c2VBdG9tU3RhdGUoaXNFZGl0aW5nVG9kb3NBdG9tKVxuXG4gIGNvbnN0IHNhdmVBbGxDaGFuZ2VzID0gKCkgPT4ge1xuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3RhbmNlID0+IGluc3RhbmNlLmV4cG9ydHMuc2F2ZUNoYW5nZXMoKSlcbiAgICBzZXRJc0VkaXRpbmcoZmFsc2UpXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7IWlzRWRpdGluZyAmJiA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldElzRWRpdGluZyh0cnVlKX0+RWRpdDwvYnV0dG9uPn1cbiAgICAgIHtpbnN0YW5jZXMubWFwKGluc3RhbmNlID0+IChcbiAgICAgICAgLy8gdnZ2ICBQcm92aWRlIGEgZGlmZmVyZW50IGluc3RhbmNlIGZvciBlYWNoIGl0ZW0gIHZ2dlxuICAgICAgICA8QXRvbUluc3RhbmNlUHJvdmlkZXIga2V5PXtpbnN0YW5jZS5rZXlIYXNofSBpbnN0YW5jZT17aW5zdGFuY2V9PlxuICAgICAgICAgIDxUb2RvIC8+XG4gICAgICAgIDwvQXRvbUluc3RhbmNlUHJvdmlkZXI+XG4gICAgICApKX1cbiAgICAgIHtpc0VkaXRpbmcgJiYgPGJ1dHRvbiBvbkNsaWNrPXtzYXZlQWxsQ2hhbmdlc30+U2F2ZSBDaGFuZ2VzPC9idXR0b24+fVxuICAgIDwvPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJyZWNhcFwiXG4gICAgfX0+e2BSZWNhcGB9PC9oMj5cbiAgICA8dWw+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BBdG9tIGluc3RhbmNlcyBjYW4gYmUgcHJvdmlkZWQgb3ZlciBSZWFjdCBjb250ZXh0IHZpYSBgfTxhIHBhcmVudE5hbWU9XCJsaVwiIHsuLi57XG4gICAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2NvbXBvbmVudHMvQXRvbUluc3RhbmNlUHJvdmlkZXJcIlxuICAgICAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiYVwiPntgPEF0b21JbnN0YW5jZVByb3ZpZGVyPmB9PC9pbmxpbmVDb2RlPjwvYT57YC5gfTwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BBdG9tIGluc3RhbmNlcyBjYW4gYmUgY29uc3VtZWQgZnJvbSBSZWFjdCBjb250ZXh0IHZpYSBgfTxhIHBhcmVudE5hbWU9XCJsaVwiIHsuLi57XG4gICAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2hvb2tzL3VzZUF0b21Db25zdW1lclwiXG4gICAgICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJhXCI+e2B1c2VBdG9tQ29uc3VtZXJgfTwvaW5saW5lQ29kZT48L2E+e2AuYH1cbiAgICAgICAgPHVsIHBhcmVudE5hbWU9XCJsaVwiPlxuICAgICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHVzZUF0b21Db25zdW1lcihteUF0b20sIFsuLi5kZWZhdWx0UGFyYW1zXSlgfTwvaW5saW5lQ29kZT57YCBjcmVhdGVzIGFuIGF0b20gaW5zdGFuY2Ugd2l0aCBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgZGVmYXVsdFBhcmFtc2B9PC9pbmxpbmVDb2RlPntgIGlmIG5vIGluc3RhbmNlIHdhcyBwcm92aWRlZC5gfTwvbGk+XG4gICAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgdXNlQXRvbUNvbnN1bWVyKG15QXRvbSwgdHJ1ZSlgfTwvaW5saW5lQ29kZT57YCB0aHJvd3MgYW4gZXJyb3IgaWYgbm8gYXRvbSBpbnN0YW5jZSB3YXMgcHJvdmlkZWQuYH08L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFlvdSBjYW4gc3Vic2NyaWJlIGFueSBjb21wb25lbnQgdG8gYSBjb25zdW1lZCBhdG9tIGluc3RhbmNlIGJ5IHVzaW5nIGB9PGEgcGFyZW50TmFtZT1cImxpXCIgey4uLntcbiAgICAgICAgICBcImhyZWZcIjogXCIuLi9hcGkvaG9va3MvdXNlQXRvbVZhbHVlXCJcbiAgICAgICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImFcIj57YHVzZUF0b21WYWx1ZWB9PC9pbmxpbmVDb2RlPjwvYT57YCBvciBhbnkgb3RoZXIgaG9vayB0aGF0IGNyZWF0ZXMgYSBgfTxhIHBhcmVudE5hbWU9XCJsaVwiIHsuLi57XG4gICAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2dsb3NzYXJ5I2R5bmFtaWMtZ3JhcGgtZGVwZW5kZW5jeVwiXG4gICAgICAgIH19PntgZHluYW1pYyBncmFwaCBkZXBlbmRlbmN5YH08L2E+e2AuYH08L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgdXNlQXRvbVNlbGVjdG9yYH08L2lubGluZUNvZGU+e2Agd2lsbCBvbmx5IHJlcmVuZGVyIHRoZSBjb21wb25lbnQgd2hlbiB0aGUgc2VsZWN0b3IgcmVzdWx0IGNoYW5nZXMuYH08L2xpPlxuICAgIDwvdWw+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwibmV4dC1zdGVwc1wiXG4gICAgfX0+e2BOZXh0IFN0ZXBzYH08L2gyPlxuICAgIDxwPntgTGV0J3MgY29udGludWUgbGVhcm5pbmcgaG93IHRvIGludGVncmF0ZSBhdG9tcyB3aXRoIFJlYWN0LiBOZXh0IHVwOiBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwic3VzcGVuc2VcIlxuICAgICAgfX0+e2BSZWFjdCBzdXNwZW5zZWB9PC9hPntgLmB9PC9wPlxuICAgIDwvTURYTGF5b3V0Pjtcbn1cbjtcbk1EWENvbnRlbnQuaXNNRFhDb21wb25lbnQgPSB0cnVlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwibWR4IiwiZnJvbnRNYXR0ZXIiLCJpZCIsInRpdGxlIiwiY29udGVudFRpdGxlIiwidW5kZWZpbmVkIiwibWV0YWRhdGEiLCJhc3NldHMiLCJ0b2MiLCJ2YWx1ZSIsImxldmVsIiwibGF5b3V0UHJvcHMiLCJNRFhMYXlvdXQiLCJNRFhDb250ZW50IiwiY29tcG9uZW50cyIsInByb3BzIiwiaXNNRFhDb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2822\n')}}]);