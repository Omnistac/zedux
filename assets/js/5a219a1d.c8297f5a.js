"use strict";(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[5571],{8093:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "assets": function() { return /* binding */ assets; },\n/* harmony export */   "contentTitle": function() { return /* binding */ contentTitle; },\n/* harmony export */   "default": function() { return /* binding */ MDXContent; },\n/* harmony export */   "frontMatter": function() { return /* binding */ frontMatter; },\n/* harmony export */   "metadata": function() { return /* binding */ metadata; },\n/* harmony export */   "toc": function() { return /* binding */ toc; }\n/* harmony export */ });\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7462);\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3366);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7294);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3905);\nvar _excluded=["components"];/* @jsxRuntime classic */ /* @jsx mdx */ /* @jsxFrag React.Fragment */var frontMatter={id:\'ssr\',title:\'SSR\'};var contentTitle=undefined;var metadata={"unversionedId":"advanced/ssr","id":"advanced/ssr","title":"SSR","description":"This guide assumes knowledge of the persistence guide. It\'s recommended to read that first.","source":"@site/docs/advanced/ssr.mdx","sourceDirName":"advanced","slug":"/advanced/ssr","permalink":"/zedux/docs/advanced/ssr","draft":false,"editUrl":"https://github.com/Omnistac/zedux/tree/master/docs/advanced/ssr.mdx","tags":[],"version":"current","frontMatter":{"id":"ssr","title":"SSR"},"sidebar":"react","previous":{"title":"Plugins","permalink":"/zedux/docs/advanced/plugins"},"next":{"title":"Store Composition","permalink":"/zedux/docs/advanced/store-composition"}};var assets={};var toc=[{value:\'SSR Setup\',id:\'ssr-setup\',level:2},{value:\'Server Dehydration\',id:\'server-dehydration\',level:2},{value:\'Promises\',id:\'promises\',level:3},{value:\'Prefetching\',id:\'prefetching\',level:3},{value:\'Other Techniques\',id:\'other-techniques\',level:3},{value:\'Client Hydration\',id:\'client-hydration\',level:2},{value:\'Recap\',id:\'recap\',level:2}];var layoutProps={toc:toc};var MDXLayout="wrapper";function MDXContent(_ref){var components=_ref.components,props=(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(_ref,_excluded);return (0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)(MDXLayout,(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"This guide assumes knowledge of the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"persistence"},"persistence guide"),". It\'s recommended to read that first.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"persistence"},"The persistence guide")," showed how to get an ecosystem\'s state snapshot and use it to rehydrate the entire ecosystem. There is only a little more to learn to get a full-fledged SSR setup going."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"title":"you will learn:","type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"How to use Zedux in a server-rendered app")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"ssr-setup"},"SSR Setup"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ssr")," ecosystem config option to turn on SSR mode for the entire ecosystem:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const ecosystem = createEcosystem({\\n  id: \'root\',\\n  ssr: true,\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"In SSR mode, effects created via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectEffect")," don\'t run. This exactly mimics the behavior of React\'s ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"useEffect")," on the server. The vague wisdom behind this is that SSR is meant to only capture the initial render, while effects only have ... effect ... on subsequent renders."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"server-dehydration"},"Server Dehydration"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"As you\'ve probably guessed, use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," to grab the initial state snapshot from the server. An example using an Express-esque route handler:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"import { createEcosystem } from \'@zedux/react\'\\nimport { renderToString } from \'react-dom/server\'\\n\\nfunction renderRoute(req, res) {\\n  const ecosystem = createEcosystem({\\n    id: \'root\',\\n    ssr: true\\n  })\\n\\n  const output = renderApp(ecosystem)\\n  const snapshot = ecosystem.dehydrate({ excludeFlags: [\'unserializable\'] })\\n\\n  // destroy the ecosystem, just to be safe:\\n  ecosystem.destroy(true)\\n\\n  res.send(`\\n    <div id=\\"root\\">${output}</div>\\n    <script>\\n      window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n    <\/script>\\n    <script src=\\"/my/app.js\\"><\/script>\\n  `)\\n}\\n\\nfunction renderApp(ecosystem) {\\n  return renderToString(\\n    <EcosystemProvider ecosystem={ecosystem}>\\n      <App />\\n    </Provider>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"promises"},"Promises"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The promises of query atoms - e.g. inline promises or promises created via ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectPromise"),"/",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectMemo")," - still run during SSR. This enables the double-rendering technique (which may or may not work for you). Simply render again after awaiting all promises:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"async function renderRoute(req, res) {\\n  const ecosystem = createEcosystem({\\n    id: \'root\',\\n    ssr: true,\\n  })\\n\\n  // highlight-next-line\\n  renderApp(ecosystem) // render once and discard the result\\n\\n  // grab the promise from every atom instance that has one:\\n  // highlight-start\\n  const promises = Object.values(ecosystem.findAll())\\n    .map(instance => instance.promise)\\n    .filter(Boolean)\\n  // highlight-end\\n\\n  // highlight-next-line\\n  await Promise.all(promises) // contrived warning - remember error handling\\n\\n  // all promises resolved! Render again\\n  // highlight-next-line\\n  const output = renderApp(ecosystem)\\n  const snapshot = ecosystem.dehydrate({ excludeFlags: [\'unserializable\'] })\\n\\n  ecosystem.destroy(true)\\n\\n  res.send(`\\n    <div id=\\"root\\">${output}</div>\\n    <script>\\n      window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n    <\/script>\\n    <script src=\\"/my/app.js\\"><\/script>\\n  `)\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"prefetching"},"Prefetching"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can also \\"prefetch\\" specific atoms before rendering:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"async function renderRoute(req, res) {\\n  const ecosystem = createEcosystem({\\n    id: \'root\',\\n    ssr: true,\\n  })\\n\\n  await prefetchAtoms(ecosystem)\\n\\n  const output = renderApp(ecosystem)\\n  const snapshot = ecosystem.dehydrate({ excludeFlags: [\'unserializable\'] })\\n\\n  ecosystem.destroy(true)\\n\\n  res.send(`\\n    <div id=\\"root\\">${output}</div>\\n    <script>\\n      window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n    <\/script>\\n    <script src=\\"/my/app.js\\"><\/script>\\n  `)\\n}\\n\\nfunction prefetchAtoms(ecosystem) {\\n  const fooInstance = ecosystem.getInstance(fooAtom)\\n  const barInstance = ecosystem.getInstance(barAtom)\\n\\n  return Promise.all([fooInstance.promise, barInstance.promise])\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"other-techniques"},"Other Techniques"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Zedux gives you very transparent control over your state. There are many ways you can use this transparency to optimize SSR."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"For example, it\'s possible to analyze your dependency graph and prefetch only highly-demanded atoms."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"renderApp(ecosystem)\\n\\nconst instancesByWeight = Object.values(ecosystem.findAll())\\n  .filter(instance => instance.promise) // only compare instances with promises\\n  .sort(\\n    (instanceA, instanceB) =>\\n      ecosystem._graph.nodes[instanceA.id].weight -\\n      ecosystem._graph.nodes[instanceB.id].weight\\n  )\\n\\n// instances with lower weight are typically used more:\\nconst mostUsedInstances = instancesByWeight.slice(\\n  0,\\n  Math.floor(instancesByWeight.length / 2)\\n)\\n\\n// wait for half of all the suspending atoms (the most-used half):\\nawait Promise.all(mostUsedInstances.map(instance => instance.promise))\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Many other techniques are possible. Some ideas:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Using ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"react-ssr-prepass")," to drill into nested suspense boundaries"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Prefetching only atoms with at least X dependents"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Using a fake user to periodically render routes during server downtime, caching lists of atoms that should be prefetched for that type of user on that route.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"client-hydration"},"Client Hydration"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"When you have a snapshot of initial state on the server, you\'ll usually send it to the client by e.g. embedding it in the page\'s HTML output:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"res.send(`\\n  <div id=\\"root\\">${output}</div>\\n  <script>\\n    window.__SNAPSHOT = ${JSON.stringify(snapshot)}\\n  <\/script>\\n  <script src=\\"/my/app.js\\"><\/script>\\n`)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now the client app can pass that to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.hydrate()"),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx"},"import { createEcosystem, EcosystemProvider } from \'@zedux/react\'\\n\\nconst ecosystem = createEcosystem({ id: \'root\' })\\necosystem.hydrate(window.__SNAPSHOT)\\n\\nfunction App() {\\n  return (\\n    <EcosystemProvider ecosystem={ecosystem}>\\n      <Routes />\\n    </EcosystemProvider>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"All atom instances created by rendering ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"<Routes />")," will now have their initial state hydrated from the server snapshot."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"recap"},"Recap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ssr")," ecosystem config option to turn on SSR mode, preventing effects from running."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Dehydrate the state on the server with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ecosystem.dehydrate()"),"."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"There are many ways to prefetch query atoms. Await many promises by grabbing the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},".promise")," off of each instance."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Hydrate the state on the client with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ecosystem.hydrate()"),".")));};MDXContent.isMDXComponent=true;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNMLG1FQUNFLElBQUksQ0FBRSxrQkFBa0IscUJBQ0UsQ0FDNUIsc05BQXdKLENBQ3hKLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLCtLQVF6QixDQUFNLENBQ1gsNkdBQTJDLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLHdCQUFxQyxLQUFTLENBQ25ILHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxjQUFjLHNTQWExQixDQUFNLENBQ1gsaUhBQStDLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLGVBQTRCLHlFQUE2RSxDQUNsTCxtRUFDRSxJQUFJLENBQUUsT0FBTyxVQUNFLENBQ2pCLHVFQUNFLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLGFBQWEsMkVBQVksVUFBVSxDQUFDLElBQUksUUFBcUIsa0ZBQXVGLENBQ3ZLLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLDRDQUE0QywyRUFBWSxVQUFVLENBQUMsSUFBSSwwQkFBdUMsS0FBVSxDQUMzSSxtRUFBSSxVQUFVLENBQUMsSUFBSSxzRkFBc0YsMkVBQVksVUFBVSxDQUFDLElBQUksYUFBMEIsMEJBQStCLENBQzdMLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLDBDQUEwQywyRUFBWSxVQUFVLENBQUMsSUFBSSx3QkFBcUMsS0FBVSxDQUNwSSxDQUNPLENBQ2hCLENBQ0EsQ0FDQUQsVUFBVSxDQUFDRyxjQUFjLENBQUcsSUFBSSIsInNvdXJjZXMiOlsid2VicGFjazovL3plZHV4LWRvY3MvLi9kb2NzL2FkdmFuY2VkL3Nzci5tZHg/NzNlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuLyogQGpzeFJ1bnRpbWUgY2xhc3NpYyAqL1xuLyogQGpzeCBtZHggKi9cbi8qIEBqc3hGcmFnIFJlYWN0LkZyYWdtZW50ICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtZHggfSBmcm9tICdAbWR4LWpzL3JlYWN0JztcblxuXG5leHBvcnQgY29uc3QgZnJvbnRNYXR0ZXIgPSB7XG5cdGlkOiAnc3NyJyxcblx0dGl0bGU6ICdTU1InXG59O1xuZXhwb3J0IGNvbnN0IGNvbnRlbnRUaXRsZSA9IHVuZGVmaW5lZDtcbmV4cG9ydCBjb25zdCBtZXRhZGF0YSA9IHtcbiAgXCJ1bnZlcnNpb25lZElkXCI6IFwiYWR2YW5jZWQvc3NyXCIsXG4gIFwiaWRcIjogXCJhZHZhbmNlZC9zc3JcIixcbiAgXCJ0aXRsZVwiOiBcIlNTUlwiLFxuICBcImRlc2NyaXB0aW9uXCI6IFwiVGhpcyBndWlkZSBhc3N1bWVzIGtub3dsZWRnZSBvZiB0aGUgcGVyc2lzdGVuY2UgZ3VpZGUuIEl0J3MgcmVjb21tZW5kZWQgdG8gcmVhZCB0aGF0IGZpcnN0LlwiLFxuICBcInNvdXJjZVwiOiBcIkBzaXRlL2RvY3MvYWR2YW5jZWQvc3NyLm1keFwiLFxuICBcInNvdXJjZURpck5hbWVcIjogXCJhZHZhbmNlZFwiLFxuICBcInNsdWdcIjogXCIvYWR2YW5jZWQvc3NyXCIsXG4gIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3MvYWR2YW5jZWQvc3NyXCIsXG4gIFwiZHJhZnRcIjogZmFsc2UsXG4gIFwiZWRpdFVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9PbW5pc3RhYy96ZWR1eC90cmVlL21hc3Rlci9kb2NzL2FkdmFuY2VkL3Nzci5tZHhcIixcbiAgXCJ0YWdzXCI6IFtdLFxuICBcInZlcnNpb25cIjogXCJjdXJyZW50XCIsXG4gIFwiZnJvbnRNYXR0ZXJcIjoge1xuICAgIFwiaWRcIjogXCJzc3JcIixcbiAgICBcInRpdGxlXCI6IFwiU1NSXCJcbiAgfSxcbiAgXCJzaWRlYmFyXCI6IFwicmVhY3RcIixcbiAgXCJwcmV2aW91c1wiOiB7XG4gICAgXCJ0aXRsZVwiOiBcIlBsdWdpbnNcIixcbiAgICBcInBlcm1hbGlua1wiOiBcIi96ZWR1eC9kb2NzL2FkdmFuY2VkL3BsdWdpbnNcIlxuICB9LFxuICBcIm5leHRcIjoge1xuICAgIFwidGl0bGVcIjogXCJTdG9yZSBDb21wb3NpdGlvblwiLFxuICAgIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3MvYWR2YW5jZWQvc3RvcmUtY29tcG9zaXRpb25cIlxuICB9XG59O1xuZXhwb3J0IGNvbnN0IGFzc2V0cyA9IHtcblxufTtcblxuXG5leHBvcnQgY29uc3QgdG9jID0gW3tcbiAgdmFsdWU6ICdTU1IgU2V0dXAnLFxuICBpZDogJ3Nzci1zZXR1cCcsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnU2VydmVyIERlaHlkcmF0aW9uJyxcbiAgaWQ6ICdzZXJ2ZXItZGVoeWRyYXRpb24nLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ1Byb21pc2VzJyxcbiAgaWQ6ICdwcm9taXNlcycsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnUHJlZmV0Y2hpbmcnLFxuICBpZDogJ3ByZWZldGNoaW5nJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdPdGhlciBUZWNobmlxdWVzJyxcbiAgaWQ6ICdvdGhlci10ZWNobmlxdWVzJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICdDbGllbnQgSHlkcmF0aW9uJyxcbiAgaWQ6ICdjbGllbnQtaHlkcmF0aW9uJyxcbiAgbGV2ZWw6IDJcbn0sIHtcbiAgdmFsdWU6ICdSZWNhcCcsXG4gIGlkOiAncmVjYXAnLFxuICBsZXZlbDogMlxufV07XG5cbmNvbnN0IGxheW91dFByb3BzID0ge1xuICB0b2Ncbn07XG5jb25zdCBNRFhMYXlvdXQgPSBcIndyYXBwZXJcIlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTURYQ29udGVudCh7XG4gIGNvbXBvbmVudHMsXG4gIC4uLnByb3BzXG59KSB7XG4gIHJldHVybiA8TURYTGF5b3V0IHsuLi5sYXlvdXRQcm9wc30gey4uLnByb3BzfSBjb21wb25lbnRzPXtjb21wb25lbnRzfSBtZHhUeXBlPVwiTURYTGF5b3V0XCI+XG5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0eXBlXCI6IFwidGlwXCJcbiAgICB9fT48cCBwYXJlbnROYW1lPVwiYWRtb25pdGlvblwiPntgVGhpcyBndWlkZSBhc3N1bWVzIGtub3dsZWRnZSBvZiB0aGUgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgICAgXCJocmVmXCI6IFwicGVyc2lzdGVuY2VcIlxuICAgICAgICB9fT57YHBlcnNpc3RlbmNlIGd1aWRlYH08L2E+e2AuIEl0J3MgcmVjb21tZW5kZWQgdG8gcmVhZCB0aGF0IGZpcnN0LmB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8cD48YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcInBlcnNpc3RlbmNlXCJcbiAgICAgIH19PntgVGhlIHBlcnNpc3RlbmNlIGd1aWRlYH08L2E+e2Agc2hvd2VkIGhvdyB0byBnZXQgYW4gZWNvc3lzdGVtJ3Mgc3RhdGUgc25hcHNob3QgYW5kIHVzZSBpdCB0byByZWh5ZHJhdGUgdGhlIGVudGlyZSBlY29zeXN0ZW0uIFRoZXJlIGlzIG9ubHkgYSBsaXR0bGUgbW9yZSB0byBsZWFybiB0byBnZXQgYSBmdWxsLWZsZWRnZWQgU1NSIHNldHVwIGdvaW5nLmB9PC9wPlxuICAgIDxhZG1vbml0aW9uIHsuLi57XG4gICAgICBcInRpdGxlXCI6IFwieW91IHdpbGwgbGVhcm46XCIsXG4gICAgICBcInR5cGVcIjogXCJ0aXBcIlxuICAgIH19PjxwIHBhcmVudE5hbWU9XCJhZG1vbml0aW9uXCI+e2BIb3cgdG8gdXNlIFplZHV4IGluIGEgc2VydmVyLXJlbmRlcmVkIGFwcGB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJzc3Itc2V0dXBcIlxuICAgIH19PntgU1NSIFNldHVwYH08L2gyPlxuICAgIDxwPntgVXNlIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2Bzc3JgfTwvaW5saW5lQ29kZT57YCBlY29zeXN0ZW0gY29uZmlnIG9wdGlvbiB0byB0dXJuIG9uIFNTUiBtb2RlIGZvciB0aGUgZW50aXJlIGVjb3N5c3RlbTpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHtcbiAgaWQ6ICdyb290JyxcbiAgc3NyOiB0cnVlLFxufSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgSW4gU1NSIG1vZGUsIGVmZmVjdHMgY3JlYXRlZCB2aWEgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5qZWN0RWZmZWN0YH08L2lubGluZUNvZGU+e2AgZG9uJ3QgcnVuLiBUaGlzIGV4YWN0bHkgbWltaWNzIHRoZSBiZWhhdmlvciBvZiBSZWFjdCdzIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHVzZUVmZmVjdGB9PC9pbmxpbmVDb2RlPntgIG9uIHRoZSBzZXJ2ZXIuIFRoZSB2YWd1ZSB3aXNkb20gYmVoaW5kIHRoaXMgaXMgdGhhdCBTU1IgaXMgbWVhbnQgdG8gb25seSBjYXB0dXJlIHRoZSBpbml0aWFsIHJlbmRlciwgd2hpbGUgZWZmZWN0cyBvbmx5IGhhdmUgLi4uIGVmZmVjdCAuLi4gb24gc3Vic2VxdWVudCByZW5kZXJzLmB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcInNlcnZlci1kZWh5ZHJhdGlvblwiXG4gICAgfX0+e2BTZXJ2ZXIgRGVoeWRyYXRpb25gfTwvaDI+XG4gICAgPHA+e2BBcyB5b3UndmUgcHJvYmFibHkgZ3Vlc3NlZCwgdXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5kZWh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgIHRvIGdyYWIgdGhlIGluaXRpYWwgc3RhdGUgc25hcHNob3QgZnJvbSB0aGUgc2VydmVyLiBBbiBleGFtcGxlIHVzaW5nIGFuIEV4cHJlc3MtZXNxdWUgcm91dGUgaGFuZGxlcjpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiXG4gICAgICB9fT57YGltcG9ydCB7IGNyZWF0ZUVjb3N5c3RlbSB9IGZyb20gJ0B6ZWR1eC9yZWFjdCdcbmltcG9ydCB7IHJlbmRlclRvU3RyaW5nIH0gZnJvbSAncmVhY3QtZG9tL3NlcnZlcidcblxuZnVuY3Rpb24gcmVuZGVyUm91dGUocmVxLCByZXMpIHtcbiAgY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHtcbiAgICBpZDogJ3Jvb3QnLFxuICAgIHNzcjogdHJ1ZVxuICB9KVxuXG4gIGNvbnN0IG91dHB1dCA9IHJlbmRlckFwcChlY29zeXN0ZW0pXG4gIGNvbnN0IHNuYXBzaG90ID0gZWNvc3lzdGVtLmRlaHlkcmF0ZSh7IGV4Y2x1ZGVGbGFnczogWyd1bnNlcmlhbGl6YWJsZSddIH0pXG5cbiAgLy8gZGVzdHJveSB0aGUgZWNvc3lzdGVtLCBqdXN0IHRvIGJlIHNhZmU6XG4gIGVjb3N5c3RlbS5kZXN0cm95KHRydWUpXG5cbiAgcmVzLnNlbmQoXFxgXG4gICAgPGRpdiBpZD1cInJvb3RcIj5cXCR7b3V0cHV0fTwvZGl2PlxuICAgIDxzY3JpcHQ+XG4gICAgICB3aW5kb3cuX19TTkFQU0hPVCA9IFxcJHtKU09OLnN0cmluZ2lmeShzbmFwc2hvdCl9XG4gICAgPC9zY3JpcHQ+XG4gICAgPHNjcmlwdCBzcmM9XCIvbXkvYXBwLmpzXCI+PC9zY3JpcHQ+XG4gIFxcYClcbn1cblxuZnVuY3Rpb24gcmVuZGVyQXBwKGVjb3N5c3RlbSkge1xuICByZXR1cm4gcmVuZGVyVG9TdHJpbmcoXG4gICAgPEVjb3N5c3RlbVByb3ZpZGVyIGVjb3N5c3RlbT17ZWNvc3lzdGVtfT5cbiAgICAgIDxBcHAgLz5cbiAgICA8L1Byb3ZpZGVyPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJwcm9taXNlc1wiXG4gICAgfX0+e2BQcm9taXNlc2B9PC9oMz5cbiAgICA8cD57YFRoZSBwcm9taXNlcyBvZiBxdWVyeSBhdG9tcyAtIGUuZy4gaW5saW5lIHByb21pc2VzIG9yIHByb21pc2VzIGNyZWF0ZWQgdmlhIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGluamVjdFByb21pc2VgfTwvaW5saW5lQ29kZT57YC9gfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmplY3RNZW1vYH08L2lubGluZUNvZGU+e2AgLSBzdGlsbCBydW4gZHVyaW5nIFNTUi4gVGhpcyBlbmFibGVzIHRoZSBkb3VibGUtcmVuZGVyaW5nIHRlY2huaXF1ZSAod2hpY2ggbWF5IG9yIG1heSBub3Qgd29yayBmb3IgeW91KS4gU2ltcGx5IHJlbmRlciBhZ2FpbiBhZnRlciBhd2FpdGluZyBhbGwgcHJvbWlzZXM6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGFzeW5jIGZ1bmN0aW9uIHJlbmRlclJvdXRlKHJlcSwgcmVzKSB7XG4gIGNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7XG4gICAgaWQ6ICdyb290JyxcbiAgICBzc3I6IHRydWUsXG4gIH0pXG5cbiAgLy8gaGlnaGxpZ2h0LW5leHQtbGluZVxuICByZW5kZXJBcHAoZWNvc3lzdGVtKSAvLyByZW5kZXIgb25jZSBhbmQgZGlzY2FyZCB0aGUgcmVzdWx0XG5cbiAgLy8gZ3JhYiB0aGUgcHJvbWlzZSBmcm9tIGV2ZXJ5IGF0b20gaW5zdGFuY2UgdGhhdCBoYXMgb25lOlxuICAvLyBoaWdobGlnaHQtc3RhcnRcbiAgY29uc3QgcHJvbWlzZXMgPSBPYmplY3QudmFsdWVzKGVjb3N5c3RlbS5maW5kQWxsKCkpXG4gICAgLm1hcChpbnN0YW5jZSA9PiBpbnN0YW5jZS5wcm9taXNlKVxuICAgIC5maWx0ZXIoQm9vbGVhbilcbiAgLy8gaGlnaGxpZ2h0LWVuZFxuXG4gIC8vIGhpZ2hsaWdodC1uZXh0LWxpbmVcbiAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpIC8vIGNvbnRyaXZlZCB3YXJuaW5nIC0gcmVtZW1iZXIgZXJyb3IgaGFuZGxpbmdcblxuICAvLyBhbGwgcHJvbWlzZXMgcmVzb2x2ZWQhIFJlbmRlciBhZ2FpblxuICAvLyBoaWdobGlnaHQtbmV4dC1saW5lXG4gIGNvbnN0IG91dHB1dCA9IHJlbmRlckFwcChlY29zeXN0ZW0pXG4gIGNvbnN0IHNuYXBzaG90ID0gZWNvc3lzdGVtLmRlaHlkcmF0ZSh7IGV4Y2x1ZGVGbGFnczogWyd1bnNlcmlhbGl6YWJsZSddIH0pXG5cbiAgZWNvc3lzdGVtLmRlc3Ryb3kodHJ1ZSlcblxuICByZXMuc2VuZChcXGBcbiAgICA8ZGl2IGlkPVwicm9vdFwiPlxcJHtvdXRwdXR9PC9kaXY+XG4gICAgPHNjcmlwdD5cbiAgICAgIHdpbmRvdy5fX1NOQVBTSE9UID0gXFwke0pTT04uc3RyaW5naWZ5KHNuYXBzaG90KX1cbiAgICA8L3NjcmlwdD5cbiAgICA8c2NyaXB0IHNyYz1cIi9teS9hcHAuanNcIj48L3NjcmlwdD5cbiAgXFxgKVxufVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwicHJlZmV0Y2hpbmdcIlxuICAgIH19PntgUHJlZmV0Y2hpbmdgfTwvaDM+XG4gICAgPHA+e2BZb3UgY2FuIGFsc28gXCJwcmVmZXRjaFwiIHNwZWNpZmljIGF0b21zIGJlZm9yZSByZW5kZXJpbmc6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGFzeW5jIGZ1bmN0aW9uIHJlbmRlclJvdXRlKHJlcSwgcmVzKSB7XG4gIGNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7XG4gICAgaWQ6ICdyb290JyxcbiAgICBzc3I6IHRydWUsXG4gIH0pXG5cbiAgYXdhaXQgcHJlZmV0Y2hBdG9tcyhlY29zeXN0ZW0pXG5cbiAgY29uc3Qgb3V0cHV0ID0gcmVuZGVyQXBwKGVjb3N5c3RlbSlcbiAgY29uc3Qgc25hcHNob3QgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKHsgZXhjbHVkZUZsYWdzOiBbJ3Vuc2VyaWFsaXphYmxlJ10gfSlcblxuICBlY29zeXN0ZW0uZGVzdHJveSh0cnVlKVxuXG4gIHJlcy5zZW5kKFxcYFxuICAgIDxkaXYgaWQ9XCJyb290XCI+XFwke291dHB1dH08L2Rpdj5cbiAgICA8c2NyaXB0PlxuICAgICAgd2luZG93Ll9fU05BUFNIT1QgPSBcXCR7SlNPTi5zdHJpbmdpZnkoc25hcHNob3QpfVxuICAgIDwvc2NyaXB0PlxuICAgIDxzY3JpcHQgc3JjPVwiL215L2FwcC5qc1wiPjwvc2NyaXB0PlxuICBcXGApXG59XG5cbmZ1bmN0aW9uIHByZWZldGNoQXRvbXMoZWNvc3lzdGVtKSB7XG4gIGNvbnN0IGZvb0luc3RhbmNlID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKGZvb0F0b20pXG4gIGNvbnN0IGJhckluc3RhbmNlID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKGJhckF0b20pXG5cbiAgcmV0dXJuIFByb21pc2UuYWxsKFtmb29JbnN0YW5jZS5wcm9taXNlLCBiYXJJbnN0YW5jZS5wcm9taXNlXSlcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm90aGVyLXRlY2huaXF1ZXNcIlxuICAgIH19PntgT3RoZXIgVGVjaG5pcXVlc2B9PC9oMz5cbiAgICA8cD57YFplZHV4IGdpdmVzIHlvdSB2ZXJ5IHRyYW5zcGFyZW50IGNvbnRyb2wgb3ZlciB5b3VyIHN0YXRlLiBUaGVyZSBhcmUgbWFueSB3YXlzIHlvdSBjYW4gdXNlIHRoaXMgdHJhbnNwYXJlbmN5IHRvIG9wdGltaXplIFNTUi5gfTwvcD5cbiAgICA8cD57YEZvciBleGFtcGxlLCBpdCdzIHBvc3NpYmxlIHRvIGFuYWx5emUgeW91ciBkZXBlbmRlbmN5IGdyYXBoIGFuZCBwcmVmZXRjaCBvbmx5IGhpZ2hseS1kZW1hbmRlZCBhdG9tcy5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgcmVuZGVyQXBwKGVjb3N5c3RlbSlcblxuY29uc3QgaW5zdGFuY2VzQnlXZWlnaHQgPSBPYmplY3QudmFsdWVzKGVjb3N5c3RlbS5maW5kQWxsKCkpXG4gIC5maWx0ZXIoaW5zdGFuY2UgPT4gaW5zdGFuY2UucHJvbWlzZSkgLy8gb25seSBjb21wYXJlIGluc3RhbmNlcyB3aXRoIHByb21pc2VzXG4gIC5zb3J0KFxuICAgIChpbnN0YW5jZUEsIGluc3RhbmNlQikgPT5cbiAgICAgIGVjb3N5c3RlbS5fZ3JhcGgubm9kZXNbaW5zdGFuY2VBLmlkXS53ZWlnaHQgLVxuICAgICAgZWNvc3lzdGVtLl9ncmFwaC5ub2Rlc1tpbnN0YW5jZUIuaWRdLndlaWdodFxuICApXG5cbi8vIGluc3RhbmNlcyB3aXRoIGxvd2VyIHdlaWdodCBhcmUgdHlwaWNhbGx5IHVzZWQgbW9yZTpcbmNvbnN0IG1vc3RVc2VkSW5zdGFuY2VzID0gaW5zdGFuY2VzQnlXZWlnaHQuc2xpY2UoXG4gIDAsXG4gIE1hdGguZmxvb3IoaW5zdGFuY2VzQnlXZWlnaHQubGVuZ3RoIC8gMilcbilcblxuLy8gd2FpdCBmb3IgaGFsZiBvZiBhbGwgdGhlIHN1c3BlbmRpbmcgYXRvbXMgKHRoZSBtb3N0LXVzZWQgaGFsZik6XG5hd2FpdCBQcm9taXNlLmFsbChtb3N0VXNlZEluc3RhbmNlcy5tYXAoaW5zdGFuY2UgPT4gaW5zdGFuY2UucHJvbWlzZSkpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YE1hbnkgb3RoZXIgdGVjaG5pcXVlcyBhcmUgcG9zc2libGUuIFNvbWUgaWRlYXM6YH08L3A+XG4gICAgPHVsPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgVXNpbmcgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHJlYWN0LXNzci1wcmVwYXNzYH08L2lubGluZUNvZGU+e2AgdG8gZHJpbGwgaW50byBuZXN0ZWQgc3VzcGVuc2UgYm91bmRhcmllc2B9PC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFByZWZldGNoaW5nIG9ubHkgYXRvbXMgd2l0aCBhdCBsZWFzdCBYIGRlcGVuZGVudHNgfTwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BVc2luZyBhIGZha2UgdXNlciB0byBwZXJpb2RpY2FsbHkgcmVuZGVyIHJvdXRlcyBkdXJpbmcgc2VydmVyIGRvd250aW1lLCBjYWNoaW5nIGxpc3RzIG9mIGF0b21zIHRoYXQgc2hvdWxkIGJlIHByZWZldGNoZWQgZm9yIHRoYXQgdHlwZSBvZiB1c2VyIG9uIHRoYXQgcm91dGUuYH08L2xpPlxuICAgIDwvdWw+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwiY2xpZW50LWh5ZHJhdGlvblwiXG4gICAgfX0+e2BDbGllbnQgSHlkcmF0aW9uYH08L2gyPlxuICAgIDxwPntgV2hlbiB5b3UgaGF2ZSBhIHNuYXBzaG90IG9mIGluaXRpYWwgc3RhdGUgb24gdGhlIHNlcnZlciwgeW91J2xsIHVzdWFsbHkgc2VuZCBpdCB0byB0aGUgY2xpZW50IGJ5IGUuZy4gZW1iZWRkaW5nIGl0IGluIHRoZSBwYWdlJ3MgSFRNTCBvdXRwdXQ6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YHJlcy5zZW5kKFxcYFxuICA8ZGl2IGlkPVwicm9vdFwiPlxcJHtvdXRwdXR9PC9kaXY+XG4gIDxzY3JpcHQ+XG4gICAgd2luZG93Ll9fU05BUFNIT1QgPSBcXCR7SlNPTi5zdHJpbmdpZnkoc25hcHNob3QpfVxuICA8L3NjcmlwdD5cbiAgPHNjcmlwdCBzcmM9XCIvbXkvYXBwLmpzXCI+PC9zY3JpcHQ+XG5cXGApXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YE5vdyB0aGUgY2xpZW50IGFwcCBjYW4gcGFzcyB0aGF0IHRvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5oeWRyYXRlKClgfTwvaW5saW5lQ29kZT57YDpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzeFwiXG4gICAgICB9fT57YGltcG9ydCB7IGNyZWF0ZUVjb3N5c3RlbSwgRWNvc3lzdGVtUHJvdmlkZXIgfSBmcm9tICdAemVkdXgvcmVhY3QnXG5cbmNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7IGlkOiAncm9vdCcgfSlcbmVjb3N5c3RlbS5oeWRyYXRlKHdpbmRvdy5fX1NOQVBTSE9UKVxuXG5mdW5jdGlvbiBBcHAoKSB7XG4gIHJldHVybiAoXG4gICAgPEVjb3N5c3RlbVByb3ZpZGVyIGVjb3N5c3RlbT17ZWNvc3lzdGVtfT5cbiAgICAgIDxSb3V0ZXMgLz5cbiAgICA8L0Vjb3N5c3RlbVByb3ZpZGVyPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YEFsbCBhdG9tIGluc3RhbmNlcyBjcmVhdGVkIGJ5IHJlbmRlcmluZyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2A8Um91dGVzIC8+YH08L2lubGluZUNvZGU+e2Agd2lsbCBub3cgaGF2ZSB0aGVpciBpbml0aWFsIHN0YXRlIGh5ZHJhdGVkIGZyb20gdGhlIHNlcnZlciBzbmFwc2hvdC5gfTwvcD5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJyZWNhcFwiXG4gICAgfX0+e2BSZWNhcGB9PC9oMj5cbiAgICA8dWw+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BVc2UgdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2Bzc3JgfTwvaW5saW5lQ29kZT57YCBlY29zeXN0ZW0gY29uZmlnIG9wdGlvbiB0byB0dXJuIG9uIFNTUiBtb2RlLCBwcmV2ZW50aW5nIGVmZmVjdHMgZnJvbSBydW5uaW5nLmB9PC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YERlaHlkcmF0ZSB0aGUgc3RhdGUgb24gdGhlIHNlcnZlciB3aXRoIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2BlY29zeXN0ZW0uZGVoeWRyYXRlKClgfTwvaW5saW5lQ29kZT57YC5gfTwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BUaGVyZSBhcmUgbWFueSB3YXlzIHRvIHByZWZldGNoIHF1ZXJ5IGF0b21zLiBBd2FpdCBtYW55IHByb21pc2VzIGJ5IGdyYWJiaW5nIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgLnByb21pc2VgfTwvaW5saW5lQ29kZT57YCBvZmYgb2YgZWFjaCBpbnN0YW5jZS5gfTwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BIeWRyYXRlIHRoZSBzdGF0ZSBvbiB0aGUgY2xpZW50IHdpdGggYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YGVjb3N5c3RlbS5oeWRyYXRlKClgfTwvaW5saW5lQ29kZT57YC5gfTwvbGk+XG4gICAgPC91bD5cbiAgICA8L01EWExheW91dD47XG59XG47XG5NRFhDb250ZW50LmlzTURYQ29tcG9uZW50ID0gdHJ1ZTtcbiJdLCJuYW1lcyI6WyJSZWFjdCIsIm1keCIsImZyb250TWF0dGVyIiwiaWQiLCJ0aXRsZSIsImNvbnRlbnRUaXRsZSIsInVuZGVmaW5lZCIsIm1ldGFkYXRhIiwiYXNzZXRzIiwidG9jIiwidmFsdWUiLCJsZXZlbCIsImxheW91dFByb3BzIiwiTURYTGF5b3V0IiwiTURYQ29udGVudCIsImNvbXBvbmVudHMiLCJwcm9wcyIsImlzTURYQ29tcG9uZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8093\n')}}]);