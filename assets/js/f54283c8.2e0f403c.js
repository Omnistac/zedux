"use strict";(self.webpackChunkzedux_docs=self.webpackChunkzedux_docs||[]).push([[5006],{7739:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "assets": function() { return /* binding */ assets; },\n/* harmony export */   "contentTitle": function() { return /* binding */ contentTitle; },\n/* harmony export */   "default": function() { return /* binding */ MDXContent; },\n/* harmony export */   "frontMatter": function() { return /* binding */ frontMatter; },\n/* harmony export */   "metadata": function() { return /* binding */ metadata; },\n/* harmony export */   "toc": function() { return /* binding */ toc; }\n/* harmony export */ });\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7462);\n/* harmony import */ var _Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3366);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7294);\n/* harmony import */ var _mdx_js_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3905);\nvar _excluded=["components"];/* @jsxRuntime classic */ /* @jsx mdx */ /* @jsxFrag React.Fragment */var frontMatter={id:\'persistence\',title:\'Persistence\'};var contentTitle=undefined;var metadata={"unversionedId":"advanced/persistence","id":"advanced/persistence","title":"Persistence","description":"There are many ways to persist and restore state \\"snapshots\\" in Zedux. It can be done at the atom instance, ecosystem, or plugin level.","source":"@site/docs/advanced/persistence.mdx","sourceDirName":"advanced","slug":"/advanced/persistence","permalink":"/zedux/docs/advanced/persistence","draft":false,"editUrl":"https://github.com/Omnistac/zedux/tree/master/docs/advanced/persistence.mdx","tags":[],"version":"current","frontMatter":{"id":"persistence","title":"Persistence"},"sidebar":"react","previous":{"title":"Complex Params","permalink":"/zedux/docs/advanced/complex-params"},"next":{"title":"SSR","permalink":"/zedux/docs/advanced/ssr"}};var assets={};var toc=[{value:\'Single Atom\',id:\'single-atom\',level:2},{value:\'Ecosystem Persistence\',id:\'ecosystem-persistence\',level:2},{value:\'<code>ecosystem.dehydrate()</code>\',id:\'ecosystemdehydrate\',level:3},{value:\'Skipping Atoms\',id:\'skipping-atoms\',level:3},{value:\'<code>dehydrate</code> Atom Config\',id:\'dehydrate-atom-config\',level:3},{value:\'<code>ecosystem.hydrate()</code>\',id:\'ecosystemhydrate\',level:3},{value:\'<code>hydrate</code> Atom Config\',id:\'hydrate-atom-config\',level:3},{value:\'Store Hydration\',id:\'store-hydration\',level:2},{value:\'<code>manualHydration</code>\',id:\'manualhydration\',level:2},{value:\'Hydration consumption\',id:\'hydration-consumption\',level:2},{value:\'Reactivity Via Plugins\',id:\'reactivity-via-plugins\',level:2},{value:\'Recap\',id:\'recap\',level:2},{value:\'Next Steps\',id:\'next-steps\',level:2}];var layoutProps={toc:toc};var MDXLayout="wrapper";function MDXContent(_ref){var components=_ref.components,props=(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_objectWithoutPropertiesLoose_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .Z)(_ref,_excluded);return (0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)(MDXLayout,(0,_Users_joshuaclaunch_code_oss_zedux_docs_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .Z)({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"There are many ways to persist and restore state \\"snapshots\\" in Zedux. It can be done at the atom instance, ecosystem, or plugin level."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"title":"you will learn:","type":"tip"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"admonition"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"How to persist and restore a single atom instance\'s state"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"How to dehydrate and rehydrate an entire ecosystem"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"How to transform non-serializable atom values"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"One of many ways to accomplish this with plugins"))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"single-atom"},"Single Atom"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Let\'s start simple. We\'ll use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"localStorage")," for these examples, but you can use whatever means of storage you want."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"To persist the state of a single atom, we could use a separate atom to handle the persist/restore functionality."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Here\'s an example using a separate ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"localStorageAtom")," that we give a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"key")," param, creating a different ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"localStorageAtom")," instance for every localStorage key we want to persist data to/from:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=persistence/separate-atom resultVar=Username","live":true,"ecosystemId":"persistence/separate-atom","resultVar":"Username"},"const localStorageAtom = atom(\'localStorage\', (key: string) => {\\n  const val = localStorage.getItem(key)\\n\\n  // we\'re using the function overload of `injectStore` to prevent JSON.parse\\n  // from running unnecesarily on reevaluations:\\n  const store = injectStore(() =>\\n    createStore(null, val ? JSON.parse(val) : undefined)\\n  )\\n\\n  const update = (newVal: any) => {\\n    store.setState(newVal)\\n    localStorage.setItem(key, JSON.stringify(newVal))\\n  }\\n\\n  return api(store).setExports({ update })\\n})\\n\\n// this atom\'s state now persists across page reloads:\\nconst usernameAtom = atom(\'username\', () => {\\n  const [storedName, { update }] = injectAtomState(localStorageAtom, [\\n    \'username1\', // <- the localStorage key\\n  ])\\n\\n  return api(storedName || \'\').setExports({ update })\\n})\\n\\nfunction Username() {\\n  const [state, { update }] = useAtomState(usernameAtom)\\n\\n  return (\\n    <div>\\n      <input onChange={event => update(event.target.value)} value={state} />\\n      <button onClick={() => location.reload()}>Refresh page</button>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"We could also use an injector."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=persistence/injector resultVar=Username","live":true,"ecosystemId":"persistence/injector","resultVar":"Username"},"const injectLocalStorage = (key: string, defaultVal: any) => {\\n  const val = localStorage.getItem(key)\\n\\n  // we\'re using the function overload of `injectStore` to prevent JSON.parse\\n  // from running unnecesarily on reevaluations:\\n  const store = injectStore(() =>\\n    createStore(null, val ? JSON.parse(val) : defaultVal)\\n  )\\n\\n  const update = (newVal: any) => {\\n    store.setState(newVal)\\n    localStorage.setItem(key, JSON.stringify(newVal))\\n  }\\n\\n  return [store, update] as const\\n}\\n\\n// this atom\'s state now persists across page reloads:\\nconst usernameAtom = atom(\'username\', () => {\\n  const [store, update] = injectLocalStorage(\'username2\', \'\')\\n\\n  return api(store).setExports({ update })\\n})\\n\\nfunction Username() {\\n  const [state, { update }] = useAtomState(usernameAtom)\\n\\n  return (\\n    <div>\\n      <input onChange={event => update(event.target.value)} value={state} />\\n      <button onClick={() => location.reload()}>Refresh page</button>\\n    </div>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Yep, these approaches are very similar."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"ecosystem-persistence"},"Ecosystem Persistence"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"There are a few ways to get a state snapshot of an entire ecosystem. For example, you could call ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.inspectInstances()")," and map each instance to a value yourself. But ecosystems have a method that\'s specifically designed for persistence:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"ecosystemdehydrate"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"ecosystem.dehydrate()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can get a snapshot of the state of all atoms in an ecosystem with ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate({ transform: false })")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { atom, createEcosystem } from \'@zedux/react\'\\n\\nconst exampleAtom = atom(\'example\', () => \'Hello, world!\')\\nconst ecosystem = createEcosystem({ id: \'root\' })\\necosystem.getInstance(exampleAtom)\\n\\nconst snapshot = ecosystem.dehydrate({ transform: false })\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This may be all you need. However, passing ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"{ transform: false }")," makes ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," very \\"dumb\\" - it doesn\'t do anything special to transform the state, it just returns it as-is. Since atoms can hold anything, you may have a situation where you\'re storing non-serializable values (namely functions) in atoms. Data types from Immutable.js, for example, require an extra step to serialize/deserialize values."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"For these atoms you have two options:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Skip the non-serializable atom."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Transform the atom\'s value to something that can be serialized.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"First things first:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"skipping-atoms"},"Skipping Atoms"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"You can blacklist atoms you don\'t want to dehydrate by passing ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"exclude")," and/or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"excludeFlags")," options:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=excludes-example resultVar=snapshot","live":true,"ecosystemId":"excludes-example","resultVar":"snapshot"},"const skippedAtom = atom(\'skipped\', \':(\', { flags: [\'no-persist\'] })\\nconst alsoSkippedAtom = atom(\'alsoSkipped\', \':O\')\\nconst persistedAtom = atom(\'persisted\', \':)\')\\n\\nconst ecosystem = createEcosystem({ id: \'exludes-example\' })\\necosystem.getInstance(skippedAtom)\\necosystem.getInstance(alsoSkippedAtom)\\necosystem.getInstance(persistedAtom)\\n\\nconst snapshot = ecosystem.dehydrate({\\n  exclude: [alsoSkippedAtom],\\n  excludeFlags: [\'no-persist\'],\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Similarly, you can specify a whitelist of atoms you want to be dehydrated by passing ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"include")," and/or ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"includeFlags")," options:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=includes-example resultVar=snapshot","live":true,"ecosystemId":"includes-example","resultVar":"snapshot"},"const skippedAtom = atom(\'skipped\', \':(\')\\nconst persistedAtom = atom(\'persisted\', \':)\', { flags: [\'persist\'] })\\nconst alsoPersistedAtom = atom(\'alsoPersisted\', \':D\')\\n\\nconst ecosystem = createEcosystem({ id: \'includes-example\' })\\necosystem.getInstance(skippedAtom)\\necosystem.getInstance(persistedAtom)\\necosystem.getInstance(alsoPersistedAtom)\\n\\nconst snapshot = ecosystem.dehydrate({\\n  include: [alsoPersistedAtom],\\n  includeFlags: [\'persist\'],\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Excludes take precedence over includes if you pass both."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now for transforming values:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"dehydrate-atom-config"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"dehydrate")," Atom Config"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Atoms can be configured with a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"dehydrate")," config option:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const exampleAtom = atom(\'example\', () => initialState, {\\n  dehydrate: state => transform(state),\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"To enable value transforming, simply omit ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"{ transform: false }")," in the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," call. Transforms are enabled by default."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," returns an object mapping atom instance keyHashes to their current value. But with transforms enabled, ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},".dehydrate()")," does a little more magic."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," calls the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"dehydrate")," atom config option (when specified) to transform the state of individual atom instances."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Here\'s an example of an atom whose value is a JS Map, which can\'t be directly stringified. We use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"dehydrate")," atom config option to tell Zedux how to transform this atom instance\'s state to a serializable value for dehydration:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=persistence/dehydrate resultVar=Dehydrator","live":true,"ecosystemId":"persistence/dehydrate","resultVar":"Dehydrator"},"const transformingAtom = atom(\\n  \'transforming\',\\n  () => {\\n    const store = injectStore(new Map([[\'counter\', 0]]))\\n\\n    injectEffect(() => {\\n      const handle = setInterval(() => {\\n        store.setState(state =>\\n          new Map(state).set(\'counter\', state.get(\'counter\') + 1)\\n        )\\n      }, 1000)\\n\\n      return () => clearInterval(handle)\\n    })\\n\\n    return store\\n  },\\n  // turn the map into a JS object for serialization:\\n  { dehydrate: state => Object.fromEntries(state.entries()) }\\n)\\n\\nfunction Dehydrator() {\\n  useAtomValue(transformingAtom) // just to instantiate it for this example\\n  const ecosystem = useEcosystem()\\n  const [dehydration, setDehydration] = useState()\\n\\n  return (\\n    <>\\n      <pre>{dehydration}</pre>\\n      <button\\n        onClick={() =>\\n          setDehydration(JSON.stringify(ecosystem.dehydrate(), null, 2))\\n        }\\n      >\\n        Dehydrate!\\n      </button>\\n    </>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now calls to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," call the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"dehydrate")," atom config function to transform the state of all instances of the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"transforming")," atom."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"ecosystemhydrate"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"ecosystem.hydrate()")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The inverse of ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()"),". After you get a state snapshot, use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.hydrate()")," to restore it."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=hydrate-example resultVar=output","live":true,"ecosystemId":"hydrate-example","resultVar":"output"},"const fooAtom = atom(\'foo\', 1)\\nconst barAtom = atom(\'bar\', 2)\\n\\nconst ecosystem = createEcosystem({ id: \'hydrate-example\' })\\nconst fooInstance = ecosystem.getInstance(fooAtom)\\nconst barInstance = ecosystem.getInstance(barAtom)\\n\\nconst snapshot1 = ecosystem.dehydrate()\\n\\nfooInstance.setState(3) // change foo\'s state from 1 to 3\\nconst snapshot2 = ecosystem.dehydrate()\\n\\necosystem.hydrate(snapshot1) // restore the initial snapshot\\nconst snapshot3 = ecosystem.dehydrate()\\n\\nconst output = { snapshot1, snapshot2, snapshot3 }\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"After hydration, any newly-initialized atom instances that have a matching key in the hydrated snapshot will receive their hydrated state after initializing."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=atom-hydrate-example resultVar=snapshot","live":true,"ecosystemId":"atom-hydrate-example","resultVar":"snapshot"},"const hydrateMe = atom(\'hydrateMe\', (id: number) => {\\n  return injectStore(\'non-hydrated state\')\\n})\\n\\nconst ecosystem = createEcosystem({ id: \'atom-hydrate-example\' })\\necosystem.hydrate({ \'hydrateMe-[0]\': \'hydrated state\' })\\n\\n// these instances are created after hydration:\\necosystem.getInstance(hydrateMe, [0])\\necosystem.getInstance(hydrateMe, [1])\\n\\nconst snapshot = ecosystem.dehydrate()\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Hydration will also immediately update any existing atom instances with keyHashes in the snapshot. Pass ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"{ retroactive: false }")," as the second parameter to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.hydrate()")," to disable this. With this option, only instances that are created after hydration will have their state hydrated."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live ecosystemId=no-retroactive-example resultVar=snapshot","live":true,"ecosystemId":"no-retroactive-example","resultVar":"snapshot"},"const hydrateMe = atom(\'hydrateMe\', (id: number) => {\\n  return injectStore(\'non-hydrated state\')\\n})\\n\\nconst ecosystem = createEcosystem({ id: \'no-retroactive-example\' })\\n\\n// these instances are created before hydration, so won\'t be updated:\\necosystem.getInstance(hydrateMe, [0])\\necosystem.getInstance(hydrateMe, [1])\\n\\necosystem.hydrate({ \'hydrateMe-[0]\': \'hydrated state\' }, { retroactive: false })\\n\\nconst snapshot = ecosystem.dehydrate()\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h3",{"id":"hydrate-atom-config"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h3"},"hydrate")," Atom Config"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Atoms can be configured with a ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"hydrate")," transformation function:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const exampleAtom = atom(\'example\', initialState, {\\n  hydrate: rawVal => transform(rawVal),\\n})\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This can be used to transform dehydrated values back to non-serializable form. Let\'s return to our JS Map example:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-tsx","metastring":"live ecosystemId=persistence/hydrate resultVar=Dehydrator","live":true,"ecosystemId":"persistence/hydrate","resultVar":"Dehydrator"},"const transformingAtom = atom(\\n  \'transforming\',\\n  () => {\\n    const store = injectStore(new Map([[\'counter\', 0]]))\\n\\n    injectEffect(() => {\\n      const handle = setInterval(() => {\\n        store.setState(state =>\\n          new Map(state).set(\'counter\', state.get(\'counter\') + 1)\\n        )\\n      }, 1000)\\n\\n      return () => clearInterval(handle)\\n    })\\n\\n    return store\\n  },\\n  // transform the map to and from a JS object:\\n  {\\n    dehydrate: state => Object.fromEntries(state.entries()),\\n    hydrate: rawState => new Map(Object.entries(rawState)),\\n  }\\n)\\n\\nfunction Counter() {\\n  const map = useAtomValue(transformingAtom)\\n\\n  return <div>Counter: {map.get(\'counter\')}</div>\\n}\\n\\nfunction Dehydrator() {\\n  const ecosystem = useEcosystem()\\n  const [dehydration, setDehydration] = useState()\\n\\n  return (\\n    <>\\n      <Counter />\\n      <pre>{dehydration}</pre>\\n      <button\\n        onClick={() =>\\n          setDehydration(JSON.stringify(ecosystem.dehydrate(), null, 2))\\n        }\\n      >\\n        Dehydrate!\\n      </button>\\n      {dehydration && (\\n        <button onClick={() => ecosystem.hydrate(JSON.parse(dehydration))}>\\n          Hydrate!\\n        </button>\\n      )}\\n    </>\\n  )\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"store-hydration"},"Store Hydration"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The default hydration flow hydrates the store after the atom instance\'s initial evaluation ends. This means that if your state factory\'s main store was injected without ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"subscribe: false"),", it will immediately trigger a second evaluation."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This is usually fine. But you can change this behavior in 2 steps:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ol",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ol"},"Hydrate the injected store\'s state yourself."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ol"},"Tell Zedux not to automatically hydrate this atom.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"To hydrate the store\'s state, use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"hydrate")," option of ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/injectors/injectStore"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},"injectStore")),":"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectStore(defaultValue, { hydrate: true })\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The store\'s state will be set to the hydration matching the current atom instance, after passing it to the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"hydrate")," atom config option (if any) to transform the value. If there is no hydration for the current atom instance, passing ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"{ hydrate: true }")," does nothing."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live resultVar=output","live":true,"resultVar":"output"},"const myAtom = atom(\\n  \'myKey\',\\n  () => {\\n    return injectStore(\'default\', { hydrate: true })\\n  },\\n  { hydrate: hydration => `${hydration} and transformed!` }\\n)\\n\\nconst ecosystem = createEcosystem({ id: \'hydrate-flow-example\' })\\necosystem.hydrate({ myKey: \'hydrated\' })\\n\\nconst output = ecosystem.get(myAtom)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"When ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectStore()"),"\'s function overload is used, the hydration will be passed to your ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"storeFactory")," function. It\'s up to you to use the hydration to set your store\'s initial state."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const store = injectStore(\\n  hydration => createStore(null, hydration ?? defaultValue),\\n  { hydrate: true }\\n)\\n// (this specific example is exactly equivalent to:)\\nconst store = injectStore(defaultValue, { hydrate: true })\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"If there is no hydration, this parameter will be undefined."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now for the 2nd step:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"manualhydration"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"h2"},"manualHydration")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Set this atom config option to ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"true")," to prevent Zedux from automatically hydrating instances of the atom. You\'ll usually want to pair this with passing ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"hydrate: true")," to a single ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"injectStore")," in the atom\'s state factory."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const exampleAtom = atom(\\n  \'example\',\\n  () => {\\n    const store = injectStore(defaultValue, { hydrate: true })\\n    const internalStore = injectStore() // can inject other, non-hydrated stores\\n\\n    return store // Zedux won\'t hydrate this store\'s state after init now\\n  },\\n  {\\n    manualHydration: true, // prevent automatic hydration\\n  }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"hydration-consumption"},"Hydration consumption"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"When Zedux hydrates an atom instance, it deletes the hydration from the ecosystem. This makes it easy to see which hydrations have been \\"consumed\\" by simply accessing the ecosystem\'s ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"../api/classes/Ecosystem#hydration"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"a"},".hydration"))," property:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts","metastring":"live resultVar=output","live":true,"resultVar":"output"},"const fooAtom = atom(\'foo\', 1)\\n\\nconst ecosystem = createEcosystem({ id: \'hydration-consumption-example\' })\\necosystem.hydrate({ foo: 2, bar: 3 })\\n\\n// \\"consume\\" the hydration for `foo`:\\nconst fooInstance = ecosystem.getInstance(fooAtom)\\n\\nconst output = {\\n  fooValue: fooInstance.getState(),\\n  unusedHydrations: ecosystem.hydration,\\n}\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("admonition",{"type":"note"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",{parentName:"admonition"},"Hydrations will also be consumed for retroactively-hydrated atom instances.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"This also means that if an atom instance is destroyed and recreated, the new atom instance will not be hydrated again. This is usually the desired behavior, but if you do need this you can accomplish it by \\"rehydrating\\" the ecosystem before the instance is destroyed:"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"const rehydratingAtom = atom(\\n  \'rehydrating\',\\n  (...params: any[]) => {\\n    const { ecosystem } = injectAtomGetters()\\n    const store = injectStore(\'default state\', { hydrate: true })\\n    const hydrationRef = injectRef(store.getState()) // capture the hydrated state\\n\\n    injectEffect(() => {\\n      // this effect does nothing but setup cleanup\\n      return () => {\\n        // one way to get the current atom instance\'s keyHash:\\n        const instance = ecosystem.getInstance(rehydratingAtom, [...params])\\n        // rehydrate!\\n        ecosystem.hydrate({ [instance.keyHash]: hydrationRef.current })\\n      }\\n    }, []) // [] - cleanup will only run on instance destruction\\n\\n    return store\\n  },\\n  { ttl: 0 }\\n)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"reactivity-via-plugins"},"Reactivity Via Plugins"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"The ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"localStorage")," single atom examples we gave at the beginning of this page were beautifully reactive - they would persist the atom\'s state immediately on state change. None of our ecosystem examples do that. We have to manually call ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"ecosystem.dehydrate()")," e.g. in response to a button press or on an interval."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"By default, ecosystems don\'t receive any kind of update when individual atom instances change state. This is by design, for performance reasons. However, it is possible to turn this behavior on with plugins."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Just turn on the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"p"},"stateChanged")," mod."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("pre",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("code",{parentName:"pre","className":"language-ts"},"import { createEcosystem, ZeduxPlugin } from \'@zedux/react\'\\n\\nconst plugin = new ZeduxPlugin({\\n  initialMods: [\'stateChanged\'],\\n\\n  registerEcosystem: ecosystem => {\\n    const subscription = ecosystem.modsMessageBus.subscribe({\\n      effects: ({ action }) => {\\n        if (action.type !== ZeduxPlugin.actions.stateChanged.type) return\\n\\n        const snapshot = ecosystem.dehydrate({ includeFlags: [\'persist\'] })\\n        localStorage.setItem(\'snapshot\', snapshot)\\n      },\\n    })\\n\\n    return () => subscription.unsubscribe()\\n  },\\n})\\n\\nconst ecosystem = createEcosystem({ id: \'root\' })\\necosystem.registerPlugin(plugin)\\n")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"recap"},"Recap"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",null,(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ecosystem.dehydrate()")," to get a state snapshot of all or some of the atoms in the ecosystem.",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"li"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"dehydrate")," atom config option to transform the state of individual atoms to a serializable or shortened form."))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"ecosystem.hydrate()")," to restore a state snapshot.",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("ul",{parentName:"li"},(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"hydrate")," atom config option to transform hydrations for individual atoms."))),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"The ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"{ hydrate: true }")," ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"injectStore")," option sets the store\'s initial state to the hydrated value."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"manualHydration")," atom config option to prevent Zedux from automatically hydrating individual atoms."),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("li",{parentName:"ul"},"Use a plugin with the ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("inlineCode",{parentName:"li"},"stateChanged")," mod to reactively persist snapshots.")),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("h2",{"id":"next-steps"},"Next Steps"),(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("p",null,"Now we know the basics of persistence. Let\'s use these tools to implement ",(0,_mdx_js_react__WEBPACK_IMPORTED_MODULE_1__/* .mdx */ .kt)("a",{parentName:"p","href":"ssr"},"SSR"),"."));};MDXContent.isMDXComponent=true;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzczOS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OzZCQUVBLDBCQUNBLGVBQ0EsNkJBTU8sR0FBTUUsWUFBVyxDQUFHLENBQzFCQyxFQUFFLENBQUUsYUFBYSxDQUNqQkMsS0FBSyxDQUFFLGFBQ1IsQ0FBQyxDQUNNLEdBQU1DLGFBQVksQ0FBR0MsU0FBUyxDQUM5QixHQUFNQyxTQUFRLENBQUcsQ0FDdEIsZUFBZSxDQUFFLHNCQUFzQixDQUN2QyxJQUFJLENBQUUsc0JBQXNCLENBQzVCLE9BQU8sQ0FBRSxhQUFhLENBQ3RCLGFBQWEsQ0FBRSwySUFBMkksQ0FDMUosUUFBUSxDQUFFLHFDQUFxQyxDQUMvQyxlQUFlLENBQUUsVUFBVSxDQUMzQixNQUFNLENBQUUsdUJBQXVCLENBQy9CLFdBQVcsQ0FBRSxrQ0FBa0MsQ0FDL0MsT0FBTyxDQUFFLEtBQUssQ0FDZCxTQUFTLENBQUUsNkVBQTZFLENBQ3hGLE1BQU0sQ0FBRSxFQUFFLENBQ1YsU0FBUyxDQUFFLFNBQVMsQ0FDcEIsYUFBYSxDQUFFLENBQ2IsSUFBSSxDQUFFLGFBQWEsQ0FDbkIsT0FBTyxDQUFFLGFBQ1gsQ0FBQyxDQUNELFNBQVMsQ0FBRSxPQUFPLENBQ2xCLFVBQVUsQ0FBRSxDQUNWLE9BQU8sQ0FBRSxnQkFBZ0IsQ0FDekIsV0FBVyxDQUFFLHFDQUNmLENBQUMsQ0FDRCxNQUFNLENBQUUsQ0FDTixPQUFPLENBQUUsS0FBSyxDQUNkLFdBQVcsQ0FBRSwwQkFDZixDQUNGLENBQUMsQ0FDTSxHQUFNQyxPQUFNLENBQUcsQ0FFdEIsQ0FBQyxDQUdNLEdBQU1DLElBQUcsQ0FBRyxDQUFDLENBQ2xCQyxLQUFLLENBQUUsYUFBYSxDQUNwQlAsRUFBRSxDQUFFLGFBQWEsQ0FDakJRLEtBQUssQ0FBRSxDQUNULENBQUMsQ0FBRSxDQUNERCxLQUFLLENBQUUsdUJBQXVCLENBQzlCUCxFQUFFLENBQUUsdUJBQXVCLENBQzNCUSxLQUFLLENBQUUsQ0FDVCxDQUFDLENBQUUsQ0FDREQsS0FBSyxDQUFFLG9DQUFvQyxDQUMzQ1AsRUFBRSxDQUFFLG9CQUFvQixDQUN4QlEsS0FBSyxDQUFFLENBQ1QsQ0FBQyxDQUFFLENBQ0RELEtBQUssQ0FBRSxnQkFBZ0IsQ0FDdkJQLEVBQUUsQ0FBRSxnQkFBZ0IsQ0FDcEJRLEtBQUssQ0FBRSxDQUNULENBQUMsQ0FBRSxDQUNERCxLQUFLLENBQUUsb0NBQW9DLENBQzNDUCxFQUFFLENBQUUsdUJBQXVCLENBQzNCUSxLQUFLLENBQUUsQ0FDVCxDQUFDLENBQUUsQ0FDREQsS0FBSyxDQUFFLGtDQUFrQyxDQUN6Q1AsRUFBRSxDQUFFLGtCQUFrQixDQUN0QlEsS0FBSyxDQUFFLENBQ1QsQ0FBQyxDQUFFLENBQ0RELEtBQUssQ0FBRSxrQ0FBa0MsQ0FDekNQLEVBQUUsQ0FBRSxxQkFBcUIsQ0FDekJRLEtBQUssQ0FBRSxDQUNULENBQUMsQ0FBRSxDQUNERCxLQUFLLENBQUUsaUJBQWlCLENBQ3hCUCxFQUFFLENBQUUsaUJBQWlCLENBQ3JCUSxLQUFLLENBQUUsQ0FDVCxDQUFDLENBQUUsQ0FDREQsS0FBSyxDQUFFLDhCQUE4QixDQUNyQ1AsRUFBRSxDQUFFLGlCQUFpQixDQUNyQlEsS0FBSyxDQUFFLENBQ1QsQ0FBQyxDQUFFLENBQ0RELEtBQUssQ0FBRSx1QkFBdUIsQ0FDOUJQLEVBQUUsQ0FBRSx1QkFBdUIsQ0FDM0JRLEtBQUssQ0FBRSxDQUNULENBQUMsQ0FBRSxDQUNERCxLQUFLLENBQUUsd0JBQXdCLENBQy9CUCxFQUFFLENBQUUsd0JBQXdCLENBQzVCUSxLQUFLLENBQUUsQ0FDVCxDQUFDLENBQUUsQ0FDREQsS0FBSyxDQUFFLE9BQU8sQ0FDZFAsRUFBRSxDQUFFLE9BQU8sQ0FDWFEsS0FBSyxDQUFFLENBQ1QsQ0FBQyxDQUFFLENBQ0RELEtBQUssQ0FBRSxZQUFZLENBQ25CUCxFQUFFLENBQUUsWUFBWSxDQUNoQlEsS0FBSyxDQUFFLENBQ1QsQ0FBQyxDQUFDLENBRUYsR0FBTUMsWUFBVyxDQUFHLENBQ2xCSCxHQUFHLENBQUhBLEdBQ0YsQ0FBQyxDQUNELEdBQU1JLFVBQVMsQ0FBRyxTQUFTLENBQ1osUUFBU0MsV0FBVSxNQUcvQixJQUZEQyxXQUFVLE1BQVZBLFVBQVUsQ0FDUEMsS0FBSyxzTEFFUixNQUFPLDhEQUFDLFNBQVMsb0pBQUtKLFdBQVcsQ0FBTUksS0FBSyxFQUFFLFVBQVUsQ0FBRUQsVUFBVyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEdBRXZGLGtOQUFrSixDQUNsSiwyRUFDRSxPQUFPLENBQUUsaUJBQWlCLENBQzFCLE1BQU0sQ0FBRSxLQUFLLEVBQ1osbUVBQUksVUFBVSxDQUFDLFlBQVksRUFDMUIsbUVBQUksVUFBVSxDQUFDLElBQUksOERBQW1FLENBQ3RGLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLHVEQUE0RCxDQUMvRSxtRUFBSSxVQUFVLENBQUMsSUFBSSxrREFBdUQsQ0FDMUUsbUVBQUksVUFBVSxDQUFDLElBQUkscURBQTBELENBQzFFLENBQWEsQ0FDcEIsbUVBQ0UsSUFBSSxDQUFFLGFBQWEsZ0JBQ0UsQ0FDdkIsdUdBQXFDLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLGlCQUE4Qiw0RUFBZ0YsQ0FDN0sseUxBQTJILENBQzNILDRHQUEwQywyRUFBWSxVQUFVLENBQUMsR0FBRyxxQkFBa0Msb0JBQW9CLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLFFBQXFCLGlDQUFpQywyRUFBWSxVQUFVLENBQUMsR0FBRyxxQkFBa0MseUVBQTZFLENBQ25WLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxjQUFjLENBQzNCLFlBQVksQ0FBRSwrREFBK0QsQ0FDN0UsTUFBTSxDQUFFLElBQUksQ0FDWixhQUFhLENBQUUsMkJBQTJCLENBQzFDLFdBQVcsQ0FBRSxVQUFVLDRqQ0FxQ3RCLENBQU0sQ0FDWCx1R0FBeUMsQ0FDekMsd0VBQUsscUVBQU0sVUFBVSxDQUFDLEtBQUssQ0FDdkIsV0FBVyxDQUFFLGNBQWMsQ0FDM0IsWUFBWSxDQUFFLDBEQUEwRCxDQUN4RSxNQUFNLENBQUUsSUFBSSxDQUNaLGFBQWEsQ0FBRSxzQkFBc0IsQ0FDckMsV0FBVyxDQUFFLFVBQVUsMCtCQW1DdEIsQ0FBTSxDQUNYLGdIQUFrRCxDQUNsRCxtRUFDRSxJQUFJLENBQUUsdUJBQXVCLDBCQUNFLENBQ2pDLDBLQUF3RywyRUFBWSxVQUFVLENBQUMsR0FBRyxpQ0FBOEMsMEhBQThILENBQzlTLG1FQUNFLElBQUksQ0FBRSxvQkFBb0IsRUFDekIsMkVBQVksVUFBVSxDQUFDLElBQUksMEJBQXVDLENBQUssQ0FDMUUsK0lBQTZFLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLDhDQUEyRCxDQUFJLENBQ3RLLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLDhRQVF6QixDQUFNLENBQ1gsb0hBQWtELDJFQUFZLFVBQVUsQ0FBQyxHQUFHLHlCQUFzQyxXQUFXLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLDBCQUF1Qyx5VUFBMlUsQ0FDemdCLDhHQUFnRCxDQUNoRCx1RUFDRSxtRUFBSSxVQUFVLENBQUMsSUFBSSxvQ0FBeUMsQ0FDNUQsbUVBQUksVUFBVSxDQUFDLElBQUksb0VBQXlFLENBQ3pGLENBQ0wsNEZBQThCLENBQzlCLG1FQUNFLElBQUksQ0FBRSxnQkFBZ0IsbUJBQ0UsQ0FDMUIsd0lBQXNFLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLFlBQXlCLFlBQVksMkVBQVksVUFBVSxDQUFDLEdBQUcsaUJBQThCLGFBQWlCLENBQzlNLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLENBQzFCLFlBQVksQ0FBRSxzREFBc0QsQ0FDcEUsTUFBTSxDQUFFLElBQUksQ0FDWixhQUFhLENBQUUsa0JBQWtCLENBQ2pDLFdBQVcsQ0FBRSxVQUFVLDZjQWN0QixDQUFNLENBQ1gsOEpBQTRGLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLFlBQXlCLFlBQVksMkVBQVksVUFBVSxDQUFDLEdBQUcsaUJBQThCLGFBQWlCLENBQ3BPLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLENBQzFCLFlBQVksQ0FBRSxzREFBc0QsQ0FDcEUsTUFBTSxDQUFFLElBQUksQ0FDWixhQUFhLENBQUUsa0JBQWtCLENBQ2pDLFdBQVcsQ0FBRSxVQUFVLGdkQWN0QixDQUFNLENBQ1gsaUlBQW1FLENBQ25FLHFHQUF1QyxDQUN2QyxtRUFDRSxJQUFJLENBQUUsdUJBQXVCLEVBQzVCLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLGNBQTJCLGdCQUFxQixDQUM5RSx3R0FBc0MsMkVBQVksVUFBVSxDQUFDLEdBQUcsY0FBMkIsbUJBQXVCLENBQ2xILHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLDZHQUl6QixDQUFNLENBQ1gsbUhBQWlELDJFQUFZLFVBQVUsQ0FBQyxHQUFHLHlCQUFzQyxZQUFZLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLDBCQUF1Qyw2Q0FBaUQsQ0FDL08sc0VBQUcsMkVBQVksVUFBVSxDQUFDLEdBQUcsMEJBQXVDLDRHQUE0RywyRUFBWSxVQUFVLENBQUMsR0FBRyxpQkFBOEIsOEJBQWtDLENBQzFRLHNFQUFHLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLDBCQUF1QyxlQUFlLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLGNBQTJCLDZGQUFpRyxDQUN6TywrS0FBNkcsMkVBQVksVUFBVSxDQUFDLEdBQUcsY0FBMkIsMEhBQThILENBQ2hTLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxjQUFjLENBQzNCLFlBQVksQ0FBRSw2REFBNkQsQ0FDM0UsTUFBTSxDQUFFLElBQUksQ0FDWixhQUFhLENBQUUsdUJBQXVCLENBQ3RDLFdBQVcsQ0FBRSxZQUFZLDA3QkF3Q3hCLENBQU0sQ0FDWCxzRkFBb0IsMkVBQVksVUFBVSxDQUFDLEdBQUcsMEJBQXVDLGNBQWMsMkVBQVksVUFBVSxDQUFDLEdBQUcsY0FBMkIseUVBQXlFLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLGlCQUE4QixVQUFjLENBQ3ZTLG1FQUNFLElBQUksQ0FBRSxrQkFBa0IsRUFDdkIsMkVBQVksVUFBVSxDQUFDLElBQUksd0JBQXFDLENBQUssQ0FDeEUsd0ZBQXNCLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLDBCQUF1QywwQ0FBMEMsMkVBQVksVUFBVSxDQUFDLEdBQUcsd0JBQXFDLG1CQUF1QixDQUN2Tix3RUFBSyxxRUFBTSxVQUFVLENBQUMsS0FBSyxDQUN2QixXQUFXLENBQUUsYUFBYSxDQUMxQixZQUFZLENBQUUsbURBQW1ELENBQ2pFLE1BQU0sQ0FBRSxJQUFJLENBQ1osYUFBYSxDQUFFLGlCQUFpQixDQUNoQyxXQUFXLENBQUUsUUFBUSw2aEJBaUJwQixDQUFNLENBQ1gsc09BQXdLLENBQ3hLLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLENBQzFCLFlBQVksQ0FBRSwwREFBMEQsQ0FDeEUsTUFBTSxDQUFFLElBQUksQ0FDWixhQUFhLENBQUUsc0JBQXNCLENBQ3JDLFdBQVcsQ0FBRSxVQUFVLHNaQWF0QixDQUFNLENBQ1gsaUxBQStHLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLDJCQUF3QyxnQ0FBZ0MsMkVBQVksVUFBVSxDQUFDLEdBQUcsd0JBQXFDLHVIQUEySCxDQUMzWSx3RUFBSyxxRUFBTSxVQUFVLENBQUMsS0FBSyxDQUN2QixXQUFXLENBQUUsYUFBYSxDQUMxQixZQUFZLENBQUUsNERBQTRELENBQzFFLE1BQU0sQ0FBRSxJQUFJLENBQ1osYUFBYSxDQUFFLHdCQUF3QixDQUN2QyxXQUFXLENBQUUsVUFBVSx3Y0FjdEIsQ0FBTSxDQUNYLG1FQUNFLElBQUksQ0FBRSxxQkFBcUIsRUFDMUIsMkVBQVksVUFBVSxDQUFDLElBQUksWUFBeUIsZ0JBQXFCLENBQzVFLHdHQUFzQywyRUFBWSxVQUFVLENBQUMsR0FBRyxZQUF5Qiw2QkFBaUMsQ0FDMUgsd0VBQUsscUVBQU0sVUFBVSxDQUFDLEtBQUssQ0FDdkIsV0FBVyxDQUFFLGFBQWEsdUdBSXpCLENBQU0sQ0FDWCwyTEFBNkgsQ0FDN0gsd0VBQUsscUVBQU0sVUFBVSxDQUFDLEtBQUssQ0FDdkIsV0FBVyxDQUFFLGNBQWMsQ0FDM0IsWUFBWSxDQUFFLDJEQUEyRCxDQUN6RSxNQUFNLENBQUUsSUFBSSxDQUNaLGFBQWEsQ0FBRSxxQkFBcUIsQ0FDcEMsV0FBVyxDQUFFLFlBQVkscXRDQXNEeEIsQ0FBTSxDQUNYLG1FQUNFLElBQUksQ0FBRSxpQkFBaUIsb0JBQ0UsQ0FDM0Isa1BBQWdMLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLHFCQUFrQyxzREFBMEQsQ0FDdFMsMklBQTZFLENBQzdFLHVFQUNFLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLGlEQUFzRCxDQUN6RSxtRUFBSSxVQUFVLENBQUMsSUFBSSx1REFBNEQsQ0FDNUUsQ0FDTCwrR0FBNkMsMkVBQVksVUFBVSxDQUFDLEdBQUcsWUFBeUIsZUFBZSxrRUFBRyxVQUFVLENBQUMsR0FBRyxDQUM1SCxNQUFNLENBQUUsOEJBQThCLEVBQ3JDLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLGdCQUE2QixDQUFJLEtBQVMsQ0FDekUsd0VBQUsscUVBQU0sVUFBVSxDQUFDLEtBQUssQ0FDdkIsV0FBVyxDQUFFLGFBQWEsaUVBRXpCLENBQU0sQ0FDWCxvTEFBa0gsMkVBQVksVUFBVSxDQUFDLEdBQUcsWUFBeUIseUhBQXlILDJFQUFZLFVBQVUsQ0FBQyxHQUFHLHNCQUFtQyxrQkFBc0IsQ0FDalgsd0VBQUsscUVBQU0sVUFBVSxDQUFDLEtBQUssQ0FDdkIsV0FBVyxDQUFFLGFBQWEsQ0FDMUIsWUFBWSxDQUFFLHVCQUF1QixDQUNyQyxNQUFNLENBQUUsSUFBSSxDQUNaLFdBQVcsQ0FBRSxRQUFRLHFVQWFwQixDQUFNLENBQ1gsOEVBQVksMkVBQVksVUFBVSxDQUFDLEdBQUcsa0JBQStCLHVFQUF1RSwyRUFBWSxVQUFVLENBQUMsR0FBRyxpQkFBOEIscUZBQXlGLENBQzdSLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLHlPQU96QixDQUFNLENBQ1gsb0lBQXNFLENBQ3RFLDhGQUFnQyxDQUNoQyxtRUFDRSxJQUFJLENBQUUsaUJBQWlCLEVBQ3RCLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLG9CQUFpQyxDQUFLLENBQ3BFLHdHQUFzQywyRUFBWSxVQUFVLENBQUMsR0FBRyxTQUFzQix3SEFBd0gsMkVBQVksVUFBVSxDQUFDLEdBQUcsa0JBQStCLGlCQUFpQiwyRUFBWSxVQUFVLENBQUMsR0FBRyxnQkFBNkIsaUNBQXFDLENBQ3BYLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLHNXQWF6QixDQUFNLENBQ1gsbUVBQ0UsSUFBSSxDQUFFLHVCQUF1QiwwQkFDRSxDQUNqQyxrUUFBOEwsa0VBQUcsVUFBVSxDQUFDLEdBQUcsQ0FDM00sTUFBTSxDQUFFLG9DQUFvQyxFQUMzQywyRUFBWSxVQUFVLENBQUMsR0FBRyxlQUE0QixDQUFJLGNBQWtCLENBQ2pGLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLENBQzFCLFlBQVksQ0FBRSx1QkFBdUIsQ0FDckMsTUFBTSxDQUFFLElBQUksQ0FDWixXQUFXLENBQUUsUUFBUSwrVkFhcEIsQ0FBTSxDQUNYLDJFQUNFLE1BQU0sQ0FBRSxNQUFNLEVBQ2Isa0VBQUcsVUFBVSxDQUFDLFlBQVksZ0ZBQW9GLENBQWEsQ0FDOUgsc1ZBQXNSLENBQ3RSLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLGt1QkFzQnpCLENBQU0sQ0FDWCxtRUFDRSxJQUFJLENBQUUsd0JBQXdCLDJCQUNFLENBQ2xDLDZFQUFXLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLGlCQUE4Qiw4TkFBOE4sMkVBQVksVUFBVSxDQUFDLEdBQUcsMEJBQXVDLDBEQUE4RCxDQUNoYSx3UkFBME4sQ0FDMU4sMEZBQXdCLDJFQUFZLFVBQVUsQ0FBQyxHQUFHLGlCQUE4QixTQUFhLENBQzdGLHdFQUFLLHFFQUFNLFVBQVUsQ0FBQyxLQUFLLENBQ3ZCLFdBQVcsQ0FBRSxhQUFhLGdvQkFzQnpCLENBQU0sQ0FDWCxtRUFDRSxJQUFJLENBQUUsT0FBTyxVQUNFLENBQ2pCLHVFQUNFLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLFNBQVMsMkVBQVksVUFBVSxDQUFDLElBQUksMEJBQXVDLDBFQUM1RixtRUFBSSxVQUFVLENBQUMsSUFBSSxFQUNqQixtRUFBSSxVQUFVLENBQUMsSUFBSSxhQUFhLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLGNBQTJCLHVHQUE0RyxDQUMvTCxDQUNGLENBQ0wsbUVBQUksVUFBVSxDQUFDLElBQUksU0FBUywyRUFBWSxVQUFVLENBQUMsSUFBSSx3QkFBcUMsaUNBQzFGLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLEVBQ2pCLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLGFBQWEsMkVBQVksVUFBVSxDQUFDLElBQUksWUFBeUIscUVBQTBFLENBQzNKLENBQ0YsQ0FDTCxtRUFBSSxVQUFVLENBQUMsSUFBSSxTQUFTLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLHNCQUFtQyxLQUFLLDJFQUFZLFVBQVUsQ0FBQyxJQUFJLGdCQUE2QixpRUFBc0UsQ0FDN04sbUVBQUksVUFBVSxDQUFDLElBQUksYUFBYSwyRUFBWSxVQUFVLENBQUMsSUFBSSxvQkFBaUMsdUZBQTRGLENBQ3hMLG1FQUFJLFVBQVUsQ0FBQyxJQUFJLDJCQUEyQiwyRUFBWSxVQUFVLENBQUMsSUFBSSxpQkFBOEIseUNBQThDLENBQ2xKLENBQ0wsbUVBQ0UsSUFBSSxDQUFFLFlBQVksZUFDRSxDQUN0QixtSkFBaUYsa0VBQUcsVUFBVSxDQUFDLEdBQUcsQ0FDOUYsTUFBTSxDQUFFLEtBQUssUUFDRCxLQUFTLENBQ2IsQ0FDaEIsQ0FDQSxDQUNBRCxVQUFVLENBQUNHLGNBQWMsQ0FBRyxJQUFJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVkdXgtZG9jcy8uL2RvY3MvYWR2YW5jZWQvcGVyc2lzdGVuY2UubWR4P2E3YzgiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbi8qIEBqc3hSdW50aW1lIGNsYXNzaWMgKi9cbi8qIEBqc3ggbWR4ICovXG4vKiBAanN4RnJhZyBSZWFjdC5GcmFnbWVudCAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbWR4IH0gZnJvbSAnQG1keC1qcy9yZWFjdCc7XG5cblxuZXhwb3J0IGNvbnN0IGZyb250TWF0dGVyID0ge1xuXHRpZDogJ3BlcnNpc3RlbmNlJyxcblx0dGl0bGU6ICdQZXJzaXN0ZW5jZSdcbn07XG5leHBvcnQgY29uc3QgY29udGVudFRpdGxlID0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IG1ldGFkYXRhID0ge1xuICBcInVudmVyc2lvbmVkSWRcIjogXCJhZHZhbmNlZC9wZXJzaXN0ZW5jZVwiLFxuICBcImlkXCI6IFwiYWR2YW5jZWQvcGVyc2lzdGVuY2VcIixcbiAgXCJ0aXRsZVwiOiBcIlBlcnNpc3RlbmNlXCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJUaGVyZSBhcmUgbWFueSB3YXlzIHRvIHBlcnNpc3QgYW5kIHJlc3RvcmUgc3RhdGUgXFxcInNuYXBzaG90c1xcXCIgaW4gWmVkdXguIEl0IGNhbiBiZSBkb25lIGF0IHRoZSBhdG9tIGluc3RhbmNlLCBlY29zeXN0ZW0sIG9yIHBsdWdpbiBsZXZlbC5cIixcbiAgXCJzb3VyY2VcIjogXCJAc2l0ZS9kb2NzL2FkdmFuY2VkL3BlcnNpc3RlbmNlLm1keFwiLFxuICBcInNvdXJjZURpck5hbWVcIjogXCJhZHZhbmNlZFwiLFxuICBcInNsdWdcIjogXCIvYWR2YW5jZWQvcGVyc2lzdGVuY2VcIixcbiAgXCJwZXJtYWxpbmtcIjogXCIvemVkdXgvZG9jcy9hZHZhbmNlZC9wZXJzaXN0ZW5jZVwiLFxuICBcImRyYWZ0XCI6IGZhbHNlLFxuICBcImVkaXRVcmxcIjogXCJodHRwczovL2dpdGh1Yi5jb20vT21uaXN0YWMvemVkdXgvdHJlZS9tYXN0ZXIvZG9jcy9hZHZhbmNlZC9wZXJzaXN0ZW5jZS5tZHhcIixcbiAgXCJ0YWdzXCI6IFtdLFxuICBcInZlcnNpb25cIjogXCJjdXJyZW50XCIsXG4gIFwiZnJvbnRNYXR0ZXJcIjoge1xuICAgIFwiaWRcIjogXCJwZXJzaXN0ZW5jZVwiLFxuICAgIFwidGl0bGVcIjogXCJQZXJzaXN0ZW5jZVwiXG4gIH0sXG4gIFwic2lkZWJhclwiOiBcInJlYWN0XCIsXG4gIFwicHJldmlvdXNcIjoge1xuICAgIFwidGl0bGVcIjogXCJDb21wbGV4IFBhcmFtc1wiLFxuICAgIFwicGVybWFsaW5rXCI6IFwiL3plZHV4L2RvY3MvYWR2YW5jZWQvY29tcGxleC1wYXJhbXNcIlxuICB9LFxuICBcIm5leHRcIjoge1xuICAgIFwidGl0bGVcIjogXCJTU1JcIixcbiAgICBcInBlcm1hbGlua1wiOiBcIi96ZWR1eC9kb2NzL2FkdmFuY2VkL3NzclwiXG4gIH1cbn07XG5leHBvcnQgY29uc3QgYXNzZXRzID0ge1xuXG59O1xuXG5cbmV4cG9ydCBjb25zdCB0b2MgPSBbe1xuICB2YWx1ZTogJ1NpbmdsZSBBdG9tJyxcbiAgaWQ6ICdzaW5nbGUtYXRvbScsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnRWNvc3lzdGVtIFBlcnNpc3RlbmNlJyxcbiAgaWQ6ICdlY29zeXN0ZW0tcGVyc2lzdGVuY2UnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJzxjb2RlPmVjb3N5c3RlbS5kZWh5ZHJhdGUoKTwvY29kZT4nLFxuICBpZDogJ2Vjb3N5c3RlbWRlaHlkcmF0ZScsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnU2tpcHBpbmcgQXRvbXMnLFxuICBpZDogJ3NraXBwaW5nLWF0b21zJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT5kZWh5ZHJhdGU8L2NvZGU+IEF0b20gQ29uZmlnJyxcbiAgaWQ6ICdkZWh5ZHJhdGUtYXRvbS1jb25maWcnLFxuICBsZXZlbDogM1xufSwge1xuICB2YWx1ZTogJzxjb2RlPmVjb3N5c3RlbS5oeWRyYXRlKCk8L2NvZGU+JyxcbiAgaWQ6ICdlY29zeXN0ZW1oeWRyYXRlJyxcbiAgbGV2ZWw6IDNcbn0sIHtcbiAgdmFsdWU6ICc8Y29kZT5oeWRyYXRlPC9jb2RlPiBBdG9tIENvbmZpZycsXG4gIGlkOiAnaHlkcmF0ZS1hdG9tLWNvbmZpZycsXG4gIGxldmVsOiAzXG59LCB7XG4gIHZhbHVlOiAnU3RvcmUgSHlkcmF0aW9uJyxcbiAgaWQ6ICdzdG9yZS1oeWRyYXRpb24nLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJzxjb2RlPm1hbnVhbEh5ZHJhdGlvbjwvY29kZT4nLFxuICBpZDogJ21hbnVhbGh5ZHJhdGlvbicsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnSHlkcmF0aW9uIGNvbnN1bXB0aW9uJyxcbiAgaWQ6ICdoeWRyYXRpb24tY29uc3VtcHRpb24nLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ1JlYWN0aXZpdHkgVmlhIFBsdWdpbnMnLFxuICBpZDogJ3JlYWN0aXZpdHktdmlhLXBsdWdpbnMnLFxuICBsZXZlbDogMlxufSwge1xuICB2YWx1ZTogJ1JlY2FwJyxcbiAgaWQ6ICdyZWNhcCcsXG4gIGxldmVsOiAyXG59LCB7XG4gIHZhbHVlOiAnTmV4dCBTdGVwcycsXG4gIGlkOiAnbmV4dC1zdGVwcycsXG4gIGxldmVsOiAyXG59XTtcblxuY29uc3QgbGF5b3V0UHJvcHMgPSB7XG4gIHRvY1xufTtcbmNvbnN0IE1EWExheW91dCA9IFwid3JhcHBlclwiXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNRFhDb250ZW50KHtcbiAgY29tcG9uZW50cyxcbiAgLi4ucHJvcHNcbn0pIHtcbiAgcmV0dXJuIDxNRFhMYXlvdXQgey4uLmxheW91dFByb3BzfSB7Li4ucHJvcHN9IGNvbXBvbmVudHM9e2NvbXBvbmVudHN9IG1keFR5cGU9XCJNRFhMYXlvdXRcIj5cblxuICAgIDxwPntgVGhlcmUgYXJlIG1hbnkgd2F5cyB0byBwZXJzaXN0IGFuZCByZXN0b3JlIHN0YXRlIFwic25hcHNob3RzXCIgaW4gWmVkdXguIEl0IGNhbiBiZSBkb25lIGF0IHRoZSBhdG9tIGluc3RhbmNlLCBlY29zeXN0ZW0sIG9yIHBsdWdpbiBsZXZlbC5gfTwvcD5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0aXRsZVwiOiBcInlvdSB3aWxsIGxlYXJuOlwiLFxuICAgICAgXCJ0eXBlXCI6IFwidGlwXCJcbiAgICB9fT48dWwgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj5cbiAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgSG93IHRvIHBlcnNpc3QgYW5kIHJlc3RvcmUgYSBzaW5nbGUgYXRvbSBpbnN0YW5jZSdzIHN0YXRlYH08L2xpPlxuICAgICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BIb3cgdG8gZGVoeWRyYXRlIGFuZCByZWh5ZHJhdGUgYW4gZW50aXJlIGVjb3N5c3RlbWB9PC9saT5cbiAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgSG93IHRvIHRyYW5zZm9ybSBub24tc2VyaWFsaXphYmxlIGF0b20gdmFsdWVzYH08L2xpPlxuICAgICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BPbmUgb2YgbWFueSB3YXlzIHRvIGFjY29tcGxpc2ggdGhpcyB3aXRoIHBsdWdpbnNgfTwvbGk+XG4gICAgICA8L3VsPjwvYWRtb25pdGlvbj5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJzaW5nbGUtYXRvbVwiXG4gICAgfX0+e2BTaW5nbGUgQXRvbWB9PC9oMj5cbiAgICA8cD57YExldCdzIHN0YXJ0IHNpbXBsZS4gV2UnbGwgdXNlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGxvY2FsU3RvcmFnZWB9PC9pbmxpbmVDb2RlPntgIGZvciB0aGVzZSBleGFtcGxlcywgYnV0IHlvdSBjYW4gdXNlIHdoYXRldmVyIG1lYW5zIG9mIHN0b3JhZ2UgeW91IHdhbnQuYH08L3A+XG4gICAgPHA+e2BUbyBwZXJzaXN0IHRoZSBzdGF0ZSBvZiBhIHNpbmdsZSBhdG9tLCB3ZSBjb3VsZCB1c2UgYSBzZXBhcmF0ZSBhdG9tIHRvIGhhbmRsZSB0aGUgcGVyc2lzdC9yZXN0b3JlIGZ1bmN0aW9uYWxpdHkuYH08L3A+XG4gICAgPHA+e2BIZXJlJ3MgYW4gZXhhbXBsZSB1c2luZyBhIHNlcGFyYXRlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGxvY2FsU3RvcmFnZUF0b21gfTwvaW5saW5lQ29kZT57YCB0aGF0IHdlIGdpdmUgYSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BrZXlgfTwvaW5saW5lQ29kZT57YCBwYXJhbSwgY3JlYXRpbmcgYSBkaWZmZXJlbnQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgbG9jYWxTdG9yYWdlQXRvbWB9PC9pbmxpbmVDb2RlPntgIGluc3RhbmNlIGZvciBldmVyeSBsb2NhbFN0b3JhZ2Uga2V5IHdlIHdhbnQgdG8gcGVyc2lzdCBkYXRhIHRvL2Zyb206YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c3hcIixcbiAgICAgICAgXCJtZXRhc3RyaW5nXCI6IFwibGl2ZSBlY29zeXN0ZW1JZD1wZXJzaXN0ZW5jZS9zZXBhcmF0ZS1hdG9tIHJlc3VsdFZhcj1Vc2VybmFtZVwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcInBlcnNpc3RlbmNlL3NlcGFyYXRlLWF0b21cIixcbiAgICAgICAgXCJyZXN1bHRWYXJcIjogXCJVc2VybmFtZVwiXG4gICAgICB9fT57YGNvbnN0IGxvY2FsU3RvcmFnZUF0b20gPSBhdG9tKCdsb2NhbFN0b3JhZ2UnLCAoa2V5OiBzdHJpbmcpID0+IHtcbiAgY29uc3QgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KVxuXG4gIC8vIHdlJ3JlIHVzaW5nIHRoZSBmdW5jdGlvbiBvdmVybG9hZCBvZiBcXGBpbmplY3RTdG9yZVxcYCB0byBwcmV2ZW50IEpTT04ucGFyc2VcbiAgLy8gZnJvbSBydW5uaW5nIHVubmVjZXNhcmlseSBvbiByZWV2YWx1YXRpb25zOlxuICBjb25zdCBzdG9yZSA9IGluamVjdFN0b3JlKCgpID0+XG4gICAgY3JlYXRlU3RvcmUobnVsbCwgdmFsID8gSlNPTi5wYXJzZSh2YWwpIDogdW5kZWZpbmVkKVxuICApXG5cbiAgY29uc3QgdXBkYXRlID0gKG5ld1ZhbDogYW55KSA9PiB7XG4gICAgc3RvcmUuc2V0U3RhdGUobmV3VmFsKVxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkobmV3VmFsKSlcbiAgfVxuXG4gIHJldHVybiBhcGkoc3RvcmUpLnNldEV4cG9ydHMoeyB1cGRhdGUgfSlcbn0pXG5cbi8vIHRoaXMgYXRvbSdzIHN0YXRlIG5vdyBwZXJzaXN0cyBhY3Jvc3MgcGFnZSByZWxvYWRzOlxuY29uc3QgdXNlcm5hbWVBdG9tID0gYXRvbSgndXNlcm5hbWUnLCAoKSA9PiB7XG4gIGNvbnN0IFtzdG9yZWROYW1lLCB7IHVwZGF0ZSB9XSA9IGluamVjdEF0b21TdGF0ZShsb2NhbFN0b3JhZ2VBdG9tLCBbXG4gICAgJ3VzZXJuYW1lMScsIC8vIDwtIHRoZSBsb2NhbFN0b3JhZ2Uga2V5XG4gIF0pXG5cbiAgcmV0dXJuIGFwaShzdG9yZWROYW1lIHx8ICcnKS5zZXRFeHBvcnRzKHsgdXBkYXRlIH0pXG59KVxuXG5mdW5jdGlvbiBVc2VybmFtZSgpIHtcbiAgY29uc3QgW3N0YXRlLCB7IHVwZGF0ZSB9XSA9IHVzZUF0b21TdGF0ZSh1c2VybmFtZUF0b20pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPGlucHV0IG9uQ2hhbmdlPXtldmVudCA9PiB1cGRhdGUoZXZlbnQudGFyZ2V0LnZhbHVlKX0gdmFsdWU9e3N0YXRlfSAvPlxuICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBsb2NhdGlvbi5yZWxvYWQoKX0+UmVmcmVzaCBwYWdlPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIClcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgV2UgY291bGQgYWxzbyB1c2UgYW4gaW5qZWN0b3IuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c3hcIixcbiAgICAgICAgXCJtZXRhc3RyaW5nXCI6IFwibGl2ZSBlY29zeXN0ZW1JZD1wZXJzaXN0ZW5jZS9pbmplY3RvciByZXN1bHRWYXI9VXNlcm5hbWVcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJwZXJzaXN0ZW5jZS9pbmplY3RvclwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIlVzZXJuYW1lXCJcbiAgICAgIH19PntgY29uc3QgaW5qZWN0TG9jYWxTdG9yYWdlID0gKGtleTogc3RyaW5nLCBkZWZhdWx0VmFsOiBhbnkpID0+IHtcbiAgY29uc3QgdmFsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KVxuXG4gIC8vIHdlJ3JlIHVzaW5nIHRoZSBmdW5jdGlvbiBvdmVybG9hZCBvZiBcXGBpbmplY3RTdG9yZVxcYCB0byBwcmV2ZW50IEpTT04ucGFyc2VcbiAgLy8gZnJvbSBydW5uaW5nIHVubmVjZXNhcmlseSBvbiByZWV2YWx1YXRpb25zOlxuICBjb25zdCBzdG9yZSA9IGluamVjdFN0b3JlKCgpID0+XG4gICAgY3JlYXRlU3RvcmUobnVsbCwgdmFsID8gSlNPTi5wYXJzZSh2YWwpIDogZGVmYXVsdFZhbClcbiAgKVxuXG4gIGNvbnN0IHVwZGF0ZSA9IChuZXdWYWw6IGFueSkgPT4ge1xuICAgIHN0b3JlLnNldFN0YXRlKG5ld1ZhbClcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KG5ld1ZhbCkpXG4gIH1cblxuICByZXR1cm4gW3N0b3JlLCB1cGRhdGVdIGFzIGNvbnN0XG59XG5cbi8vIHRoaXMgYXRvbSdzIHN0YXRlIG5vdyBwZXJzaXN0cyBhY3Jvc3MgcGFnZSByZWxvYWRzOlxuY29uc3QgdXNlcm5hbWVBdG9tID0gYXRvbSgndXNlcm5hbWUnLCAoKSA9PiB7XG4gIGNvbnN0IFtzdG9yZSwgdXBkYXRlXSA9IGluamVjdExvY2FsU3RvcmFnZSgndXNlcm5hbWUyJywgJycpXG5cbiAgcmV0dXJuIGFwaShzdG9yZSkuc2V0RXhwb3J0cyh7IHVwZGF0ZSB9KVxufSlcblxuZnVuY3Rpb24gVXNlcm5hbWUoKSB7XG4gIGNvbnN0IFtzdGF0ZSwgeyB1cGRhdGUgfV0gPSB1c2VBdG9tU3RhdGUodXNlcm5hbWVBdG9tKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxpbnB1dCBvbkNoYW5nZT17ZXZlbnQgPT4gdXBkYXRlKGV2ZW50LnRhcmdldC52YWx1ZSl9IHZhbHVlPXtzdGF0ZX0gLz5cbiAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gbG9jYXRpb24ucmVsb2FkKCl9PlJlZnJlc2ggcGFnZTwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFllcCwgdGhlc2UgYXBwcm9hY2hlcyBhcmUgdmVyeSBzaW1pbGFyLmB9PC9wPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcImVjb3N5c3RlbS1wZXJzaXN0ZW5jZVwiXG4gICAgfX0+e2BFY29zeXN0ZW0gUGVyc2lzdGVuY2VgfTwvaDI+XG4gICAgPHA+e2BUaGVyZSBhcmUgYSBmZXcgd2F5cyB0byBnZXQgYSBzdGF0ZSBzbmFwc2hvdCBvZiBhbiBlbnRpcmUgZWNvc3lzdGVtLiBGb3IgZXhhbXBsZSwgeW91IGNvdWxkIGNhbGwgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZWNvc3lzdGVtLmluc3BlY3RJbnN0YW5jZXMoKWB9PC9pbmxpbmVDb2RlPntgIGFuZCBtYXAgZWFjaCBpbnN0YW5jZSB0byBhIHZhbHVlIHlvdXJzZWxmLiBCdXQgZWNvc3lzdGVtcyBoYXZlIGEgbWV0aG9kIHRoYXQncyBzcGVjaWZpY2FsbHkgZGVzaWduZWQgZm9yIHBlcnNpc3RlbmNlOmB9PC9wPlxuICAgIDxoMyB7Li4ue1xuICAgICAgXCJpZFwiOiBcImVjb3N5c3RlbWRlaHlkcmF0ZVwiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2BlY29zeXN0ZW0uZGVoeWRyYXRlKClgfTwvaW5saW5lQ29kZT48L2gzPlxuICAgIDxwPntgWW91IGNhbiBnZXQgYSBzbmFwc2hvdCBvZiB0aGUgc3RhdGUgb2YgYWxsIGF0b21zIGluIGFuIGVjb3N5c3RlbSB3aXRoIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5kZWh5ZHJhdGUoeyB0cmFuc2Zvcm06IGZhbHNlIH0pYH08L2lubGluZUNvZGU+PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2BpbXBvcnQgeyBhdG9tLCBjcmVhdGVFY29zeXN0ZW0gfSBmcm9tICdAemVkdXgvcmVhY3QnXG5cbmNvbnN0IGV4YW1wbGVBdG9tID0gYXRvbSgnZXhhbXBsZScsICgpID0+ICdIZWxsbywgd29ybGQhJylcbmNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7IGlkOiAncm9vdCcgfSlcbmVjb3N5c3RlbS5nZXRJbnN0YW5jZShleGFtcGxlQXRvbSlcblxuY29uc3Qgc25hcHNob3QgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKHsgdHJhbnNmb3JtOiBmYWxzZSB9KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BUaGlzIG1heSBiZSBhbGwgeW91IG5lZWQuIEhvd2V2ZXIsIHBhc3NpbmcgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgeyB0cmFuc2Zvcm06IGZhbHNlIH1gfTwvaW5saW5lQ29kZT57YCBtYWtlcyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BlY29zeXN0ZW0uZGVoeWRyYXRlKClgfTwvaW5saW5lQ29kZT57YCB2ZXJ5IFwiZHVtYlwiIC0gaXQgZG9lc24ndCBkbyBhbnl0aGluZyBzcGVjaWFsIHRvIHRyYW5zZm9ybSB0aGUgc3RhdGUsIGl0IGp1c3QgcmV0dXJucyBpdCBhcy1pcy4gU2luY2UgYXRvbXMgY2FuIGhvbGQgYW55dGhpbmcsIHlvdSBtYXkgaGF2ZSBhIHNpdHVhdGlvbiB3aGVyZSB5b3UncmUgc3RvcmluZyBub24tc2VyaWFsaXphYmxlIHZhbHVlcyAobmFtZWx5IGZ1bmN0aW9ucykgaW4gYXRvbXMuIERhdGEgdHlwZXMgZnJvbSBJbW11dGFibGUuanMsIGZvciBleGFtcGxlLCByZXF1aXJlIGFuIGV4dHJhIHN0ZXAgdG8gc2VyaWFsaXplL2Rlc2VyaWFsaXplIHZhbHVlcy5gfTwvcD5cbiAgICA8cD57YEZvciB0aGVzZSBhdG9tcyB5b3UgaGF2ZSB0d28gb3B0aW9uczpgfTwvcD5cbiAgICA8dWw+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BTa2lwIHRoZSBub24tc2VyaWFsaXphYmxlIGF0b20uYH08L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgVHJhbnNmb3JtIHRoZSBhdG9tJ3MgdmFsdWUgdG8gc29tZXRoaW5nIHRoYXQgY2FuIGJlIHNlcmlhbGl6ZWQuYH08L2xpPlxuICAgIDwvdWw+XG4gICAgPHA+e2BGaXJzdCB0aGluZ3MgZmlyc3Q6YH08L3A+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwic2tpcHBpbmctYXRvbXNcIlxuICAgIH19PntgU2tpcHBpbmcgQXRvbXNgfTwvaDM+XG4gICAgPHA+e2BZb3UgY2FuIGJsYWNrbGlzdCBhdG9tcyB5b3UgZG9uJ3Qgd2FudCB0byBkZWh5ZHJhdGUgYnkgcGFzc2luZyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BleGNsdWRlYH08L2lubGluZUNvZGU+e2AgYW5kL29yIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGV4Y2x1ZGVGbGFnc2B9PC9pbmxpbmVDb2RlPntgIG9wdGlvbnM6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIGVjb3N5c3RlbUlkPWV4Y2x1ZGVzLWV4YW1wbGUgcmVzdWx0VmFyPXNuYXBzaG90XCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwiZXhjbHVkZXMtZXhhbXBsZVwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcInNuYXBzaG90XCJcbiAgICAgIH19PntgY29uc3Qgc2tpcHBlZEF0b20gPSBhdG9tKCdza2lwcGVkJywgJzooJywgeyBmbGFnczogWyduby1wZXJzaXN0J10gfSlcbmNvbnN0IGFsc29Ta2lwcGVkQXRvbSA9IGF0b20oJ2Fsc29Ta2lwcGVkJywgJzpPJylcbmNvbnN0IHBlcnNpc3RlZEF0b20gPSBhdG9tKCdwZXJzaXN0ZWQnLCAnOiknKVxuXG5jb25zdCBlY29zeXN0ZW0gPSBjcmVhdGVFY29zeXN0ZW0oeyBpZDogJ2V4bHVkZXMtZXhhbXBsZScgfSlcbmVjb3N5c3RlbS5nZXRJbnN0YW5jZShza2lwcGVkQXRvbSlcbmVjb3N5c3RlbS5nZXRJbnN0YW5jZShhbHNvU2tpcHBlZEF0b20pXG5lY29zeXN0ZW0uZ2V0SW5zdGFuY2UocGVyc2lzdGVkQXRvbSlcblxuY29uc3Qgc25hcHNob3QgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKHtcbiAgZXhjbHVkZTogW2Fsc29Ta2lwcGVkQXRvbV0sXG4gIGV4Y2x1ZGVGbGFnczogWyduby1wZXJzaXN0J10sXG59KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BTaW1pbGFybHksIHlvdSBjYW4gc3BlY2lmeSBhIHdoaXRlbGlzdCBvZiBhdG9tcyB5b3Ugd2FudCB0byBiZSBkZWh5ZHJhdGVkIGJ5IHBhc3NpbmcgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5jbHVkZWB9PC9pbmxpbmVDb2RlPntgIGFuZC9vciBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmNsdWRlRmxhZ3NgfTwvaW5saW5lQ29kZT57YCBvcHRpb25zOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIixcbiAgICAgICAgXCJtZXRhc3RyaW5nXCI6IFwibGl2ZSBlY29zeXN0ZW1JZD1pbmNsdWRlcy1leGFtcGxlIHJlc3VsdFZhcj1zbmFwc2hvdFwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJlY29zeXN0ZW1JZFwiOiBcImluY2x1ZGVzLWV4YW1wbGVcIixcbiAgICAgICAgXCJyZXN1bHRWYXJcIjogXCJzbmFwc2hvdFwiXG4gICAgICB9fT57YGNvbnN0IHNraXBwZWRBdG9tID0gYXRvbSgnc2tpcHBlZCcsICc6KCcpXG5jb25zdCBwZXJzaXN0ZWRBdG9tID0gYXRvbSgncGVyc2lzdGVkJywgJzopJywgeyBmbGFnczogWydwZXJzaXN0J10gfSlcbmNvbnN0IGFsc29QZXJzaXN0ZWRBdG9tID0gYXRvbSgnYWxzb1BlcnNpc3RlZCcsICc6RCcpXG5cbmNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7IGlkOiAnaW5jbHVkZXMtZXhhbXBsZScgfSlcbmVjb3N5c3RlbS5nZXRJbnN0YW5jZShza2lwcGVkQXRvbSlcbmVjb3N5c3RlbS5nZXRJbnN0YW5jZShwZXJzaXN0ZWRBdG9tKVxuZWNvc3lzdGVtLmdldEluc3RhbmNlKGFsc29QZXJzaXN0ZWRBdG9tKVxuXG5jb25zdCBzbmFwc2hvdCA9IGVjb3N5c3RlbS5kZWh5ZHJhdGUoe1xuICBpbmNsdWRlOiBbYWxzb1BlcnNpc3RlZEF0b21dLFxuICBpbmNsdWRlRmxhZ3M6IFsncGVyc2lzdCddLFxufSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgRXhjbHVkZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgaW5jbHVkZXMgaWYgeW91IHBhc3MgYm90aC5gfTwvcD5cbiAgICA8cD57YE5vdyBmb3IgdHJhbnNmb3JtaW5nIHZhbHVlczpgfTwvcD5cbiAgICA8aDMgey4uLntcbiAgICAgIFwiaWRcIjogXCJkZWh5ZHJhdGUtYXRvbS1jb25maWdcIlxuICAgIH19PjxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJoM1wiPntgZGVoeWRyYXRlYH08L2lubGluZUNvZGU+e2AgQXRvbSBDb25maWdgfTwvaDM+XG4gICAgPHA+e2BBdG9tcyBjYW4gYmUgY29uZmlndXJlZCB3aXRoIGEgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZGVoeWRyYXRlYH08L2lubGluZUNvZGU+e2AgY29uZmlnIG9wdGlvbjpgfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3QgZXhhbXBsZUF0b20gPSBhdG9tKCdleGFtcGxlJywgKCkgPT4gaW5pdGlhbFN0YXRlLCB7XG4gIGRlaHlkcmF0ZTogc3RhdGUgPT4gdHJhbnNmb3JtKHN0YXRlKSxcbn0pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YFRvIGVuYWJsZSB2YWx1ZSB0cmFuc2Zvcm1pbmcsIHNpbXBseSBvbWl0IGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHsgdHJhbnNmb3JtOiBmYWxzZSB9YH08L2lubGluZUNvZGU+e2AgaW4gdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5kZWh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgIGNhbGwuIFRyYW5zZm9ybXMgYXJlIGVuYWJsZWQgYnkgZGVmYXVsdC5gfTwvcD5cbiAgICA8cD48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZWNvc3lzdGVtLmRlaHlkcmF0ZSgpYH08L2lubGluZUNvZGU+e2AgcmV0dXJucyBhbiBvYmplY3QgbWFwcGluZyBhdG9tIGluc3RhbmNlIGtleUhhc2hlcyB0byB0aGVpciBjdXJyZW50IHZhbHVlLiBCdXQgd2l0aCB0cmFuc2Zvcm1zIGVuYWJsZWQsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YC5kZWh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgIGRvZXMgYSBsaXR0bGUgbW9yZSBtYWdpYy5gfTwvcD5cbiAgICA8cD48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgZWNvc3lzdGVtLmRlaHlkcmF0ZSgpYH08L2lubGluZUNvZGU+e2AgY2FsbHMgdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGRlaHlkcmF0ZWB9PC9pbmxpbmVDb2RlPntgIGF0b20gY29uZmlnIG9wdGlvbiAod2hlbiBzcGVjaWZpZWQpIHRvIHRyYW5zZm9ybSB0aGUgc3RhdGUgb2YgaW5kaXZpZHVhbCBhdG9tIGluc3RhbmNlcy5gfTwvcD5cbiAgICA8cD57YEhlcmUncyBhbiBleGFtcGxlIG9mIGFuIGF0b20gd2hvc2UgdmFsdWUgaXMgYSBKUyBNYXAsIHdoaWNoIGNhbid0IGJlIGRpcmVjdGx5IHN0cmluZ2lmaWVkLiBXZSB1c2UgdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGRlaHlkcmF0ZWB9PC9pbmxpbmVDb2RlPntgIGF0b20gY29uZmlnIG9wdGlvbiB0byB0ZWxsIFplZHV4IGhvdyB0byB0cmFuc2Zvcm0gdGhpcyBhdG9tIGluc3RhbmNlJ3Mgc3RhdGUgdG8gYSBzZXJpYWxpemFibGUgdmFsdWUgZm9yIGRlaHlkcmF0aW9uOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHN4XCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgZWNvc3lzdGVtSWQ9cGVyc2lzdGVuY2UvZGVoeWRyYXRlIHJlc3VsdFZhcj1EZWh5ZHJhdG9yXCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwicGVyc2lzdGVuY2UvZGVoeWRyYXRlXCIsXG4gICAgICAgIFwicmVzdWx0VmFyXCI6IFwiRGVoeWRyYXRvclwiXG4gICAgICB9fT57YGNvbnN0IHRyYW5zZm9ybWluZ0F0b20gPSBhdG9tKFxuICAndHJhbnNmb3JtaW5nJyxcbiAgKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JlID0gaW5qZWN0U3RvcmUobmV3IE1hcChbWydjb3VudGVyJywgMF1dKSlcblxuICAgIGluamVjdEVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBoYW5kbGUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHN0b3JlLnNldFN0YXRlKHN0YXRlID0+XG4gICAgICAgICAgbmV3IE1hcChzdGF0ZSkuc2V0KCdjb3VudGVyJywgc3RhdGUuZ2V0KCdjb3VudGVyJykgKyAxKVxuICAgICAgICApXG4gICAgICB9LCAxMDAwKVxuXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChoYW5kbGUpXG4gICAgfSlcblxuICAgIHJldHVybiBzdG9yZVxuICB9LFxuICAvLyB0dXJuIHRoZSBtYXAgaW50byBhIEpTIG9iamVjdCBmb3Igc2VyaWFsaXphdGlvbjpcbiAgeyBkZWh5ZHJhdGU6IHN0YXRlID0+IE9iamVjdC5mcm9tRW50cmllcyhzdGF0ZS5lbnRyaWVzKCkpIH1cbilcblxuZnVuY3Rpb24gRGVoeWRyYXRvcigpIHtcbiAgdXNlQXRvbVZhbHVlKHRyYW5zZm9ybWluZ0F0b20pIC8vIGp1c3QgdG8gaW5zdGFudGlhdGUgaXQgZm9yIHRoaXMgZXhhbXBsZVxuICBjb25zdCBlY29zeXN0ZW0gPSB1c2VFY29zeXN0ZW0oKVxuICBjb25zdCBbZGVoeWRyYXRpb24sIHNldERlaHlkcmF0aW9uXSA9IHVzZVN0YXRlKClcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8cHJlPntkZWh5ZHJhdGlvbn08L3ByZT5cbiAgICAgIDxidXR0b25cbiAgICAgICAgb25DbGljaz17KCkgPT5cbiAgICAgICAgICBzZXREZWh5ZHJhdGlvbihKU09OLnN0cmluZ2lmeShlY29zeXN0ZW0uZGVoeWRyYXRlKCksIG51bGwsIDIpKVxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIERlaHlkcmF0ZSFcbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvPlxuICApXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YE5vdyBjYWxscyB0byBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BlY29zeXN0ZW0uZGVoeWRyYXRlKClgfTwvaW5saW5lQ29kZT57YCBjYWxsIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BkZWh5ZHJhdGVgfTwvaW5saW5lQ29kZT57YCBhdG9tIGNvbmZpZyBmdW5jdGlvbiB0byB0cmFuc2Zvcm0gdGhlIHN0YXRlIG9mIGFsbCBpbnN0YW5jZXMgb2YgdGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YHRyYW5zZm9ybWluZ2B9PC9pbmxpbmVDb2RlPntgIGF0b20uYH08L3A+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwiZWNvc3lzdGVtaHlkcmF0ZVwiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2BlY29zeXN0ZW0uaHlkcmF0ZSgpYH08L2lubGluZUNvZGU+PC9oMz5cbiAgICA8cD57YFRoZSBpbnZlcnNlIG9mIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5kZWh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgLiBBZnRlciB5b3UgZ2V0IGEgc3RhdGUgc25hcHNob3QsIHVzZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BlY29zeXN0ZW0uaHlkcmF0ZSgpYH08L2lubGluZUNvZGU+e2AgdG8gcmVzdG9yZSBpdC5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgZWNvc3lzdGVtSWQ9aHlkcmF0ZS1leGFtcGxlIHJlc3VsdFZhcj1vdXRwdXRcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJoeWRyYXRlLWV4YW1wbGVcIixcbiAgICAgICAgXCJyZXN1bHRWYXJcIjogXCJvdXRwdXRcIlxuICAgICAgfX0+e2Bjb25zdCBmb29BdG9tID0gYXRvbSgnZm9vJywgMSlcbmNvbnN0IGJhckF0b20gPSBhdG9tKCdiYXInLCAyKVxuXG5jb25zdCBlY29zeXN0ZW0gPSBjcmVhdGVFY29zeXN0ZW0oeyBpZDogJ2h5ZHJhdGUtZXhhbXBsZScgfSlcbmNvbnN0IGZvb0luc3RhbmNlID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKGZvb0F0b20pXG5jb25zdCBiYXJJbnN0YW5jZSA9IGVjb3N5c3RlbS5nZXRJbnN0YW5jZShiYXJBdG9tKVxuXG5jb25zdCBzbmFwc2hvdDEgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKClcblxuZm9vSW5zdGFuY2Uuc2V0U3RhdGUoMykgLy8gY2hhbmdlIGZvbydzIHN0YXRlIGZyb20gMSB0byAzXG5jb25zdCBzbmFwc2hvdDIgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKClcblxuZWNvc3lzdGVtLmh5ZHJhdGUoc25hcHNob3QxKSAvLyByZXN0b3JlIHRoZSBpbml0aWFsIHNuYXBzaG90XG5jb25zdCBzbmFwc2hvdDMgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKClcblxuY29uc3Qgb3V0cHV0ID0geyBzbmFwc2hvdDEsIHNuYXBzaG90Miwgc25hcHNob3QzIH1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgQWZ0ZXIgaHlkcmF0aW9uLCBhbnkgbmV3bHktaW5pdGlhbGl6ZWQgYXRvbSBpbnN0YW5jZXMgdGhhdCBoYXZlIGEgbWF0Y2hpbmcga2V5IGluIHRoZSBoeWRyYXRlZCBzbmFwc2hvdCB3aWxsIHJlY2VpdmUgdGhlaXIgaHlkcmF0ZWQgc3RhdGUgYWZ0ZXIgaW5pdGlhbGl6aW5nLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIixcbiAgICAgICAgXCJtZXRhc3RyaW5nXCI6IFwibGl2ZSBlY29zeXN0ZW1JZD1hdG9tLWh5ZHJhdGUtZXhhbXBsZSByZXN1bHRWYXI9c25hcHNob3RcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJhdG9tLWh5ZHJhdGUtZXhhbXBsZVwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcInNuYXBzaG90XCJcbiAgICAgIH19PntgY29uc3QgaHlkcmF0ZU1lID0gYXRvbSgnaHlkcmF0ZU1lJywgKGlkOiBudW1iZXIpID0+IHtcbiAgcmV0dXJuIGluamVjdFN0b3JlKCdub24taHlkcmF0ZWQgc3RhdGUnKVxufSlcblxuY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHsgaWQ6ICdhdG9tLWh5ZHJhdGUtZXhhbXBsZScgfSlcbmVjb3N5c3RlbS5oeWRyYXRlKHsgJ2h5ZHJhdGVNZS1bMF0nOiAnaHlkcmF0ZWQgc3RhdGUnIH0pXG5cbi8vIHRoZXNlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhZnRlciBoeWRyYXRpb246XG5lY29zeXN0ZW0uZ2V0SW5zdGFuY2UoaHlkcmF0ZU1lLCBbMF0pXG5lY29zeXN0ZW0uZ2V0SW5zdGFuY2UoaHlkcmF0ZU1lLCBbMV0pXG5cbmNvbnN0IHNuYXBzaG90ID0gZWNvc3lzdGVtLmRlaHlkcmF0ZSgpXG5gfTwvY29kZT48L3ByZT5cbiAgICA8cD57YEh5ZHJhdGlvbiB3aWxsIGFsc28gaW1tZWRpYXRlbHkgdXBkYXRlIGFueSBleGlzdGluZyBhdG9tIGluc3RhbmNlcyB3aXRoIGtleUhhc2hlcyBpbiB0aGUgc25hcHNob3QuIFBhc3MgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgeyByZXRyb2FjdGl2ZTogZmFsc2UgfWB9PC9pbmxpbmVDb2RlPntgIGFzIHRoZSBzZWNvbmQgcGFyYW1ldGVyIHRvIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5oeWRyYXRlKClgfTwvaW5saW5lQ29kZT57YCB0byBkaXNhYmxlIHRoaXMuIFdpdGggdGhpcyBvcHRpb24sIG9ubHkgaW5zdGFuY2VzIHRoYXQgYXJlIGNyZWF0ZWQgYWZ0ZXIgaHlkcmF0aW9uIHdpbGwgaGF2ZSB0aGVpciBzdGF0ZSBoeWRyYXRlZC5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgZWNvc3lzdGVtSWQ9bm8tcmV0cm9hY3RpdmUtZXhhbXBsZSByZXN1bHRWYXI9c25hcHNob3RcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwiZWNvc3lzdGVtSWRcIjogXCJuby1yZXRyb2FjdGl2ZS1leGFtcGxlXCIsXG4gICAgICAgIFwicmVzdWx0VmFyXCI6IFwic25hcHNob3RcIlxuICAgICAgfX0+e2Bjb25zdCBoeWRyYXRlTWUgPSBhdG9tKCdoeWRyYXRlTWUnLCAoaWQ6IG51bWJlcikgPT4ge1xuICByZXR1cm4gaW5qZWN0U3RvcmUoJ25vbi1oeWRyYXRlZCBzdGF0ZScpXG59KVxuXG5jb25zdCBlY29zeXN0ZW0gPSBjcmVhdGVFY29zeXN0ZW0oeyBpZDogJ25vLXJldHJvYWN0aXZlLWV4YW1wbGUnIH0pXG5cbi8vIHRoZXNlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBiZWZvcmUgaHlkcmF0aW9uLCBzbyB3b24ndCBiZSB1cGRhdGVkOlxuZWNvc3lzdGVtLmdldEluc3RhbmNlKGh5ZHJhdGVNZSwgWzBdKVxuZWNvc3lzdGVtLmdldEluc3RhbmNlKGh5ZHJhdGVNZSwgWzFdKVxuXG5lY29zeXN0ZW0uaHlkcmF0ZSh7ICdoeWRyYXRlTWUtWzBdJzogJ2h5ZHJhdGVkIHN0YXRlJyB9LCB7IHJldHJvYWN0aXZlOiBmYWxzZSB9KVxuXG5jb25zdCBzbmFwc2hvdCA9IGVjb3N5c3RlbS5kZWh5ZHJhdGUoKVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgzIHsuLi57XG4gICAgICBcImlkXCI6IFwiaHlkcmF0ZS1hdG9tLWNvbmZpZ1wiXG4gICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImgzXCI+e2BoeWRyYXRlYH08L2lubGluZUNvZGU+e2AgQXRvbSBDb25maWdgfTwvaDM+XG4gICAgPHA+e2BBdG9tcyBjYW4gYmUgY29uZmlndXJlZCB3aXRoIGEgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaHlkcmF0ZWB9PC9pbmxpbmVDb2RlPntgIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uOmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2Bjb25zdCBleGFtcGxlQXRvbSA9IGF0b20oJ2V4YW1wbGUnLCBpbml0aWFsU3RhdGUsIHtcbiAgaHlkcmF0ZTogcmF3VmFsID0+IHRyYW5zZm9ybShyYXdWYWwpLFxufSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgVGhpcyBjYW4gYmUgdXNlZCB0byB0cmFuc2Zvcm0gZGVoeWRyYXRlZCB2YWx1ZXMgYmFjayB0byBub24tc2VyaWFsaXphYmxlIGZvcm0uIExldCdzIHJldHVybiB0byBvdXIgSlMgTWFwIGV4YW1wbGU6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c3hcIixcbiAgICAgICAgXCJtZXRhc3RyaW5nXCI6IFwibGl2ZSBlY29zeXN0ZW1JZD1wZXJzaXN0ZW5jZS9oeWRyYXRlIHJlc3VsdFZhcj1EZWh5ZHJhdG9yXCIsXG4gICAgICAgIFwibGl2ZVwiOiB0cnVlLFxuICAgICAgICBcImVjb3N5c3RlbUlkXCI6IFwicGVyc2lzdGVuY2UvaHlkcmF0ZVwiLFxuICAgICAgICBcInJlc3VsdFZhclwiOiBcIkRlaHlkcmF0b3JcIlxuICAgICAgfX0+e2Bjb25zdCB0cmFuc2Zvcm1pbmdBdG9tID0gYXRvbShcbiAgJ3RyYW5zZm9ybWluZycsXG4gICgpID0+IHtcbiAgICBjb25zdCBzdG9yZSA9IGluamVjdFN0b3JlKG5ldyBNYXAoW1snY291bnRlcicsIDBdXSkpXG5cbiAgICBpbmplY3RFZmZlY3QoKCkgPT4ge1xuICAgICAgY29uc3QgaGFuZGxlID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBzdG9yZS5zZXRTdGF0ZShzdGF0ZSA9PlxuICAgICAgICAgIG5ldyBNYXAoc3RhdGUpLnNldCgnY291bnRlcicsIHN0YXRlLmdldCgnY291bnRlcicpICsgMSlcbiAgICAgICAgKVxuICAgICAgfSwgMTAwMClcblxuICAgICAgcmV0dXJuICgpID0+IGNsZWFySW50ZXJ2YWwoaGFuZGxlKVxuICAgIH0pXG5cbiAgICByZXR1cm4gc3RvcmVcbiAgfSxcbiAgLy8gdHJhbnNmb3JtIHRoZSBtYXAgdG8gYW5kIGZyb20gYSBKUyBvYmplY3Q6XG4gIHtcbiAgICBkZWh5ZHJhdGU6IHN0YXRlID0+IE9iamVjdC5mcm9tRW50cmllcyhzdGF0ZS5lbnRyaWVzKCkpLFxuICAgIGh5ZHJhdGU6IHJhd1N0YXRlID0+IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMocmF3U3RhdGUpKSxcbiAgfVxuKVxuXG5mdW5jdGlvbiBDb3VudGVyKCkge1xuICBjb25zdCBtYXAgPSB1c2VBdG9tVmFsdWUodHJhbnNmb3JtaW5nQXRvbSlcblxuICByZXR1cm4gPGRpdj5Db3VudGVyOiB7bWFwLmdldCgnY291bnRlcicpfTwvZGl2PlxufVxuXG5mdW5jdGlvbiBEZWh5ZHJhdG9yKCkge1xuICBjb25zdCBlY29zeXN0ZW0gPSB1c2VFY29zeXN0ZW0oKVxuICBjb25zdCBbZGVoeWRyYXRpb24sIHNldERlaHlkcmF0aW9uXSA9IHVzZVN0YXRlKClcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8Q291bnRlciAvPlxuICAgICAgPHByZT57ZGVoeWRyYXRpb259PC9wcmU+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgc2V0RGVoeWRyYXRpb24oSlNPTi5zdHJpbmdpZnkoZWNvc3lzdGVtLmRlaHlkcmF0ZSgpLCBudWxsLCAyKSlcbiAgICAgICAgfVxuICAgICAgPlxuICAgICAgICBEZWh5ZHJhdGUhXG4gICAgICA8L2J1dHRvbj5cbiAgICAgIHtkZWh5ZHJhdGlvbiAmJiAoXG4gICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gZWNvc3lzdGVtLmh5ZHJhdGUoSlNPTi5wYXJzZShkZWh5ZHJhdGlvbikpfT5cbiAgICAgICAgICBIeWRyYXRlIVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICl9XG4gICAgPC8+XG4gIClcbn1cbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcInN0b3JlLWh5ZHJhdGlvblwiXG4gICAgfX0+e2BTdG9yZSBIeWRyYXRpb25gfTwvaDI+XG4gICAgPHA+e2BUaGUgZGVmYXVsdCBoeWRyYXRpb24gZmxvdyBoeWRyYXRlcyB0aGUgc3RvcmUgYWZ0ZXIgdGhlIGF0b20gaW5zdGFuY2UncyBpbml0aWFsIGV2YWx1YXRpb24gZW5kcy4gVGhpcyBtZWFucyB0aGF0IGlmIHlvdXIgc3RhdGUgZmFjdG9yeSdzIG1haW4gc3RvcmUgd2FzIGluamVjdGVkIHdpdGhvdXQgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3Vic2NyaWJlOiBmYWxzZWB9PC9pbmxpbmVDb2RlPntgLCBpdCB3aWxsIGltbWVkaWF0ZWx5IHRyaWdnZXIgYSBzZWNvbmQgZXZhbHVhdGlvbi5gfTwvcD5cbiAgICA8cD57YFRoaXMgaXMgdXN1YWxseSBmaW5lLiBCdXQgeW91IGNhbiBjaGFuZ2UgdGhpcyBiZWhhdmlvciBpbiAyIHN0ZXBzOmB9PC9wPlxuICAgIDxvbD5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwib2xcIj57YEh5ZHJhdGUgdGhlIGluamVjdGVkIHN0b3JlJ3Mgc3RhdGUgeW91cnNlbGYuYH08L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJvbFwiPntgVGVsbCBaZWR1eCBub3QgdG8gYXV0b21hdGljYWxseSBoeWRyYXRlIHRoaXMgYXRvbS5gfTwvbGk+XG4gICAgPC9vbD5cbiAgICA8cD57YFRvIGh5ZHJhdGUgdGhlIHN0b3JlJ3Mgc3RhdGUsIHVzZSB0aGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaHlkcmF0ZWB9PC9pbmxpbmVDb2RlPntgIG9wdGlvbiBvZiBgfTxhIHBhcmVudE5hbWU9XCJwXCIgey4uLntcbiAgICAgICAgXCJocmVmXCI6IFwiLi4vYXBpL2luamVjdG9ycy9pbmplY3RTdG9yZVwiXG4gICAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiYVwiPntgaW5qZWN0U3RvcmVgfTwvaW5saW5lQ29kZT48L2E+e2A6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHN0b3JlID0gaW5qZWN0U3RvcmUoZGVmYXVsdFZhbHVlLCB7IGh5ZHJhdGU6IHRydWUgfSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgVGhlIHN0b3JlJ3Mgc3RhdGUgd2lsbCBiZSBzZXQgdG8gdGhlIGh5ZHJhdGlvbiBtYXRjaGluZyB0aGUgY3VycmVudCBhdG9tIGluc3RhbmNlLCBhZnRlciBwYXNzaW5nIGl0IHRvIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BoeWRyYXRlYH08L2lubGluZUNvZGU+e2AgYXRvbSBjb25maWcgb3B0aW9uIChpZiBhbnkpIHRvIHRyYW5zZm9ybSB0aGUgdmFsdWUuIElmIHRoZXJlIGlzIG5vIGh5ZHJhdGlvbiBmb3IgdGhlIGN1cnJlbnQgYXRvbSBpbnN0YW5jZSwgcGFzc2luZyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2B7IGh5ZHJhdGU6IHRydWUgfWB9PC9pbmxpbmVDb2RlPntgIGRvZXMgbm90aGluZy5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCIsXG4gICAgICAgIFwibWV0YXN0cmluZ1wiOiBcImxpdmUgcmVzdWx0VmFyPW91dHB1dFwiLFxuICAgICAgICBcImxpdmVcIjogdHJ1ZSxcbiAgICAgICAgXCJyZXN1bHRWYXJcIjogXCJvdXRwdXRcIlxuICAgICAgfX0+e2Bjb25zdCBteUF0b20gPSBhdG9tKFxuICAnbXlLZXknLFxuICAoKSA9PiB7XG4gICAgcmV0dXJuIGluamVjdFN0b3JlKCdkZWZhdWx0JywgeyBoeWRyYXRlOiB0cnVlIH0pXG4gIH0sXG4gIHsgaHlkcmF0ZTogaHlkcmF0aW9uID0+IFxcYFxcJHtoeWRyYXRpb259IGFuZCB0cmFuc2Zvcm1lZCFcXGAgfVxuKVxuXG5jb25zdCBlY29zeXN0ZW0gPSBjcmVhdGVFY29zeXN0ZW0oeyBpZDogJ2h5ZHJhdGUtZmxvdy1leGFtcGxlJyB9KVxuZWNvc3lzdGVtLmh5ZHJhdGUoeyBteUtleTogJ2h5ZHJhdGVkJyB9KVxuXG5jb25zdCBvdXRwdXQgPSBlY29zeXN0ZW0uZ2V0KG15QXRvbSlcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxwPntgV2hlbiBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BpbmplY3RTdG9yZSgpYH08L2lubGluZUNvZGU+e2AncyBmdW5jdGlvbiBvdmVybG9hZCBpcyB1c2VkLCB0aGUgaHlkcmF0aW9uIHdpbGwgYmUgcGFzc2VkIHRvIHlvdXIgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3RvcmVGYWN0b3J5YH08L2lubGluZUNvZGU+e2AgZnVuY3Rpb24uIEl0J3MgdXAgdG8geW91IHRvIHVzZSB0aGUgaHlkcmF0aW9uIHRvIHNldCB5b3VyIHN0b3JlJ3MgaW5pdGlhbCBzdGF0ZS5gfTwvcD5cbiAgICA8cHJlPjxjb2RlIHBhcmVudE5hbWU9XCJwcmVcIiB7Li4ue1xuICAgICAgICBcImNsYXNzTmFtZVwiOiBcImxhbmd1YWdlLXRzXCJcbiAgICAgIH19PntgY29uc3Qgc3RvcmUgPSBpbmplY3RTdG9yZShcbiAgaHlkcmF0aW9uID0+IGNyZWF0ZVN0b3JlKG51bGwsIGh5ZHJhdGlvbiA/PyBkZWZhdWx0VmFsdWUpLFxuICB7IGh5ZHJhdGU6IHRydWUgfVxuKVxuLy8gKHRoaXMgc3BlY2lmaWMgZXhhbXBsZSBpcyBleGFjdGx5IGVxdWl2YWxlbnQgdG86KVxuY29uc3Qgc3RvcmUgPSBpbmplY3RTdG9yZShkZWZhdWx0VmFsdWUsIHsgaHlkcmF0ZTogdHJ1ZSB9KVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPHA+e2BJZiB0aGVyZSBpcyBubyBoeWRyYXRpb24sIHRoaXMgcGFyYW1ldGVyIHdpbGwgYmUgdW5kZWZpbmVkLmB9PC9wPlxuICAgIDxwPntgTm93IGZvciB0aGUgMm5kIHN0ZXA6YH08L3A+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwibWFudWFsaHlkcmF0aW9uXCJcbiAgICB9fT48aW5saW5lQ29kZSBwYXJlbnROYW1lPVwiaDJcIj57YG1hbnVhbEh5ZHJhdGlvbmB9PC9pbmxpbmVDb2RlPjwvaDI+XG4gICAgPHA+e2BTZXQgdGhpcyBhdG9tIGNvbmZpZyBvcHRpb24gdG8gYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgdHJ1ZWB9PC9pbmxpbmVDb2RlPntgIHRvIHByZXZlbnQgWmVkdXggZnJvbSBhdXRvbWF0aWNhbGx5IGh5ZHJhdGluZyBpbnN0YW5jZXMgb2YgdGhlIGF0b20uIFlvdSdsbCB1c3VhbGx5IHdhbnQgdG8gcGFpciB0aGlzIHdpdGggcGFzc2luZyBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJwXCI+e2BoeWRyYXRlOiB0cnVlYH08L2lubGluZUNvZGU+e2AgdG8gYSBzaW5nbGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgaW5qZWN0U3RvcmVgfTwvaW5saW5lQ29kZT57YCBpbiB0aGUgYXRvbSdzIHN0YXRlIGZhY3RvcnkuYH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IGV4YW1wbGVBdG9tID0gYXRvbShcbiAgJ2V4YW1wbGUnLFxuICAoKSA9PiB7XG4gICAgY29uc3Qgc3RvcmUgPSBpbmplY3RTdG9yZShkZWZhdWx0VmFsdWUsIHsgaHlkcmF0ZTogdHJ1ZSB9KVxuICAgIGNvbnN0IGludGVybmFsU3RvcmUgPSBpbmplY3RTdG9yZSgpIC8vIGNhbiBpbmplY3Qgb3RoZXIsIG5vbi1oeWRyYXRlZCBzdG9yZXNcblxuICAgIHJldHVybiBzdG9yZSAvLyBaZWR1eCB3b24ndCBoeWRyYXRlIHRoaXMgc3RvcmUncyBzdGF0ZSBhZnRlciBpbml0IG5vd1xuICB9LFxuICB7XG4gICAgbWFudWFsSHlkcmF0aW9uOiB0cnVlLCAvLyBwcmV2ZW50IGF1dG9tYXRpYyBoeWRyYXRpb25cbiAgfVxuKVxuYH08L2NvZGU+PC9wcmU+XG4gICAgPGgyIHsuLi57XG4gICAgICBcImlkXCI6IFwiaHlkcmF0aW9uLWNvbnN1bXB0aW9uXCJcbiAgICB9fT57YEh5ZHJhdGlvbiBjb25zdW1wdGlvbmB9PC9oMj5cbiAgICA8cD57YFdoZW4gWmVkdXggaHlkcmF0ZXMgYW4gYXRvbSBpbnN0YW5jZSwgaXQgZGVsZXRlcyB0aGUgaHlkcmF0aW9uIGZyb20gdGhlIGVjb3N5c3RlbS4gVGhpcyBtYWtlcyBpdCBlYXN5IHRvIHNlZSB3aGljaCBoeWRyYXRpb25zIGhhdmUgYmVlbiBcImNvbnN1bWVkXCIgYnkgc2ltcGx5IGFjY2Vzc2luZyB0aGUgZWNvc3lzdGVtJ3MgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcIi4uL2FwaS9jbGFzc2VzL0Vjb3N5c3RlbSNoeWRyYXRpb25cIlxuICAgICAgfX0+PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImFcIj57YC5oeWRyYXRpb25gfTwvaW5saW5lQ29kZT48L2E+e2AgcHJvcGVydHk6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiLFxuICAgICAgICBcIm1ldGFzdHJpbmdcIjogXCJsaXZlIHJlc3VsdFZhcj1vdXRwdXRcIixcbiAgICAgICAgXCJsaXZlXCI6IHRydWUsXG4gICAgICAgIFwicmVzdWx0VmFyXCI6IFwib3V0cHV0XCJcbiAgICAgIH19PntgY29uc3QgZm9vQXRvbSA9IGF0b20oJ2ZvbycsIDEpXG5cbmNvbnN0IGVjb3N5c3RlbSA9IGNyZWF0ZUVjb3N5c3RlbSh7IGlkOiAnaHlkcmF0aW9uLWNvbnN1bXB0aW9uLWV4YW1wbGUnIH0pXG5lY29zeXN0ZW0uaHlkcmF0ZSh7IGZvbzogMiwgYmFyOiAzIH0pXG5cbi8vIFwiY29uc3VtZVwiIHRoZSBoeWRyYXRpb24gZm9yIFxcYGZvb1xcYDpcbmNvbnN0IGZvb0luc3RhbmNlID0gZWNvc3lzdGVtLmdldEluc3RhbmNlKGZvb0F0b20pXG5cbmNvbnN0IG91dHB1dCA9IHtcbiAgZm9vVmFsdWU6IGZvb0luc3RhbmNlLmdldFN0YXRlKCksXG4gIHVudXNlZEh5ZHJhdGlvbnM6IGVjb3N5c3RlbS5oeWRyYXRpb24sXG59XG5gfTwvY29kZT48L3ByZT5cbiAgICA8YWRtb25pdGlvbiB7Li4ue1xuICAgICAgXCJ0eXBlXCI6IFwibm90ZVwiXG4gICAgfX0+PHAgcGFyZW50TmFtZT1cImFkbW9uaXRpb25cIj57YEh5ZHJhdGlvbnMgd2lsbCBhbHNvIGJlIGNvbnN1bWVkIGZvciByZXRyb2FjdGl2ZWx5LWh5ZHJhdGVkIGF0b20gaW5zdGFuY2VzLmB9PC9wPjwvYWRtb25pdGlvbj5cbiAgICA8cD57YFRoaXMgYWxzbyBtZWFucyB0aGF0IGlmIGFuIGF0b20gaW5zdGFuY2UgaXMgZGVzdHJveWVkIGFuZCByZWNyZWF0ZWQsIHRoZSBuZXcgYXRvbSBpbnN0YW5jZSB3aWxsIG5vdCBiZSBoeWRyYXRlZCBhZ2Fpbi4gVGhpcyBpcyB1c3VhbGx5IHRoZSBkZXNpcmVkIGJlaGF2aW9yLCBidXQgaWYgeW91IGRvIG5lZWQgdGhpcyB5b3UgY2FuIGFjY29tcGxpc2ggaXQgYnkgXCJyZWh5ZHJhdGluZ1wiIHRoZSBlY29zeXN0ZW0gYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBkZXN0cm95ZWQ6YH08L3A+XG4gICAgPHByZT48Y29kZSBwYXJlbnROYW1lPVwicHJlXCIgey4uLntcbiAgICAgICAgXCJjbGFzc05hbWVcIjogXCJsYW5ndWFnZS10c1wiXG4gICAgICB9fT57YGNvbnN0IHJlaHlkcmF0aW5nQXRvbSA9IGF0b20oXG4gICdyZWh5ZHJhdGluZycsXG4gICguLi5wYXJhbXM6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgeyBlY29zeXN0ZW0gfSA9IGluamVjdEF0b21HZXR0ZXJzKClcbiAgICBjb25zdCBzdG9yZSA9IGluamVjdFN0b3JlKCdkZWZhdWx0IHN0YXRlJywgeyBoeWRyYXRlOiB0cnVlIH0pXG4gICAgY29uc3QgaHlkcmF0aW9uUmVmID0gaW5qZWN0UmVmKHN0b3JlLmdldFN0YXRlKCkpIC8vIGNhcHR1cmUgdGhlIGh5ZHJhdGVkIHN0YXRlXG5cbiAgICBpbmplY3RFZmZlY3QoKCkgPT4ge1xuICAgICAgLy8gdGhpcyBlZmZlY3QgZG9lcyBub3RoaW5nIGJ1dCBzZXR1cCBjbGVhbnVwXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAvLyBvbmUgd2F5IHRvIGdldCB0aGUgY3VycmVudCBhdG9tIGluc3RhbmNlJ3Mga2V5SGFzaDpcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBlY29zeXN0ZW0uZ2V0SW5zdGFuY2UocmVoeWRyYXRpbmdBdG9tLCBbLi4ucGFyYW1zXSlcbiAgICAgICAgLy8gcmVoeWRyYXRlIVxuICAgICAgICBlY29zeXN0ZW0uaHlkcmF0ZSh7IFtpbnN0YW5jZS5rZXlIYXNoXTogaHlkcmF0aW9uUmVmLmN1cnJlbnQgfSlcbiAgICAgIH1cbiAgICB9LCBbXSkgLy8gW10gLSBjbGVhbnVwIHdpbGwgb25seSBydW4gb24gaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cblxuICAgIHJldHVybiBzdG9yZVxuICB9LFxuICB7IHR0bDogMCB9XG4pXG5gfTwvY29kZT48L3ByZT5cbiAgICA8aDIgey4uLntcbiAgICAgIFwiaWRcIjogXCJyZWFjdGl2aXR5LXZpYS1wbHVnaW5zXCJcbiAgICB9fT57YFJlYWN0aXZpdHkgVmlhIFBsdWdpbnNgfTwvaDI+XG4gICAgPHA+e2BUaGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgbG9jYWxTdG9yYWdlYH08L2lubGluZUNvZGU+e2Agc2luZ2xlIGF0b20gZXhhbXBsZXMgd2UgZ2F2ZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoaXMgcGFnZSB3ZXJlIGJlYXV0aWZ1bGx5IHJlYWN0aXZlIC0gdGhleSB3b3VsZCBwZXJzaXN0IHRoZSBhdG9tJ3Mgc3RhdGUgaW1tZWRpYXRlbHkgb24gc3RhdGUgY2hhbmdlLiBOb25lIG9mIG91ciBlY29zeXN0ZW0gZXhhbXBsZXMgZG8gdGhhdC4gV2UgaGF2ZSB0byBtYW51YWxseSBjYWxsIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cInBcIj57YGVjb3N5c3RlbS5kZWh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgIGUuZy4gaW4gcmVzcG9uc2UgdG8gYSBidXR0b24gcHJlc3Mgb3Igb24gYW4gaW50ZXJ2YWwuYH08L3A+XG4gICAgPHA+e2BCeSBkZWZhdWx0LCBlY29zeXN0ZW1zIGRvbid0IHJlY2VpdmUgYW55IGtpbmQgb2YgdXBkYXRlIHdoZW4gaW5kaXZpZHVhbCBhdG9tIGluc3RhbmNlcyBjaGFuZ2Ugc3RhdGUuIFRoaXMgaXMgYnkgZGVzaWduLCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy4gSG93ZXZlciwgaXQgaXMgcG9zc2libGUgdG8gdHVybiB0aGlzIGJlaGF2aW9yIG9uIHdpdGggcGx1Z2lucy5gfTwvcD5cbiAgICA8cD57YEp1c3QgdHVybiBvbiB0aGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwicFwiPntgc3RhdGVDaGFuZ2VkYH08L2lubGluZUNvZGU+e2AgbW9kLmB9PC9wPlxuICAgIDxwcmU+PGNvZGUgcGFyZW50TmFtZT1cInByZVwiIHsuLi57XG4gICAgICAgIFwiY2xhc3NOYW1lXCI6IFwibGFuZ3VhZ2UtdHNcIlxuICAgICAgfX0+e2BpbXBvcnQgeyBjcmVhdGVFY29zeXN0ZW0sIFplZHV4UGx1Z2luIH0gZnJvbSAnQHplZHV4L3JlYWN0J1xuXG5jb25zdCBwbHVnaW4gPSBuZXcgWmVkdXhQbHVnaW4oe1xuICBpbml0aWFsTW9kczogWydzdGF0ZUNoYW5nZWQnXSxcblxuICByZWdpc3RlckVjb3N5c3RlbTogZWNvc3lzdGVtID0+IHtcbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBlY29zeXN0ZW0ubW9kc01lc3NhZ2VCdXMuc3Vic2NyaWJlKHtcbiAgICAgIGVmZmVjdHM6ICh7IGFjdGlvbiB9KSA9PiB7XG4gICAgICAgIGlmIChhY3Rpb24udHlwZSAhPT0gWmVkdXhQbHVnaW4uYWN0aW9ucy5zdGF0ZUNoYW5nZWQudHlwZSkgcmV0dXJuXG5cbiAgICAgICAgY29uc3Qgc25hcHNob3QgPSBlY29zeXN0ZW0uZGVoeWRyYXRlKHsgaW5jbHVkZUZsYWdzOiBbJ3BlcnNpc3QnXSB9KVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc25hcHNob3QnLCBzbmFwc2hvdClcbiAgICAgIH0sXG4gICAgfSlcblxuICAgIHJldHVybiAoKSA9PiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKVxuICB9LFxufSlcblxuY29uc3QgZWNvc3lzdGVtID0gY3JlYXRlRWNvc3lzdGVtKHsgaWQ6ICdyb290JyB9KVxuZWNvc3lzdGVtLnJlZ2lzdGVyUGx1Z2luKHBsdWdpbilcbmB9PC9jb2RlPjwvcHJlPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcInJlY2FwXCJcbiAgICB9fT57YFJlY2FwYH08L2gyPlxuICAgIDx1bD5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFVzZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgZWNvc3lzdGVtLmRlaHlkcmF0ZSgpYH08L2lubGluZUNvZGU+e2AgdG8gZ2V0IGEgc3RhdGUgc25hcHNob3Qgb2YgYWxsIG9yIHNvbWUgb2YgdGhlIGF0b21zIGluIHRoZSBlY29zeXN0ZW0uYH1cbiAgICAgICAgPHVsIHBhcmVudE5hbWU9XCJsaVwiPlxuICAgICAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFVzZSB0aGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YGRlaHlkcmF0ZWB9PC9pbmxpbmVDb2RlPntgIGF0b20gY29uZmlnIG9wdGlvbiB0byB0cmFuc2Zvcm0gdGhlIHN0YXRlIG9mIGluZGl2aWR1YWwgYXRvbXMgdG8gYSBzZXJpYWxpemFibGUgb3Igc2hvcnRlbmVkIGZvcm0uYH08L2xpPlxuICAgICAgICA8L3VsPlxuICAgICAgPC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFVzZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgZWNvc3lzdGVtLmh5ZHJhdGUoKWB9PC9pbmxpbmVDb2RlPntgIHRvIHJlc3RvcmUgYSBzdGF0ZSBzbmFwc2hvdC5gfVxuICAgICAgICA8dWwgcGFyZW50TmFtZT1cImxpXCI+XG4gICAgICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgVXNlIHRoZSBgfTxpbmxpbmVDb2RlIHBhcmVudE5hbWU9XCJsaVwiPntgaHlkcmF0ZWB9PC9pbmxpbmVDb2RlPntgIGF0b20gY29uZmlnIG9wdGlvbiB0byB0cmFuc2Zvcm0gaHlkcmF0aW9ucyBmb3IgaW5kaXZpZHVhbCBhdG9tcy5gfTwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L2xpPlxuICAgICAgPGxpIHBhcmVudE5hbWU9XCJ1bFwiPntgVGhlIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2B7IGh5ZHJhdGU6IHRydWUgfWB9PC9pbmxpbmVDb2RlPntgIGB9PGlubGluZUNvZGUgcGFyZW50TmFtZT1cImxpXCI+e2BpbmplY3RTdG9yZWB9PC9pbmxpbmVDb2RlPntgIG9wdGlvbiBzZXRzIHRoZSBzdG9yZSdzIGluaXRpYWwgc3RhdGUgdG8gdGhlIGh5ZHJhdGVkIHZhbHVlLmB9PC9saT5cbiAgICAgIDxsaSBwYXJlbnROYW1lPVwidWxcIj57YFVzZSB0aGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YG1hbnVhbEh5ZHJhdGlvbmB9PC9pbmxpbmVDb2RlPntgIGF0b20gY29uZmlnIG9wdGlvbiB0byBwcmV2ZW50IFplZHV4IGZyb20gYXV0b21hdGljYWxseSBoeWRyYXRpbmcgaW5kaXZpZHVhbCBhdG9tcy5gfTwvbGk+XG4gICAgICA8bGkgcGFyZW50TmFtZT1cInVsXCI+e2BVc2UgYSBwbHVnaW4gd2l0aCB0aGUgYH08aW5saW5lQ29kZSBwYXJlbnROYW1lPVwibGlcIj57YHN0YXRlQ2hhbmdlZGB9PC9pbmxpbmVDb2RlPntgIG1vZCB0byByZWFjdGl2ZWx5IHBlcnNpc3Qgc25hcHNob3RzLmB9PC9saT5cbiAgICA8L3VsPlxuICAgIDxoMiB7Li4ue1xuICAgICAgXCJpZFwiOiBcIm5leHQtc3RlcHNcIlxuICAgIH19PntgTmV4dCBTdGVwc2B9PC9oMj5cbiAgICA8cD57YE5vdyB3ZSBrbm93IHRoZSBiYXNpY3Mgb2YgcGVyc2lzdGVuY2UuIExldCdzIHVzZSB0aGVzZSB0b29scyB0byBpbXBsZW1lbnQgYH08YSBwYXJlbnROYW1lPVwicFwiIHsuLi57XG4gICAgICAgIFwiaHJlZlwiOiBcInNzclwiXG4gICAgICB9fT57YFNTUmB9PC9hPntgLmB9PC9wPlxuICAgIDwvTURYTGF5b3V0Pjtcbn1cbjtcbk1EWENvbnRlbnQuaXNNRFhDb21wb25lbnQgPSB0cnVlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwibWR4IiwiZnJvbnRNYXR0ZXIiLCJpZCIsInRpdGxlIiwiY29udGVudFRpdGxlIiwidW5kZWZpbmVkIiwibWV0YWRhdGEiLCJhc3NldHMiLCJ0b2MiLCJ2YWx1ZSIsImxldmVsIiwibGF5b3V0UHJvcHMiLCJNRFhMYXlvdXQiLCJNRFhDb250ZW50IiwiY29tcG9uZW50cyIsInByb3BzIiwiaXNNRFhDb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7739\n')}}]);