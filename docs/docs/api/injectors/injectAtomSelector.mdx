---
id: injectAtomSelector
title: injectAtomSelector
---

import { LiveEditor } from '../../LiveEditor'

```ts
import { injectAtomSelector } from '@zedux/react'
```

An [injector](../glossary#injector) that accepts an [AtomSelector](../types/AtomSelector) and registers graph dependencies on any atom instances the AtomSelector uses. Returns whatever the AtomSelector returns.

The selector will rerun every time the state of any of the dependencies it creates change. The atom instance that uses this injector will only reevaluate when the selector result changes.

## Example

<LiveEditor ecosystemId="injectAtomSelector/example" resultVar="Counters">{`
const countersAtom = atom('counters', () => {
  return injectStore({ counterA: 1, counterB: 1 })
})\n
const wrapperAtom = atom('wrapper', () => {
  const counterA = injectAtomSelector(({ get }) => get(countersAtom).counterA)
  const instance = injectAtomInstance(countersAtom)
  const { setState } = instance\n
  return api({ counterA, counterB: instance.store.getState().counterB })
    .setExports({
      incrementA: () =>
        setState(state => ({ ...state, counterA: state.counterA + 1 })),
      incrementB: () =>
        setState(state => ({ ...state, counterB: state.counterB + 1 }))
    })
})\n
function Counters() {
  const { counterA, counterB } = useAtomValue(wrapperAtom)
  const { incrementA, incrementB } = useAtomInstance(wrapperAtom).exports
  const rendersRef = useRef(0)
  rendersRef.current++\n
  return (
    <>
      <div>Number of renders: {rendersRef.current}</div>
      <div>Counter A (dynamic): {counterA}</div>
      <button onClick={incrementA}>
        Increment Counter A
      </button>
      <div>Counter B (static): {counterB}</div>
      <button onClick={incrementB}>
        Increment Counter B
      </button>
    </>
  )
}
`}</LiveEditor>

Miscellaneous:

```ts
// only reevaluate when `someField` changes:
const selectedVal = injectAtomSelector(({ get }) => get(myAtom).someField)

const withParams = injectAtomSelector(
  ({ get }) => get(myAtom, ['a param']).someField
)

const selectorComposition = injectAtomSelector(
  ({ select }) => `${select(helloSelector)}, ${select(worldSelector)}!`
)

const staticVal = injectAtomSelector(
  ({ getInstance }) => getInstance(myAtom).store.getState().someField
)

const staticValUsingEcosystem = injectAtomSelector(
  ({ ecosystem }) => ecosystem.get(myAtom).someField
)
```

## Signature

```ts
injectAtomSelector(atomSelectorOrConfig, ...args) => result
```

### `atomSelectorOrConfig`

The [AtomSelector](../types/AtomSelector) to run or an [AtomSelectorConfig object](../types/AtomSelector#atomselectorconfig) with the AtomSelector as the `selector` property.

### `args`

The extra arguments to pass to the AtomSelector (besides the first AtomGetters arg, which Zedux passes for you). In TypeScript, all of the AtomSelector's required arguments are required here.

### `result`

Whatever the AtomSelector returns.
