---
id: AsyncStore
title: AsyncStore
---

An AsyncStore is a high-level, preconfigured [Zedux store](../classes/Store) that tracks the status and data of an asynchronous operation. It comes configured with a [state machine](../../walkthrough/state-machines) and other reducers that respond to the [asyncUtils actions](../factories/createAsyncStore#actions).

An AsyncStore is created by and returned from [`injectAsyncEffect`](../injectors/injectAsyncEffect) which controls the state of the store for you. You can also create and control these manually via [`asyncUtils.createAsyncStore()`](../factories/createAsyncStore).

## Definition

```ts
interface AsyncState<T> {
  data?: T
  error?: Error
  isError: boolean
  isIdle: boolean
  isLoading: boolean
  isSuccess: boolean
  prevStatus?: AsyncStatus
  status: AsyncStatus
}

enum AsyncStatus {
  Error = 'Error',
  Idle = 'Idle',
  Loading = 'Loading',
  Success = 'Success',
}

type AsyncStore<T> = Store<AsyncState<T>>
```

### `data`

Will be set to the async flow's result. If the async flow represents a promise, this is the resolved value.

When controlling an async store manually, set this by dispatching the [`asyncUtils.actions.loadSuccess()`](../factories/createAsyncStore#loadsuccess) action to the store.

```ts
import { asyncUtils } from '@zedux/react'

const store = asyncUtils.createAsyncStore()
store.dispatch(asyncUtils.actions.load()) // transition state machine

myPromise.then(value => {
  store.dispatch(asyncUtils.actions.loadSuccess(value))
})
```

### `error`

Will be set to any error thrown by the async flow. If the async flow represents a promise, this is the rejection reason.

When controlling an async store manually, set this by dispatching the [`asyncUtils.actions.loadError()`](../factories/createAsyncStore#loaderror) action to the store.

```ts
import { asyncUtils } from '@zedux/react'

const store = asyncUtils.createAsyncStore()
store.dispatch(asyncUtils.actions.load()) // transition state machine

myPromise.catch(err => {
  store.dispatch(asyncUtils.actions.loadError(err))
})
```

### `isError`

An alias for `status === asyncUtils.states.Error`. Will be set to true when the `status` state machine transitions from the `Loading` state to `Error` and set to false when it transitions away.

### `isIdle`

An alias for `status === asyncUtils.states.Idle`. Set to true initially. `injectAsyncEffect` will transition the machine to `Loading` before returning the store.

### `isLoading`

An alias for `status === asyncUtils.states.Loading`. Will be set to true when the `status` state machine transitions from the `Idle` state to `Loading` and set to false when it transitions away.

### `isSuccess`

An alias for `status === asyncUtils.states.Success`. Will be set to true when the `status` state machine transitions from the `Loading` state to `Success` and set to false when it transitions away.

### `prevStatus`

Will be set to the status enum value that the `status` state machine was in prior to reaching its current state. Will be `undefined` initially.

### `status`

A state machine with the following transitions:

```ts
const asyncMachine = createMachine<AsyncStatus>(
  idleState.on(load, loadingState),
  loadingState
    .on(loadSuccess, successState)
    .on(loadError, errorState)
    .on(cancel, idleState),
  successState.on(reset, idleState),
  errorState.on(reset, idleState)
)
```

See the [async actions](../factories/createAsyncStore#actions).
