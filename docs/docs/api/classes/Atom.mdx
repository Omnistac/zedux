---
id: Atom
title: Atom
---

export const AtomKeyDesc = () => (
  <div>
    The key is the key to Dependency Injection - it's how ecosystems know which atoms to override. It also aids development - many errors will log the key of the atom they originated in. Keys also help with a codebase's grepability.
  </div>
)

The standard, default atom type. Instances of this class are passed to most of Zedux' hooks and injectors.

An atom defines a template that Zedux will use to create atom instances. Do not confuse "atom instances" with instances of this Atom class! Atom instances are actually instances of [the AtomInstance class](AtomInstance) ðŸ¤•. We refer to instances of this Atom class as simply "atoms".

## Creation

Use [the `atom()` factory](../factories/atom) to create atoms:

```ts
import { Atom, atom } from '@zedux/react'

const exampleAtom = atom('example', 'initial state')

exampleAtom instanceof Atom // true
```

## Properties

This class exposes the following properties:

### `.key`

A string. Will always be set. This is the first parameter passed to [the `atom()` factory](../factories/atom).

<AtomKeyDesc />

### `.flags`

An array of strings. May be undefined. The flags that will be checked alongside an [ecosystem's flags](Ecosystem#flags) to warn about unsafe atoms being used in certain environments.

Set this via the [AtomConfig option](../types/AtomConfig#flags) passed to [the `atom()` factory](../factories/atom).

### `.forwardPromises`

A boolean. May be undefined. If not set, the [ecosystem's `.defaultForwardPromises` property](Ecosystem#defaultforwardpromises) will be used. If set to `true`, this atom's instances will create a default [`promise` property](AtomInstance#promise) that is effectively a `Promise.all()` of the atom instance's initial dependencies' promises.

No default promise will be created if:

- None of the initial dependencies have promises.
- A promise is set manually via [AtomApi's `.setPromise()`](AtomApi#setpromise).

Setting this option overrides the `.defaultForwardPromises` config option set at [the ecosystem level](Ecosystem#defaultforwardpromises).

See [the suspense walkthrough](../../walkthrough/suspense) for examples.

Set this via the [AtomConfig option](../types/AtomConfig#forwardpromises) passed to [the `atom()` factory](../factories/atom).

### `.maxInstances`

A number. May be undefined. Indicates the largest ideal cache size of the atom.

When more than `maxInstances` number of atom instances of this atom are created in an ecosystem, Zedux' behavior will change regarding the cleanup of those instances. Zedux will ignore `ttl` and instantly clean up instances when they go stale until the number of instances is back within `maxInstances`.

Set this via the [AtomConfig option](../types/AtomConfig#maxinstances) passed to [the `atom()` factory](../factories/atom).

### `.ttl`

A number. May be undefined. If not set, the [ecosystem's `defaultTtl`](Ecosystem#defaultttl) will be used. If the ecosystem doesn't set a default, instances of this atom will live forever by default. Setting this value will override any default.

- Set to `-1` to make this atom's instances live forever.
- Set to `0` to make all atom instances in this ecosystem die by default as soon as they go stale.
- Set to any positive integer to make atoms live in a stale state for `<ttl>` milliseconds before being cleaned up.

This option can be overridden and configured more granularly by the atom instances themselves via [AtomApi#setTtl](AtomApi#setttl).

Set this via the [AtomConfig option](../types/AtomConfig#ttl) passed to [the `atom()` factory](../factories/atom).

## Methods

This class exposes the following methods:

### `.override`

Creates an exact clone of this atom, but with a different value.

```ts
.override(newValue) => Atom
```

Returns the new atom.

#### `newValue`

Can be any of the same [six value types](../factories/atom#value) that `atom()` accepts.

## Extending

When creating your own, custom atom types, you'll usually want to extend this class. Creating your own atom types is an advanced feature and we're not currently documenting it as the internals of these classes may change.
