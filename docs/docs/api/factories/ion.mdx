---
id: ion
title: ion
---

import { Legend, Item, Link, Tabs, Ts, tab1, tab2 } from '@site/src/all'
import { AtomKeyDesc } from '../classes/Atom.mdx'

```ts
import { ion } from '@zedux/react'
```

A factory for creating [Ions](../classes/Ion). Ions are a type of atom that specialize in selection and derivation operations.

Ions are loosely based off of Recoil's [selectors](https://recoiljs.org/docs/api-reference/core/selector).

## Example

```tsx live ecosystemId=ion/example resultVar=TempCelsius
const tempFahrenheit = atom('tempFahrenheit', 32);

const tempCelsius = ion(
  'tempCelsius',
  ({ get }) => ((get(tempFahrenheit) - 32) * 5) / 9,
  ({ set }, newValue) =>
    set(
      tempFahrenheit,
      (newValue * 9) / 5 + 32
    ),
});

function TempCelsius() {
  const [tempF, setTempF] = useAtomState(tempFahrenheit);
  const [tempC, setTempC] = useAtomState(tempCelsius);

  const addTenCelsius = () => setTempC(tempC + 10);
  const addTenFahrenheit = () => setTempF(tempF + 10);

  return (
    <div>
      Temp (Celsius): {Math.round(tempC)}
      <br />
      Temp (Fahrenheit): {Math.round(tempF)}
      <br />
      <button onClick={addTenCelsius}>Add 10 Celsius</button>
      <br />
      <button onClick={addTenFahrenheit}>Add 10 Fahrenheit</button>
    </div>
  );
}
```

## Signature

```ts
ion(key, get, set?, config?) => Ion
```

### Overloads

```ts
ion(key, get, set?) => Ion
ion(key, get, config?) => Ion
```

### `key`

Required. A string. The key should typically be unique, though there are cases (e.g. for DI) where you won't make them unique. The key identifies the ion in ecosystems where it's used.

<AtomKeyDesc />

### `get`

Required. Can be one of:

- An evaluator function that returns a raw value
- An evaluator function that returns a [store](../classes/Store)
- An evaluator function that returns an [AtomApi](../classes/AtomApi)

The first parameter passed to `get` will be a special [AtomGetters object](../types/AtomGetters). Any parameters after that will be the actual params of the atom instance.

```ts
ion('key', ({ ecosystem, get, getInstance }, param) => {
  const otherVal = get(otherAtom)
  const otherInstance = getInstance(otherAtom)

  // injectors can be used
  injectEffect(someEffect, [])

  return otherVal ** 2
})
```

### `set`

Optional. A function that receives a special [AtomSetters object](../types/AtomSetters) and returns either void or the new state of this ion atom instance.

```ts
ion('key', getter, ({ set }, newVal) => {
  set(otherAtom, newVal) // forward setState call to another atom instance
})
```

### `config`

Optional. An [AtomConfig](../types/AtomConfig) object. If it isn't passed, `ttl` will default to -1, which means the atom never dies.

```ts
ion('key', getter, { ttl: 0 })
```
