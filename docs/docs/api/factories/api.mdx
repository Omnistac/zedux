---
id: api
title: api
---

import { Legend, Item, Link, Tabs, Ts, tab1, tab2 } from '@site/src/all'

```ts
import { api } from '@zedux/react'
```

A factory for creating [AtomApis](../classes/AtomApi).

## Examples

Miscellaneous:

```ts
import { api } from '@zedux/react'

const myApi = api()
const withValue = api('some value')
const withStore = api(injectStore())
const withExports = api(val).setExports({ ...myExports })
const withPromise = api(val).setPromise(myPromise)
const cloningApis = api(myApi).addExports(withExports.exports)
const addingExports = api(withExports).addExports({ ...moreExports })
const overwritingExports = api(withExports).setExports({ ...newExports })
const settingTtl = api().setTtl(0)
const ttlPromise = api().setTtl(myPromise)
const ttlObservable = api().setTtl(my$)

// query atoms:
return api(myPromise)
```

## Signature

<Tabs>
  {tab1(`api = (value?) => atomApi`)}
  {tab2(`declare const api: {
  // Custom Stores
  <
    StoreType extends Store<any> = Store<any>,
    Exports extends Record<string, any> = Record<string, any>,
    PromiseType extends AtomApiPromise = undefined
  >(
    value:
      | StoreType
      | AtomApi<StoreStateType<StoreType>, Exports, StoreType, PromiseType>
  ): AtomApi<StoreStateType<StoreType>, Exports, StoreType, PromiseType>
  // No Value
  <
    State = undefined,
    Exports extends Record<string, any> = Record<string, any>,
    PromiseType extends AtomApiPromise = undefined
  >(): AtomApi<State, Exports, undefined, PromiseType>
  // No Store
  <
    State = undefined,
    Exports extends Record<string, any> = Record<string, any>,
    PromiseType extends AtomApiPromise = undefined
  >(
    value: State | AtomApi<State, Exports, undefined, PromiseType>
  ): AtomApi<State, Exports, undefined, PromiseType>
  // Catch-all
  <
    State = undefined,
    Exports extends Record<string, any> = Record<string, any>,
    StoreType extends Store<State> = Store<State>,
    PromiseType extends AtomApiPromise = undefined
  >(
    value: State | StoreType | AtomApi<State, Exports, StoreType, PromiseType>
  ): AtomApi<State, Exports, StoreType, PromiseType>
}`)}
</Tabs>

<Legend>
  <Item name="value">
    <p>Optional. Can be absolutely anything.</p>
    <p>
      If a <Link to="../classes/Store">Zedux store</Link> is passed, it will be
      set as the returned api's <code>.store</code> property. Otherwise,{' '}
      <code>.store</code> will be undefined.
    </p>
    <p>
      If a promise is passed and this api is returned from an atom state
      factory, the atom will become a{' '}
      <Link to="../../walkthrough/query-atoms">query atom</Link>.
    </p>
    <p>
      If another Atom API is passed, <code>api()</code> clones it - returning a
      new AtomApi instance with all the properties of the passed api copied over
      (shallowly).
    </p>
  </Item>
  <Item name="Returns">
    An <Link to="../classes/AtomApi">AtomApi</Link> instance.
  </Item>
</Legend>

## See Also

- [The Atom APIs walkthrough](../../walkthrough/atom-apis)
- [The `AtomApi` class](../classes/AtomApi)
