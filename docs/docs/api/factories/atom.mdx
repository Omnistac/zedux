---
id: atom
title: atom
---

import { Legend, Item, Link, Tabs, Ts, tab1, tab2 } from '@site/src/all'
import { AtomKeyDesc } from '../classes/Atom.mdx'

```ts
import { atom } from '@zedux/react'
```

Where it all starts. `atom()` is a factory for creating normal, everyday atoms. These atoms are actually instances of [the Atom class](../classes/Atom).

## Example

```tsx live ecosystemId=atom/example resultVar=App
const simpleAtom = atom('simple', 'super simple state stuffs')

const complexAtom = atom(
  'complex',
  () => {
    const store = injectStore({ date: new Date() })

    injectEffect(() => {
      const intervalId = setInterval(
        () => store.setState({ date: new Date() }),
        1000
      )

      return () => clearInterval(intervalId)
    }, [])

    return store
  },
  {
    flags: ['side-effect'],
  }
)

function App() {
  const simple = useAtomValue(simpleAtom)
  const { date } = useAtomValue(complexAtom)

  return (
    <>
      <div>simple state: {simple}</div>
      <div>complex state: {date.toLocaleTimeString()}</div>
    </>
  )
}
```

<Tabs>
  {tab1(`atom = (key, valueOrFactory, config?) => newAtom`)}
  {tab2(`declare const atom: {
  // Query Atoms
  <
    State = any,
    Params extends any[] = [],
    Exports extends Record<string, any> = Record<string, never>,
    PromiseType extends AtomApiPromise = undefined
  >(
    key: string,
    value: (
      ...params: Params
    ) => AtomApi<Promise<State>, Exports, undefined, PromiseType>,
    config?: AtomConfig<State>
  ): Atom<
    PromiseState<State>,
    Params,
    Exports,
    Store<PromiseState<State>>,
    PromiseType
  >\n
  // Custom Stores
  <
    StoreType extends Store<any> = Store<any>,
    Params extends any[] = [],
    Exports extends Record<string, any> = Record<string, never>,
    PromiseType extends AtomApiPromise = undefined
  >(
    key: string,
    value: (
      ...params: Params
    ) =>
      | StoreType
      | AtomApi<StoreStateType<Store>, Exports, StoreType, PromiseType>,
    config?: AtomConfig<StoreStateType<StoreType>>
  ): Atom<StoreStateType<StoreType>, Params, Exports, StoreType, PromiseType>\n
  // Catch-all
  <
    State = any,
    Params extends any[] = [],
    Exports extends Record<string, any> = Record<string, never>,
    StoreType extends Store<State> = Store<State>,
    PromiseType extends AtomApiPromise = undefined
  >(
    key: string,
    value: AtomValueOrFactory<State, Params, Exports, StoreType, PromiseType>,
    config?: AtomConfig<State>
  ): Atom<State, Params, Exports, StoreType, PromiseType>
} = <
  State = any,
  Params extends any[] = [],
  Exports extends Record<string, any> = Record<string, never>,
  StoreType extends Store<State> = Store<State>,
  PromiseType extends AtomApiPromise = undefined
>(
  key: string,
  value: AtomValueOrFactory<State, Params, Exports, StoreType, PromiseType>,
  config?: AtomConfig<State>
)`)}
</Tabs>

<Legend>
  <Item name="key">
    <p>Required. A string.</p>
    <p>
      This key must be unique <b>except</b> when creating{' '}
      <Link to="../../walkthrough/overrides">atom overrides</Link>.
    </p>
    <p>
      <AtomKeyDesc />
    </p>
  </Item>
  <Item name="valueOrFactory">
    <p>Required. Can be any of the following:</p>
    <ul className="spaced">
      <li>
        A raw value. When the atom is instantiated, Zedux will create a new
        store with this value as its initial state.
      </li>
      <li>
        A <Link to="../classes/Store">Zedux store</Link>. This will be the store
        of this atom's instance - "instance" singular because such an atom will
        naturally be a singleton (meaning it doesn't take params, since a state
        factory function wasn't passed).
      </li>
      <li>
        A state factory function that returns a raw value. Zedux will create a
        new store with the returned value as its initial state.
      </li>
      <li>
        A state factory function that returns a Zedux store. The returned store
        will be the instance's <code>.store</code>.
      </li>
      <li>
        <p>
          A state factory function that returns an{' '}
          <Link to="../classes/AtomApi">AtomApi</Link> instance.
        </p>
        <p>The Atom API's value can be any of the following:</p>
        <p>
          <ul>
            <li>
              A raw value. Zedux will create a new store with this value as its
              initial state.
            </li>
            <li>
              A Zedux store. This will be the instance's <code>.store</code>.
            </li>
            <li>
              A promise. This will turn the atom into a{' '}
              <Link to="../../walkthrough/query-atoms">query atom</Link>.
            </li>
          </ul>
        </p>
        <p>
          The Atom API's exports will be set as the atom instance's{' '}
          <code>.exports</code>.
        </p>
        <p>
          The Atom API's promise will be set as the atom instance's{' '}
          <code>.promise</code>.
        </p>
      </li>
    </ul>
  </Item>
  <Item name="config">
    <p>
      Optional. An <Link to="../types/AtomConfig">AtomConfig</Link> object.
    </p>
  </Item>
  <Item name="Returns">
    <p>
      An atom. This atom is actually an instance of the{' '}
      <Link to="../classes/Atom">Atom</Link> class.
    </p>
    <p>
      Zedux will manage creating and maintaining instances of the atom as you
      use it.
    </p>
  </Item>
</Legend>

## See Also

- [The Quick Start](../../walkthrough/quick-start)
- [The Configuring Atoms walkthrough](../../walkthrough/configuring-atoms)
