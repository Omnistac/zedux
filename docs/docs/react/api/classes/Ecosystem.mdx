---
id: Ecosystem
title: Ecosystem
---

The ecosystem is an isolated atom environment. It creates a scheduler for running atom-related tasks. It creates a graph that manages atom dependencies.

This class defines many methods for creating, destroying, and inspecting atom instances in the ecosystem and the graph they create.

## Creation

Create ecosystems with [the `ecosystem` factory](../factories/ecosystem).

```ts
import { ecosystem } from '@zedux/react'

const rootEcosystem = ecosystem({ id: 'root' })
```

## Providing

Ecosystems can be provided over React context via [`<EcosystemProvider>`](../components/EcosystemProvider).

```tsx
function App() {
  return (
    <EcosystemProvider ecosystem={rootEcosystem}>
      <Routes />
    </EcosystemProvider>
  )
}
```

## Properties

### `.ecosystemId`

A string. The id of the ecosystem. Zedux will generate a simple, incrementing id for the ecosystem if one isn't supplied to `ecosystem()`. It is always recommended to set your own id.

### `.flags`

An array of strings. These work in conjunction with [atom flags](AtomBase#flags) to raise warnings when unsafe atoms are not overridden in certain environments.

If an atom has a flag that is not present in this array, Zedux will log a warning.

Which atoms, which flags, and which environments, is all up to you. You may want to flag atoms that run side effects you don't want to run in tests. You may want to flag atoms that use APIs that only work in the browser or in electron or any other environment.

### `.overrides`

An array of [atom](Atom) objects. Atoms in this list will override any atoms with the same key used in this ecosystem. See [the Dependency Injection walkthrough](../../walkthrough/dependency-injection) for more info.

## Methods

The ecosystem class has the following public methods:

### `.destroy`

Destroys all atom instances in the ecosystem, cleans up the ecosystem itself (e.g. by removing all currently scheduled tasks), and removes it from the [zeduxGlobalStore](../constants/zeduxGlobalStore).

#### Signature

```ts
.destroy(force?) => void
```

#### `force`

Optional. A boolean. Default: `false`. If true, will destroy the ecosystem even if it's currently being provided over React context (via `<EcosystemProvider>`).

### `.get`

Returns the current state of an atom instance. Creates the atom instance if it doesn't exist yet. The atom instance to use will be resolved based on the passed atom and params.

#### Signature

```ts
.get(atom, params?) => value
```

#### Overloads

```ts
.get(instance) => value
```

#### `atom`

Required. The [atom](Atom) object whose key will be used to find an existing atom instance and whose definition will be used to create an atom instance if none exist yet.

#### `params`

Optional. An array of parameters that identify this atom instance. These params will be passed to the atom's [evaluator function](../glossary#evaluator).

TS users will be required to pass this for atoms that take params.

#### `instance`

Required. An atom instance whose value we're getting. This overload is just an alias for [`instance.store.getState()`](AtomInstance#store).

#### Example

```ts
const currentValue = rootEcosystem.get(myAtom)
const withParams = rootEcosystem.get(paramsAtom, ['param 1', 'param 2'])
```

### `.getInstance`

Returns an atom instance. Creates the atom instance if it doesn't exist yet. The atom instance to use will be resolved based on the passed atom and params.

#### Signature

```ts
.getInstance(atom, params?) => value
```

#### `atom`

Required. The [atom](Atom) object whose key will be used to find an existing atom instance and whose definition will be used to create an atom instance if none exist yet.

#### `params`

Optional. An array of parameters that identify this atom instance. These params will be passed to the atom's [evaluator function](../glossary#evaluator).

TS users will be required to pass this for atoms that take params.

#### Example

```ts
const instance = rootEcosystem.getInstance(myAtom)
const withParams = rootEcosystem.getInstance(paramsAtom, ['param 1', 'param 2'])

instance.store.getState()
instance.setState('new state')
```

### `.inspectInstanceValues`

Returns an object mapping the [keyHash](AtomInstanceBase#keyhash) of all atom instances in the ecosystem to their current values.

#### Signature

```ts
.inspectInstanceValues(atom?) => object
```

#### Overloads

```ts
.inspectInstanceValues(searchKey?) => object
```

#### `atom`

Optional. An atom object to filter results by. Only instances of the atom will included in the result.

#### `searchKey`

Optional. A string to filter results by. Only atom instances whose [atom's key](AtomBase#key) or whose own [keyHash](AtomInstanceBase#keyhash) match the searchKey will be included in the result.

### `.reset`

The preferred way to clear an Ecosystem's state. Calling `.reset` will call [`.wipe()`](#wipe) but will also rerun the preload function.