---
id: atom-ecosystems
title: Atom Ecosystems
---

## Ecosystems

All atoms live in atom ecosystems. An ecosystem is like an isolated group of atoms. Atoms in an ecosystem can interact with each other, but are usually unaware of atoms in other ecosystems.

There are 2 types of ecosystems:

- Global
- App

![](/img/diagrams/atom-ecosystems.png)

(Diagram interpretation: App ecosystems can use the global ecosystem, but not other app ecosystems. The global ecosystem is unaware of all app ecosystems)

### Global

There is exactly one global atom ecosystem. You don't need to create it; it already exists. All atoms in the global ecosystem live outside of React.

Zedux is designed to allow an app to use nothing but the global ecosystem. And for small apps and simple examples, that's fine. However, this approach can only get you so far. The global ecosystem is not very configurable or conducive to some advanced features like [dependency injection](TODO:link) and [atom context](TODO:link). Global atoms can also be unruly in tests, since they require specific cleanup.

### App

App ecosystems are created by rendering an [AppProvider](TODO:link):

```tsx
import { AppProvider } from '@zedux/react'

function App() {
  return (
    <AppProvider>
      <Routes />
    </AppProvider>
  )
}
```

This is similar to Recoil's [`RecoilRoot`](https://recoiljs.org/docs/api-reference/core/RecoilRoot) or Redux' [`Provider`](https://react-redux.js.org/api/provider) or React Query's [`QueryClientProvider`](https://react-query.tanstack.com/reference/QueryClientProvider). In fact, it's basically a combination of all of those. And more.

Every AppProvider creates a new app ecosystem. Most apps will only need one, though more can be created to purposefully create isolated groups of atoms. Tests will typically each create their own AppProvider to take advantage of DI and the automatic cleanup on unmount.

:::note
Nesting AppProviders is not supported currently, but it will be soon. This will allow for some cool DI composability.
:::

`<AppProvider />` takes several props to configure DI, atom context, preloading data, and more. **Most apps will want to use app ecosystems for pretty much everything.**

## Ecosystem Design Patterns

There are 3 main design patterns around atom ecosystems. Choose the most appropriate for your app.

### App Only Approach

![](/img/diagrams/atom-ecosystems-app-only.png)

The most common. In the app only approach, you render one AppProvider - creating a single app ecosystem. You only use app-scoped and local-scoped atoms. Global atoms and the global ecosystem are not used.

Since most apps will only need one AppProvider, there is (usually) no real need for global atoms. Feel free to not use them!

### Global Only Approach

![](/img/diagrams/atom-ecosystems-global-only.png)

In the global only approach, all atoms, regardless of scope, live in the global ecosystem. This is done by never rendering an AppProvider. If no AppProvider is rendered, all atoms are added to the global ecosystem by default.

Note that again there is probably no real need for global atoms in this approach, since app atoms are essentially "global".

The global ecosystem can be nice for simplicity. Some apps don't need any of the features AppProviders offer. And that's fine!

### Mixed Approach

![](/img/diagrams/atom-ecosystems-mixed.png)

In the mixed approach, you create one or more app ecosystems (by rendering AppProviders). These app ecosystems contain all app-scoped and local-scoped atoms, while the global ecosystem holds all global-scoped atoms.

Atoms in the app ecosystems are able to inject global atoms, but not the other way around. Atoms in one app ecosystem are also unaware of other app ecosystems. Global atoms therefore become a means to share data across apps.

Most apps will want to make use of the powerful features of AppProviders. The mixed approach is recommended in most situations.

## Recap

- All atoms live in atom ecosystems.
- There are global and app ecosystems.
- Most apps will use the "App Only Approach" - rendering a single `<AppProvider>` and only using app-scoped and local-scoped atoms.

**So How Do I Add Atoms to These Ecosystems??**

Next up, we'll talk about [scopes](atom-scopes).
