<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-walkthrough/side-effects">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Side Effects | Zedux</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://omnistac.github.io/zedux/docs/walkthrough/side-effects"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Side Effects | Zedux"><meta data-rh="true" name="description" content="Zedux doesn&#x27;t place any restrictions on how you manage asynchronous code. You can use promises, observables, sockets, generators, or any third-party library."><meta data-rh="true" property="og:description" content="Zedux doesn&#x27;t place any restrictions on how you manage asynchronous code. You can use promises, observables, sockets, generators, or any third-party library."><link data-rh="true" rel="icon" href="/zedux/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://omnistac.github.io/zedux/docs/walkthrough/side-effects"><link data-rh="true" rel="alternate" href="https://omnistac.github.io/zedux/docs/walkthrough/side-effects" hreflang="en"><link data-rh="true" rel="alternate" href="https://omnistac.github.io/zedux/docs/walkthrough/side-effects" hreflang="x-default"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap">
<script src="https://unpkg.com/typescript@latest/lib/typescriptServices.js"></script><link rel="stylesheet" href="/zedux/assets/css/styles.86e2e91c.css">
<link rel="preload" href="/zedux/assets/js/runtime~main.4a4c29d4.js" as="script">
<link rel="preload" href="/zedux/assets/js/main.42fd8463.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="ssc-hide" style="display:contents"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zedux/"><div class="navbar__logo"><img src="/zedux/img/logo.png" alt="Zedux Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/zedux/img/logo.png" alt="Zedux Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zedux/docs/walkthrough/quick-start">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Omnistac/zedux" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zedux/docs/about/introduction">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/zedux/docs/walkthrough/quick-start">Walkthrough</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/atom-state">Atom State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/atom-instances">Atom Instances</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/atom-apis">Atom APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/ecosystems">Ecosystems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/the-graph">The Graph</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/overrides">Overrides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/configuring-atoms">Configuring Atoms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/atom-getters">Atom Getters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/selectors">Selectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/destruction">Destruction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/react-context">React Context</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/suspense">Suspense</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/query-atoms">Query Atoms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/stores">Stores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zedux/docs/walkthrough/side-effects">Side Effects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/custom-injectors">Custom Injectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/resets">Resets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zedux/docs/walkthrough/state-machines">State Machines</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zedux/docs/advanced/complex-params">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/zedux/docs/api/classes/Atom">API</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/zedux/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Walkthrough</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Side Effects</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Side Effects</h1></header><p>Zedux doesn&#x27;t place any restrictions on how you manage asynchronous code. You can use promises, observables, sockets, generators, or any third-party library.</p><p>Zedux stores do not have middleware. Read more on that in the <a href="/zedux/docs/about/redux-comparison">Redux comparison</a>. There are many other ways to manage side effects that avoid hijacking control from the store like middleware does.</p><p>We&#x27;ve learned how to use <code>injectEffect</code> to run side effects on state changes that cause atom reevaluations. We also learned in <a href="/zedux/docs/walkthrough/stores">the stores walkthrough</a> that stores can take effects subscribers. We&#x27;ll learn all about those here.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>you will learn</div><div class="admonitionContent_S0QG"><ul><li>That you may not need <code>injectEffect</code></li><li>How to use effects subscribers</li><li>Some utilities for conditionally running side effects</li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="render-as-you-fetch">Render As You Fetch<a class="hash-link" href="#render-as-you-fetch" title="Direct link to heading">â€‹</a></h2><p>Many of the best practices for managing side effects in React still apply with Zedux. If you&#x27;ve been following the React community, you&#x27;ve probably heard that <code>useEffect</code> is not a great pattern for most side effects - it&#x27;s prone to race conditions and some of its quirks are unintuitive. The same applies for <code>injectEffect</code>.</p><p>When React suspense came out, we learned about a new pattern called &quot;render-as-you-fetch&quot;. This boils down to putting side effects in event handlers instead of <code>useEffect</code>. That is boiling it pretty heavily, but let&#x27;s see an example:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-tsx codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">const</span><span class="token"> userAtom </span><span class="token operator">=</span><span class="token"> </span><span class="token function">atom</span><span class="token punctuation">(</span><span class="token string">&#x27;user&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> idStore </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectStore</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> promiseRef </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token keyword">if</span><span class="token"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token">promiseRef</span><span class="token punctuation">.</span><span class="token">current</span><span class="token punctuation">)</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    promiseRef</span><span class="token punctuation">.</span><span class="token">current </span><span class="token operator">=</span><span class="token"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation">`</span><span class="token string">/users/</span><span class="token interpolation"><span class="token interpolation-punctuation">${</span><span class="token">idStore</span><span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation">}</span></span><span class="token template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token">
      </span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token">data </span><span class="token operator">=&gt;</span><span class="token"> data</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token">

  </span><span class="token keyword">const</span><span class="token"> </span><span class="token function-variable">setId</span><span class="token"> </span><span class="token operator">=</span><span class="token"> </span><span class="token punctuation">(</span><span class="token">newId</span><span class="token operator">:</span><span class="token"> </span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    idStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token">newId</span><span class="token punctuation">)</span><span class="token">
    promiseRef</span><span class="token punctuation">.</span><span class="token">current </span><span class="token operator">=</span><span class="token"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation">`</span><span class="token string">/users/</span><span class="token interpolation"><span class="token interpolation-punctuation">${</span><span class="token">newId</span><span class="token interpolation-punctuation">}</span></span><span class="token template-punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token">data </span><span class="token operator">=&gt;</span><span class="token"> data</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token">

  </span><span class="token keyword">return</span><span class="token"> </span><span class="token function">api</span><span class="token punctuation">(</span><span class="token">idStore</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setExports</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token"> setId </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setPromise</span><span class="token punctuation">(</span><span class="token">promiseRef</span><span class="token punctuation">.</span><span class="token">current</span><span class="token punctuation">)</span><span class="token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">

</span><span class="token keyword">function</span><span class="token"> </span><span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> userData </span><span class="token operator">=</span><span class="token"> </span><span class="token function">useAtomValue</span><span class="token punctuation">(</span><span class="token">userAtom</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> setId </span><span class="token punctuation">}</span><span class="token"> </span><span class="token operator">=</span><span class="token"> </span><span class="token function">useAtomInstance</span><span class="token punctuation">(</span><span class="token">userAtom</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token">exports
  </span><span class="token operator">...</span><span class="token">
</span><span class="token punctuation">}</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Rather than using <code>injectEffect</code> to listen to a state update on <code>idStore</code>, we kick off the request immediately, in the <code>setId</code> callback. The state update will cause the <code>User</code> component to rerender, and when it does it will suspend again.</p><p>We&#x27;ll learn more about suspense in <a href="/zedux/docs/walkthrough/suspense">the suspense walkthrough</a>.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>In general, side effects should be colocated with the state they manipulate. This is exactly what we do in React thanks to hooks and props. In Zedux, we can use injectors and exports.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="syncing-state"><code>Syncing State</code><a class="hash-link" href="#syncing-state" title="Direct link to heading">â€‹</a></h2><p>A key piece of managing side effects well is having as few of them as possible. Here&#x27;s a common situation you might find yourself in:</p><p>Ions are often used as selectors with better memoization capabilities. As such, they often transform state from one shape to another. You might be tempted to use <code>injectEffect</code> for this:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">const</span><span class="token"> </span><span class="token function-variable">sortUsers</span><span class="token"> </span><span class="token operator">=</span><span class="token"> list </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token">list</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token">a</span><span class="token punctuation">,</span><span class="token"> b</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> a</span><span class="token punctuation">.</span><span class="token">name</span><span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token">b</span><span class="token punctuation">.</span><span class="token">name</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">

</span><span class="token keyword">const</span><span class="token"> sortedUsersAtom </span><span class="token operator">=</span><span class="token"> </span><span class="token function">ion</span><span class="token punctuation">(</span><span class="token string">&#x27;sortedUsers&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> usersList </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectAtomValue</span><span class="token punctuation">(</span><span class="token">usersAtom</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> store </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectStore</span><span class="token punctuation">(</span><span class="token function">sortUsers</span><span class="token punctuation">(</span><span class="token">usersList</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token function">injectEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    store</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">sortUsers</span><span class="token punctuation">(</span><span class="token">usersList</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">[</span><span class="token">usersList</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token keyword">return</span><span class="token"> store
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This works but has a few imperfections:</p><ul><li>We set the initial state twice! Once on initial evaluation and once the first time the effect runs.</li><li>We had to define the <code>sort</code> logic outside the ion so we can reuse it when setting the initial state and inside the effect.</li><li><code>injectEffect</code> runs the callback one tick later than the atom evaluation. This can be annoying to account for in tests.</li><li>We call <code>sortUsers</code> every time this ion evaluates and discard the result every time except on the first evaluation. This can be fixed by using the function overload of <code>injectStore</code>, but that&#x27;s much more verbose since it requires creating the store manually.</li></ul><p>The fix is simple: Remove <code>injectEffect</code>! Remember that you can call <code>.setState()</code> on local stores during atom evaluation without triggering another evaluation. Let&#x27;s refactor:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">const</span><span class="token"> sortedUsersAtom </span><span class="token operator">=</span><span class="token"> </span><span class="token function">ion</span><span class="token punctuation">(</span><span class="token string">&#x27;sortedUsers&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> usersList </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectAtomValue</span><span class="token punctuation">(</span><span class="token">usersAtom</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> store </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token comment">// highlight-next-line</span><span class="token">
  store</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token">usersList</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token">a</span><span class="token punctuation">,</span><span class="token"> b</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> a</span><span class="token punctuation">.</span><span class="token">name</span><span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token">b</span><span class="token punctuation">.</span><span class="token">name</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token keyword">return</span><span class="token"> store
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This fixes every single problem. Zedux is very specifically designed to work like this. Take advantage of it!</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>While updating a locally injected store during evaluation is good, updating stores in other atom instances during evaluation is not recommended. This is because atom instances can be created during render, and React doesn&#x27;t like it when components update while another component is rendering.</p></div></div><p>But now. We did introduce a new potential problem: What if we had other dependencies in this atom? We&#x27;d be spreading and sorting the users list every single time this atom reevaluates as a result of any of those dependencies changing. Well. You won&#x27;t believe this ... but Zedux actually has yet another superpower:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="injectwhy"><code>injectWhy()</code><a class="hash-link" href="#injectwhy" title="Direct link to heading">â€‹</a></h2><p>This little beast returns an array of <a href="/zedux/docs/api/types/EvaluationReason">reasons</a> that tell you why the current atom is evaluating ðŸ¤¯. Yes. ðŸ¤¯.</p><p>The list is empty on initial evaluation. After that, every reason in the list has a <code>sourceKey</code> field that gives the unique key, if any, of the dependency that caused the update. We can use this to determine if the current evaluation is the initial evaluation or was caused by a specific dependency updating:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">const</span><span class="token"> sortedUsersAtom </span><span class="token operator">=</span><span class="token"> </span><span class="token function">ion</span><span class="token punctuation">(</span><span class="token string">&#x27;sortedUsers&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token comment">// highlight-next-line</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> usersInstance </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectAtomInstance</span><span class="token punctuation">(</span><span class="token">usersAtom</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> usersList </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectAtomValue</span><span class="token punctuation">(</span><span class="token">usersInstance</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> store </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> reasons </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectWhy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token comment">// only set state if this is the initial evaluation or this evaluation was at</span><span class="token">
  </span><span class="token comment">// least partially caused by usersInstance:</span><span class="token">
  </span><span class="token comment">// highlight-next-line</span><span class="token">
  </span><span class="token keyword">if</span><span class="token"> </span><span class="token punctuation">(</span><span class="token">
    </span><span class="token operator">!</span><span class="token">reasons</span><span class="token punctuation">.</span><span class="token">length </span><span class="token operator">||</span><span class="token">
    reasons</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token">reason </span><span class="token operator">=&gt;</span><span class="token"> reason</span><span class="token punctuation">.</span><span class="token">sourceKey </span><span class="token operator">===</span><span class="token"> usersInstance</span><span class="token punctuation">.</span><span class="token">keyHash</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">)</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    store</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token">usersList</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token">a</span><span class="token punctuation">,</span><span class="token"> b</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> a</span><span class="token punctuation">.</span><span class="token">name</span><span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token">b</span><span class="token punctuation">.</span><span class="token">name</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token">

  </span><span class="token keyword">return</span><span class="token"> store
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We&#x27;ll learn more about <code>injectWhy</code> in <a href="/zedux/docs/advanced/dev-tools">the dev tools walkthrough</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="effects-subscribers">Effects Subscribers<a class="hash-link" href="#effects-subscribers" title="Direct link to heading">â€‹</a></h2><p>In <a href="/zedux/docs/walkthrough/stores">the stores walkthrough</a>, we learned that stores can be given an effects subscriber:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">function</span><span class="token"> </span><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> store </span><span class="token punctuation">}</span><span class="token"> </span><span class="token operator">=</span><span class="token"> </span><span class="token function">useAtomInstance</span><span class="token punctuation">(</span><span class="token">myAtom</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    </span><span class="token keyword">const</span><span class="token"> subscription </span><span class="token operator">=</span><span class="token"> store</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token">
      </span><span class="token function-variable">effects</span><span class="token operator">:</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token"> action</span><span class="token punctuation">,</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
        </span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;running effect&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> action</span><span class="token punctuation">,</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
      </span><span class="token punctuation">}</span><span class="token">
    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">

    </span><span class="token keyword">return</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> subscription</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">[</span><span class="token">store</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token operator">...</span><span class="token">
</span><span class="token punctuation">}</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See the full effect subscriber definition <a href="/zedux/not-done">here</a>. Effects subscribers are simple and powerful. But you shouldn&#x27;t need to rig them up manually. Zedux exposes a high-level API that does this for you:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whenbuilder">WhenBuilder<a class="hash-link" href="#whenbuilder" title="Direct link to heading">â€‹</a></h2><p><code>when()</code> is a declarative and simple way to hook into stores. It has several methods for tying into certain events and status updates in stores.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="receivesaction"><code>.receivesAction()</code><a class="hash-link" href="#receivesaction" title="Direct link to heading">â€‹</a></h3><p>Calls an effect handler every time the store receives an action.</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> useAtomInstance</span><span class="token punctuation">,</span><span class="token"> when </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;@zedux/react&#x27;</span><span class="token">

</span><span class="token keyword">function</span><span class="token"> </span><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> store </span><span class="token punctuation">}</span><span class="token"> </span><span class="token operator">=</span><span class="token"> </span><span class="token function">useAtomInstance</span><span class="token punctuation">(</span><span class="token">myAtom</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    </span><span class="token comment">// highlight-next-line</span><span class="token">
    </span><span class="token keyword">const</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> subscription </span><span class="token punctuation">}</span><span class="token"> </span><span class="token operator">=</span><span class="token"> </span><span class="token function">when</span><span class="token punctuation">(</span><span class="token">store</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receivesAction</span><span class="token punctuation">(</span><span class="token">
      </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token"> action</span><span class="token punctuation">,</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
        </span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;store received action&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> action</span><span class="token punctuation">,</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
      </span><span class="token punctuation">}</span><span class="token">
    </span><span class="token punctuation">)</span><span class="token">

    </span><span class="token keyword">return</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> subscription</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">[</span><span class="token">store</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token operator">...</span><span class="token">
</span><span class="token punctuation">}</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>.receivesAction()</code> can be given a specific <a href="/zedux/docs/api/types/ActionFactory">ActionFactory</a> or action type:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> actionFactory</span><span class="token punctuation">,</span><span class="token"> when </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;@zedux/react&#x27;</span><span class="token">

</span><span class="token keyword">const</span><span class="token"> login </span><span class="token operator">=</span><span class="token"> </span><span class="token function">actionFactory</span><span class="token punctuation">(</span><span class="token string">&#x27;login&#x27;</span><span class="token punctuation">)</span><span class="token">
</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token">myStore</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receivesAction</span><span class="token punctuation">(</span><span class="token">login</span><span class="token punctuation">,</span><span class="token"> doStuffOnLogin</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this way, stores can easily be consumed as streams of actions.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setstate"><code>.setState()</code><a class="hash-link" href="#setstate" title="Direct link to heading">â€‹</a></h4><p>When <code>store.setState()</code> is called, Zedux translates that into a dispatch of the special <code>HYDRATE</code> action. To listen to only this action, import the <code>actionTypes</code> object and use the <code>.HYDRATE</code> property:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> actionTypes</span><span class="token punctuation">,</span><span class="token"> when </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;@zedux/react&#x27;</span><span class="token">

</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token">store</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receivesAction</span><span class="token punctuation">(</span><span class="token">actionTypes</span><span class="token punctuation">.</span><span class="token constant">HYDRATE</span><span class="token punctuation">,</span><span class="token"> handleSetState</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="statechanges"><code>.stateChanges()</code><a class="hash-link" href="#statechanges" title="Direct link to heading">â€‹</a></h3><p>Calls an effect handler every time the store&#x27;s state changes in response to an action (which includes every time <code>.setState()</code> is called).</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token function">when</span><span class="token punctuation">(</span><span class="token">myStore</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stateChanges</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token"> action</span><span class="token punctuation">,</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;store state changed&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> action</span><span class="token punctuation">,</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="statematches"><code>.stateMatches()</code><a class="hash-link" href="#statematches" title="Direct link to heading">â€‹</a></h3><p>Calls an effect handler every time the store&#x27;s state updates to match the passed predicate. Does not call the handler if the previous state also matched the predicate.</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">const</span><span class="token"> counterStore </span><span class="token operator">=</span><span class="token"> </span><span class="token function">createStore</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token">

</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token">counterStore</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stateMatches</span><span class="token punctuation">(</span><span class="token">
  num </span><span class="token operator">=&gt;</span><span class="token"> num </span><span class="token operator">&gt;</span><span class="token"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token">
  </span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    </span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;triggered!&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token">
</span><span class="token punctuation">)</span><span class="token">

counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token"> </span><span class="token comment">// triggered! { newState: 2, oldState: 1 }</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token"> </span><span class="token comment">// triggered! { newState: 4, oldState: 0 }</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To perform a side effect on every action or every state change while the predicate is matched, regardless of previous state, use <code>.receivesAction()</code> or <code>.stateChanges()</code> with a normal if statement:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token function">when</span><span class="token punctuation">(</span><span class="token">counterStore</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receivesAction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">if</span><span class="token"> </span><span class="token punctuation">(</span><span class="token">newState </span><span class="token operator">&gt;</span><span class="token"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    </span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#x27;triggered!&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> newState</span><span class="token punctuation">,</span><span class="token"> oldState </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">

counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token"> </span><span class="token comment">// triggered! { newState: 2, oldState: 1 }</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token"> </span><span class="token comment">// triggered! { newState: 3, oldState: 2 }</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token">
counterStore</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token"> </span><span class="token comment">// triggered! { newState: 4, oldState: 0 }</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="chaining">Chaining<a class="hash-link" href="#chaining" title="Direct link to heading">â€‹</a></h3><p>Multiple handlers can be chained together.</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token function">when</span><span class="token punctuation">(</span><span class="token">myStore</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receivesAction</span><span class="token punctuation">(</span><span class="token">logAction</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stateChanges</span><span class="token punctuation">(</span><span class="token">persistStateChange</span><span class="token punctuation">)</span><span class="token">

</span><span class="token comment">// Or</span><span class="token">
</span><span class="token keyword">const</span><span class="token"> whenMyStore </span><span class="token operator">=</span><span class="token"> </span><span class="token function">when</span><span class="token punctuation">(</span><span class="token">myStore</span><span class="token punctuation">)</span><span class="token">

whenMyStore</span><span class="token punctuation">.</span><span class="token function">receivesAction</span><span class="token punctuation">(</span><span class="token">logAction</span><span class="token punctuation">)</span><span class="token">
whenMyStore</span><span class="token punctuation">.</span><span class="token function">stateChanges</span><span class="token punctuation">(</span><span class="token">persistStateChange</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cleanup">Cleanup<a class="hash-link" href="#cleanup" title="Direct link to heading">â€‹</a></h3><p>As with all subscriptions, it&#x27;s important to clean up effects subscribers when their context is destroyed (e.g. the component is unmounted or the atom instance is destroyed).</p><p><code>when()</code> builders have a <code>subscription</code> property, which is a reference to the store subscription created by the <code>when()</code> call. Remember to call <code>subscription.unsubscribe()</code> in <code>useEffect</code> and <code>injectEffect</code>:</p><section class="section21 s_zedux_docs_walkthrough_side_effects1"><div class="div15 s_zedux_docs_walkthrough_side_effects2"><img src="/zedux/img/zedux-icon-75x75.png"><span class="span17 s_zedux_docs_walkthrough_side_effects3">Live Sandbox</span><span class="span16 s_zedux_docs_walkthrough_side_effects4"><span class="span12 s_zedux_docs_walkthrough_side_effects5"><button class="button9 s_zedux_docs_walkthrough_side_effects6"><span>Log</span><svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8"><path fill="transparent" stroke="#fff" d="M0 0 L 6 8 L 12 0"></path></svg></button></span><button class="button18 s_zedux_docs_walkthrough_side_effects7">Reset</button></span></div><div class="div13 s_zedux_docs_walkthrough_side_effects8"><div class="div14 s_zedux_docs_walkthrough_side_effects9"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span><span>13</span><span>14</span><span>15</span><span>16</span><span>17</span><span>18</span><span>19</span><span>20</span><span>21</span></div><div role="textbox" aria-multiline="true" class="Editable20 s_zedux_docs_walkthrough_side_effects10" data-slate-editor="true" data-slate-editor-id="85" data-slate-node="value" contenteditable="true" zindex="-1"><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">const</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> triggerAlert </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">actionFactory</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token string" data-slate-leaf="true"><span data-slate-string="true">&#x27;triggerAlert&#x27;</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-zero-width="n" data-slate-length="0">ï»¿<br></span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">const</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> buttonPressAtom </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">atom</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token string" data-slate-leaf="true"><span data-slate-string="true">&#x27;buttonPress&#x27;</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">,</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=&gt;</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">  </span></span><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">const</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> store </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">injectStore</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-zero-width="n" data-slate-length="0">ï»¿<br></span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">  </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">injectEffect</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=&gt;</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">    </span></span><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">const</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">{</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> subscription </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">}</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">when</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true">store</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">.</span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">receivesAction</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true">triggerAlert</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">,</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=&gt;</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">      </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">alert</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token string" data-slate-leaf="true"><span data-slate-string="true">&#x27;consider it done&#x27;</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">    </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-zero-width="n" data-slate-length="0">ï»¿<br></span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">    </span></span><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">return</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=&gt;</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> subscription</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">.</span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">unsubscribe</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">  </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">}</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">,</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">[</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true">store</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">]</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token comment" data-slate-leaf="true"><span data-slate-string="true">// don&#x27;t have to pass store since it&#x27;s a stable reference</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-zero-width="n" data-slate-length="0">ï»¿<br></span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">  </span></span><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">return</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> store</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">}</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-zero-width="n" data-slate-length="0">ï»¿<br></span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">function</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">Button</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">  </span></span><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">const</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">{</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> dispatch </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">}</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">useAtomInstance</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true">buttonPressAtom</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-zero-width="n" data-slate-length="0">ï»¿<br></span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token" data-slate-leaf="true"><span data-slate-string="true">  </span></span><span class="token keyword" data-slate-leaf="true"><span data-slate-string="true">return</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">&lt;</span></span><span class="token tag" data-slate-leaf="true"><span data-slate-string="true">button</span></span><span class="token tag" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token attr-name" data-slate-leaf="true"><span data-slate-string="true">onClick</span></span><span class="token script-punctuation" data-slate-leaf="true"><span data-slate-string="true">=</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">{</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token script" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token operator" data-slate-leaf="true"><span data-slate-string="true">=&gt;</span></span><span class="token script" data-slate-leaf="true"><span data-slate-string="true"> </span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">dispatch</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token function" data-slate-leaf="true"><span data-slate-string="true">triggerAlert</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">(</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">)</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">}</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">&gt;</span></span><span class="token" data-slate-leaf="true"><span data-slate-string="true">Do It</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">&lt;/</span></span><span class="token tag" data-slate-leaf="true"><span data-slate-string="true">button</span></span><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">&gt;</span></span></span></div><div data-slate-node="element" style="position:relative"><span data-slate-node="text"><span class="token punctuation" data-slate-leaf="true"><span data-slate-string="true">}</span></span></span></div></div></div><div class="div19 s_zedux_docs_walkthrough_side_effects11"><span></span></div></section><p>For the full API, see <a href="/zedux/not-done"><code>when()</code></a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="odd-looking-actions">Odd-Looking Actions<a class="hash-link" href="#odd-looking-actions" title="Direct link to heading">â€‹</a></h2><p>Zedux&#x27; store composition model works by making actions themselves composable objects called ActionChains. The ActionChain contains needed metadata for Zedux to perform its store composition magic. ActionChains consist of any number of &quot;meta nodes&quot; with the wrapped action being the last node in the chain.</p><p>We&#x27;ll go over the specifics of Zedux&#x27; store composition model in <a href="/zedux/docs/advanced/time-travel">the time travel walkthrough</a>. For now you just need to know that, depending on your store setup, you may see these ActionChain objects as the <code>action</code> property in your effects handlers. Zedux doesn&#x27;t unwrap the action because sometimes you will need to observe the metadata the action is wrapped in.</p><p>If you don&#x27;t care about the metadata, you can get the wrapped action with <code>removeAllMeta</code></p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> removeAllMeta</span><span class="token punctuation">,</span><span class="token"> when </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;@zedux/react&#x27;</span><span class="token">

</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token">store</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receivesAction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token"> action </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> unwrappedAction </span><span class="token operator">=</span><span class="token"> </span><span class="token function">removeAllMeta</span><span class="token punctuation">(</span><span class="token">action</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token keyword">switch</span><span class="token"> </span><span class="token punctuation">(</span><span class="token">unwrappedAction</span><span class="token punctuation">.</span><span class="token">type</span><span class="token punctuation">)</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> </span><span class="token operator">...</span><span class="token"> </span><span class="token punctuation">}</span><span class="token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">

store</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token">newState</span><span class="token punctuation">,</span><span class="token"> oldState</span><span class="token punctuation">,</span><span class="token"> actionChain</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> action </span><span class="token operator">=</span><span class="token"> </span><span class="token function">removeAllMeta</span><span class="token punctuation">(</span><span class="token">actionChain</span><span class="token punctuation">)</span><span class="token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="observables">Observables<a class="hash-link" href="#observables" title="Direct link to heading">â€‹</a></h2><p>Zedux stores are a type of observable. However, Zedux doesn&#x27;t have any built-in helpers (currently) for integrating with observable libraries such as <a href="https://github.com/ReactiveX/rxjs" target="_blank" rel="noopener noreferrer">RxJS</a>. But Zedux&#x27; extreme flexibility makes working with observables easy.</p><p>For example, any atom&#x27;s value can be an observable:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> atom </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;@zedux/react&#x27;</span><span class="token">
</span><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> </span><span class="token keyword">of</span><span class="token"> </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;rxjs&#x27;</span><span class="token">

</span><span class="token keyword">const</span><span class="token"> observableValue </span><span class="token operator">=</span><span class="token"> </span><span class="token function">atom</span><span class="token punctuation">(</span><span class="token string">&#x27;observableValue&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token keyword">of</span><span class="token punctuation">(</span><span class="token string">&#x27;hello, world&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This can be useful for taking advantage of Zedux&#x27; caching abilities to share observable references.</p><p>You can export an observable from any atom:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> api</span><span class="token punctuation">,</span><span class="token"> atom</span><span class="token punctuation">,</span><span class="token"> injectMemo </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;@zedux/react&#x27;</span><span class="token">
</span><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> from </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;rxjs&#x27;</span><span class="token">

</span><span class="token keyword">const</span><span class="token"> usersStreamAtom </span><span class="token operator">=</span><span class="token"> </span><span class="token function">atom</span><span class="token punctuation">(</span><span class="token string">&#x27;usersStream&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> users$ </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token function">from</span><span class="token punctuation">(</span><span class="token function">streamUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token keyword">return</span><span class="token"> </span><span class="token function">api</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setExports</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token">
    users$</span><span class="token punctuation">,</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Handling observable subscriptions is easy with <code>injectEffect()</code>:</p><div class="codeBlockContainer_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Container-styles-module theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><pre tabindex="0" class="prism-code codeBlock_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module thin-scrollbar"><code class="code22 s_zedux_docs_walkthrough_side_effects0 language-ts codeBlockLines_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><span class="token keyword">import</span><span class="token"> </span><span class="token punctuation">{</span><span class="token"> atom</span><span class="token punctuation">,</span><span class="token"> injectAtomValue</span><span class="token punctuation">,</span><span class="token"> injectEffect</span><span class="token punctuation">,</span><span class="token"> injectStore </span><span class="token punctuation">}</span><span class="token"> </span><span class="token keyword">from</span><span class="token"> </span><span class="token string">&#x27;@zedux/react&#x27;</span><span class="token">

</span><span class="token keyword">const</span><span class="token"> userAtom </span><span class="token operator">=</span><span class="token"> </span><span class="token function">atom</span><span class="token punctuation">(</span><span class="token string">&#x27;user&#x27;</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> user$ </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectAtomValue</span><span class="token punctuation">(</span><span class="token">userStreamAtom</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token keyword">const</span><span class="token"> store </span><span class="token operator">=</span><span class="token"> </span><span class="token function">injectStore</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token function">injectEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> </span><span class="token punctuation">{</span><span class="token">
    </span><span class="token keyword">const</span><span class="token"> subscription </span><span class="token operator">=</span><span class="token"> user$</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token">val </span><span class="token operator">=&gt;</span><span class="token"> store</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token">val</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token">

    </span><span class="token keyword">return</span><span class="token"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token"> </span><span class="token operator">=&gt;</span><span class="token"> subscription</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token">
  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token"> </span><span class="token punctuation">[</span><span class="token">user$</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token">

  </span><span class="token keyword">return</span><span class="token"> store
</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token">
</span></code></pre><div class="buttonGroup_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-Content-styles-module"><button type="button" class="clean-btn" aria-label="Toggle word wrap" title="Toggle word wrap"><svg class="wordWrapButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-WordWrapButton-styles-module" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" aria-hidden="true"><svg class="copyButtonIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_node_modules-@docusaurus-theme-classic-lib-theme-CodeBlock-CopyButton-styles-module" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="recap">Recap<a class="hash-link" href="#recap" title="Direct link to heading">â€‹</a></h2><ul><li><code>injectEffect()</code> is a simple tool for running side effects on changes that trigger atom reevaluation. It&#x27;s also good for managing cleanup.</li><li>BUT you may not need <code>injectEffect()</code>.</li><li><code>when(store).receivesAction()</code> runs a side effect on every action.</li><li><code>when(store).stateChanges()</code> runs a side effect on every state change.</li><li><code>when(store).stateMatches()</code> runs a side effect when the store&#x27;s new state passes the predicate function, but the old state did not.</li><li><code>when(store).subscription.unsubscribe()</code> cleans up the subscription.</li><li>Zedux can handle every possible asynchronous flow, e.g. RxJS streams, generators, promises, sockets, etc</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a class="hash-link" href="#next-steps" title="Direct link to heading">â€‹</a></h2><p>Let&#x27;s take a closer look at using <a href="/zedux/docs/walkthrough/custom-injectors">custom injectors</a> to simplify managing side effects.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Omnistac/zedux/tree/master/docs/walkthrough/side-effects.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/zedux/docs/walkthrough/stores"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Stores</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zedux/docs/walkthrough/custom-injectors"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Custom Injectors</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#render-as-you-fetch" class="table-of-contents__link toc-highlight">Render As You Fetch</a></li><li><a href="#syncing-state" class="table-of-contents__link toc-highlight"><code>Syncing State</code></a></li><li><a href="#injectwhy" class="table-of-contents__link toc-highlight"><code>injectWhy()</code></a></li><li><a href="#effects-subscribers" class="table-of-contents__link toc-highlight">Effects Subscribers</a></li><li><a href="#whenbuilder" class="table-of-contents__link toc-highlight">WhenBuilder</a><ul><li><a href="#receivesaction" class="table-of-contents__link toc-highlight"><code>.receivesAction()</code></a></li><li><a href="#statechanges" class="table-of-contents__link toc-highlight"><code>.stateChanges()</code></a></li><li><a href="#statematches" class="table-of-contents__link toc-highlight"><code>.stateMatches()</code></a></li><li><a href="#chaining" class="table-of-contents__link toc-highlight">Chaining</a></li><li><a href="#cleanup" class="table-of-contents__link toc-highlight">Cleanup</a></li></ul></li><li><a href="#odd-looking-actions" class="table-of-contents__link toc-highlight">Odd-Looking Actions</a></li><li><a href="#observables" class="table-of-contents__link toc-highlight">Observables</a></li><li><a href="#recap" class="table-of-contents__link toc-highlight">Recap</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zedux/docs/walkthrough/quick-start">React</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Omnistac/zedux" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/josh_claunch" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2017-2023 Joshua Claunch. Built with Docusaurus.</div></div></div></footer></div></div>
<script src="/zedux/assets/js/runtime~main.4a4c29d4.js"></script>
<script src="/zedux/assets/js/main.42fd8463.js"></script>
</body>
</html>